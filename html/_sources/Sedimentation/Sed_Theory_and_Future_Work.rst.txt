Sedimentation Theory and Future Work
=====================================

We suspect that collisions between primary particles and large flocs is possible in the sedimentation tank because the rotational velocity of the flocs is small relative to the sedimentation velocity of the flocs. If the rotational velocity of the flocs is small, then a stagnation point will exist on the floc and a finite flow of fluid will come within a primary particle radius of the floc. Thus a
Would it be possible to increase the concentration of the floc blanket and thus increase the collision rate? There must be an optimal amount of recycled flocs for a floc blanket. Of course, one possiblity is that the optimal recycle is zero. Recycled flocs increase the floc blanket concentration and thus increase the rate of collisions between primary particles and flocs. The recycled flocs also decrease the residence time in the floc blanket and thus decrease the total number of collisions between primary particles and flocs. It may be more complicated than this because the

Our goal is to find the optimal recycle ratio. Optimal is defined as the maximum collision potential. Collision potential is equal to the collision rate times the hydraulic residence time. Collision rate is given by

.. math:: CP_{fb} \propto C_{fb} \theta_{fb}

The residence time in the floc blanket is given by

.. math:: \theta_{fb} = \frac{H_{fb}}{v_{fb}}

.. math:: v_{fb} = \frac{Q_{plant} + Q_{recycle}}{A_{fb}}

.. math:: Q_{recycle} = \Pi_{recycle}Q_{plant}

The velocity up through the floc blanket without recycle is defined as

.. math:: v_{up} = \frac{Q_{plant}}{A_{fb}}

.. math:: v_{fb} = v_{up}\left( 1 + \Pi_{recycle} \right)

Now we need equations for the concentration in the floc blanket. This is based on mass conservation such that the mass in the floc blanket is constant. We are neglecting the fact that there is a hindered sedimentation velocity of the flocs that results in a reduction of the mass flux out of the top of the control volume.

.. math:: C_{fb}\left( Q_{plant}+Q_{recycle} \right) = C_{plant}Q_{plant} + C_{recycle}Q_{recycle}

.. math:: C_{fb} = \frac{C_{plant} + C_{recycle}\Pi_{recycle}}{1+\Pi_{recycle}}

Now we can substitute to get the collision potential as a function of the flow rates.

.. math:: CP_{fb} \propto \frac{C_{plant} + C_{recycle}\Pi_{recycle}}{\left( 1 + \Pi_{recycle} \right)^2}  \frac{H_{fb}} {v_{up}}

.. code:: python

 from aide_design.play import*
 D_fb=2.5*u.cm
 A_fb = pc.area_circle(D_fb)
 H_fb = 1 * u.m
 V_hindered = 1 * u.mm/u.s
 C_fb_conventional = 3 * u.g/u.L
 C_recycle = 20 * u.g/u.L
 C_plant = 100 * u.NTU
 v_up = 3 * u.mm/u.s
 QC_fb = (V_up-V_hindered)*A_fb*C_fb

 def CP(H_fb,v_up,Pi_recycle,C_plant,C_recycle):
   return (H_fb/v_up*(C_plant+C_recycle*Pi_recycle)/(1+Pi_recycle)**2).to_base_units()
 Pi_recycle_max = 2
 Pi_recycle = np.arange(0,Pi_recycle_max,0.1)
 fig, ax = plt.subplots()
 x=np.array([0,Pi_recycle_max])
 yscale = (C_fb*H_fb/(1*u.mm/u.s)).to_base_units()
 print(yscale)
 y=np.array([1,1])*yscale
 ax.plot(x,y)
 ax.plot(Pi_recycle,CP(H_fb,v_up,Pi_recycle,C_plant,C_recycle))
 imagepath = 'Sedimentation/Images/'
 ax.set(xlabel='recycle ratio', ylabel='Collision Potential')
 ax.legend(["no recycle at 1 mm/s","with recycle at 3 mm/s"])
 fig.savefig(imagepath+'fb_recycle_ratio')
 plt.show()

 .. _Collision potential with sludge recycle:
.. figure::    Images/fb_recycle_ratio.png
     :width: 700px
     :align: center
     :alt: mg base for target pH

     Collision potential comparison in a 1 m deep floc blanket.

This analysis suggest that a recycle flow rate that is between 0.5 and 1.5 at a net upflow velocity of 3 mm/s could produce collision potential that is 1/2 of the collision potential with a 1 mm/s upflow velocity. Thus a 3 mm/s sed tank with 2 m of floc blanket might be able to perform at the same level as a 1 mm/s sed tank with a 1 m floc blanket.

The next step is to design the recycle tube. The recycle tube could be inclined to promote additional consolidation to reduce the amount of water that is recycled. The slope would need to be about 60 degrees. We could experiment with the design of the recycle line if it were made of flexible tubing.

It is expected that the consolidated sludge will flow by gravity because of its higher density. The big unknown is what diameter recycle line is needed for a lab scale test with a 2.5 cm diameter sedimentation tank.

The recycle sludge has a density given by

.. math:: \rho_{sludge} = \left( 1 - \frac{\rho_{H_2O}}{\rho_{Clay}} \right) C_{sludge} + \rho_{H_2O}

The piezometric head (measured in equivalent change in height of the recycle line liquid) that is causing the flow through the recycle line is equal to the difference in density between the recycled sludge and the floc blanket times the height of the floc blanket normalized by the recycle line density.

.. math:: H_l = H_{fb}\frac{\rho_{sludge} - \rho_{fb}}{\rho_{sludge}}

.. math:: H_l = H_{fb}\frac{\left( 1 - \frac{\rho_{H_2O}}{\rho_{Clay}} \right) C_{sludge} + \rho_{H_2O} -\left[  \left( 1 - \frac{\rho_{H_2O}}{\rho_{Clay}} \right) C_{fb} + \rho_{H_2O} \right]} {\left( 1 - \frac{\rho_{H_2O}}{\rho_{Clay}} \right) C_{sludge} + \rho_{H_2O}}


.. math:: H_l = H_{fb}\frac{ C_{sludge} -C_{fb}} { C_{sludge} + \frac{\rho_{H_2O}\rho_{Clay}}{  \rho_{Clay} -\rho_{H_2O} }}

The length of the tube is

.. math:: L_{tube} = H_{fb}/sin(60)

We will assume that the dynamic viscosity of the sludge is the same as the dynamic viscosity of water. We will calculate the kinematic viscosity of the sludge by dividing the dynamic viscosity of water by the density of the recycle.

Now we can solve for the required tube diameter

.. code:: python

 from aide_design.play import*
 Temperature= 20*u.degC
 D_fb=2.5*u.cm
 A_fb = pc.area_circle(D_fb)
 H_fb = 3 * u.m
 Angle_tube = 60*u.deg
 L_tube = H_fb/np.sin(Angle_tube)
 density_clay=2650*u.kg/u.m**3

 H_l = H_fb*(C_recycle-C_fb)/(C_recycle+((pc.density_water(Temperature)*density_clay)/(density_clay-pc.density_water(Temperature))))
 H_l
 Q_plant=v_up*A_fb
 Pi_recycle=0.5
 density_recycle = (1 - pc.density_water(Temperature)/density_clay)*C_recycle + pc.density_water(Temperature)
 nu_recycle = pc.viscosity_dynamic(Temperature)/density_recycle
 D_recycle = pc.diam_pipe(Q_plant*Pi_recycle,H_l,L_tube,nu_recycle,0.01*u.mm,2)
 D_recycle.to(u.mm)
 D_recycle.to(u.inch)

The recycle line will be installed between the bottom of the tube settler and the inlet to the sedimentation tank. The recycle line will connect  directly to the side of the sedimentation tank to minimize minor losses. We will use a 0.25" ID, 3/8"OD clear flexible tube for the recycle line. We will use PVC glue to attach the flexible tube to the rigid clear PVC tubing.

It is possible that it will be necessary to prevent flow in the recycle line initially so that it doesn't flow upward. Once the tube begins filling with solids it should be possible for it to start flowing downwards.
