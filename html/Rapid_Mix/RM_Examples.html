

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Rapid Mix Appendix C: Examples &mdash; AguaClara Textbook  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Rapid Mix Theory and Future Work" href="RM_Theory_and_Future_Work.html" />
    <link rel="prev" title="Rapid Mix Derivations" href="RM_Derivations.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> AguaClara Textbook
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Acknowledgements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Authors.html">Authors</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributor's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/rst_intro.html">Introduction to RST and Sphinx for Textbook Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/example_aguaclara_rst.html">Functionality in RST and AguaClara Convention</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/parameter_convention_list.html">Parameter Convention List</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 1: Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Introduction.html">Introduction to AguaClara Water Treatment Design</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 1.1: Review: Fluid Mechanics and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Review/Review_Fluid_Mechanics.html">Review: Fluid Mechanics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Review/Review_Fluid_Mechanics_Derivations.html">Review: Fluid Mechanics Derivations</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 3: Flow Control and Measurement</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Intro.html">Flow Control and Measurement Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Design.html">Flow Control and Measurement Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Derivations.html">Flow Control and Measurement Derivations</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 4: Rapid Mix</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="RM_Intro.html">Rapid Mix Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="RM_Design.html">Rapid Mix Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="RM_Derivations.html">Rapid Mix Derivations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Rapid Mix Appendix C: Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#carbonate-reactions-buffering-and-ph">Carbonate reactions, buffering, and pH</a></li>
<li class="toctree-l2"><a class="reference internal" href="#carbonic-acid-and-bicarbonate">Carbonic Acid and Bicarbonate</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bicarbonate-and-carbonate">Bicarbonate and Carbonate</a></li>
<li class="toctree-l2"><a class="reference internal" href="#total-concentration-of-carbonates">Total Concentration of Carbonates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#alpha-notation">Alpha Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#acid-neutralizing-capacity-anc-or-alkalinity">Acid Neutralizing Capacity (ANC) or Alkalinity</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ph-adjustment">pH Adjustment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#example-find-the-required-dose-of-several-bases-to-raise-the-ph-at-the-manzaragua-water-treatment-plant">Example: Find the required dose of several bases to raise the pH at the Manzaragua Water Treatment Plant</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="RM_Theory_and_Future_Work.html">Rapid Mix Theory and Future Work</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 5: Flocculation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Intro.html">Flocculation  Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Design.html">Flocculation Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Derivations.html">Flocculation Derivations</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 8: Filtration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Filtration/Filtration_Design.html">Filtration Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Filtration/Filtration_Derivations.html">Filtration Derivations</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 6: Sedimentation
:maxdepth: 1</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Intro.html">Sedimentation Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Examples.html">Sedimentation Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Theory_and_Future_Work.html">Sedimentation Theory and Future Work</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AguaClara Textbook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Rapid Mix Appendix C: Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Rapid_Mix/RM_Examples.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rapid-mix-appendix-c-examples">
<span id="title-rapid-mix-examples"></span><h1>Rapid Mix Appendix C: Examples<a class="headerlink" href="#rapid-mix-appendix-c-examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="carbonate-reactions-buffering-and-ph">
<span id="heading-carbonate-reactions-buffering-and-ph"></span><h2>Carbonate reactions, buffering, and pH<a class="headerlink" href="#carbonate-reactions-buffering-and-ph" title="Permalink to this headline">¶</a></h2>
<p>The coagulants used for drinking water treatment are acidic and thus result in a lowering of the pH of the treated water. The optimal pH for aluminum coagulant nanoparticle formation is between pH of 6.5 and 8.5. This is also the <a class="reference external" href="https://www.epa.gov/dwstandardsregulations/secondary-drinking-water-standards-guidance-nuisance-chemicals">pH range set by the EPA secondary standards for drinking water</a>. Although many water sources are within this pH range, there are some waters with more extreme values of pH. The aluminum and iron based coagulants are also acidic and in some waters the pH may drop below the ideal range when adding the coagulant. When the pH is outside the acceptable range it is necessary to adjust the pH by adding either a base or an acid.</p>
<p>When acid is added to a water containing bicarbonate, <span class="math notranslate nohighlight">\(HCO_3^-\)</span>, one of the potential reactions is for a proton to combine with <span class="math notranslate nohighlight">\(HCO_3^-\)</span> to form carbonic acid, <span class="math notranslate nohighlight">\({H_2}CO_3\)</span>. If a base is added to water the reaction will proceed in the opposite direction. Carbonic acid, <span class="math notranslate nohighlight">\({H_2}CO_3\)</span>, is chemical indistinguishable from dissolved carbon dioxide, <span class="math notranslate nohighlight">\(CO_{2_{aq}}\)</span> and the total of carbonic acid and dissolved carbon dioxide is represented as <span class="math notranslate nohighlight">\({H_2}CO_3^{\star}\)</span>. The reaction of bicarbonate to form carbonic acid removes one proton from solution and thus the concentration of protons doesn’t increase as fast as we might have first expected as acid is added to the water.</p>
<p>The reactions of carbonate species with protons provides pH buffering capacity that must be considered when calculating the effect of acid or base addition. Since carbonates are the dominant buffering agents in natural waters it is essential to account for their influence on pH.</p>
</div>
<div class="section" id="carbonic-acid-and-bicarbonate">
<span id="heading-carbonic-acid-and-bicarbonate"></span><h2>Carbonic Acid and Bicarbonate<a class="headerlink" href="#carbonic-acid-and-bicarbonate" title="Permalink to this headline">¶</a></h2>
<div class="math notranslate nohighlight" id="equation-carbonate">
<span class="eqno">(242)<a class="headerlink" href="#equation-carbonate" title="Permalink to this equation">¶</a></span>\[{H_2}CO_3^{\star} \overset {K_1} \longleftrightarrow {H^+} + HCO_3^-\]</div>
<dl class="docutils">
<dt>Where:</dt>
<dd><div class="first last line-block">
<div class="line"><span class="math notranslate nohighlight">\(K_1\)</span> is the dissociation constant defined below.</div>
</div>
</dd>
</dl>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-0">
<span class="eqno">(243)<a class="headerlink" href="#equation-rapid-mix-rm-examples-0" title="Permalink to this equation">¶</a></span>\[{K_1} = \frac{{\left[ {{H^ + }} \right]\left[ {HCO_3^ - } \right]}}{{\left[ {{H_2}CO_3^{\star} } \right]}}\]</div>
<p>Where the [ ] indicates concentration in mole/L. We will use the p function, <span class="math notranslate nohighlight">\(p(x)=-log_{10}(x)\)</span>, to define the dissociation constant.</p>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-1">
<span class="eqno">(244)<a class="headerlink" href="#equation-rapid-mix-rm-examples-1" title="Permalink to this equation">¶</a></span>\[p{K_1} = 6.3\]</div>
<p>At the point of equal concentrations of bicarbonate and carbonic acid the dissociation constant, <span class="math notranslate nohighlight">\(K_1\)</span>, is equal to the hydrogen ion concentration, <span class="math notranslate nohighlight">\(H^ +\)</span>. Thus we have equal concentrations at <span class="math notranslate nohighlight">\(p{K_1} = pH\)</span>. This reaction is “centered” at pH = 6.3 and thus there is maximum buffering due to this reaction at pH = 6.3.</p>
</div>
<div class="section" id="bicarbonate-and-carbonate">
<span id="heading-bicarbonate-and-carbonate"></span><h2>Bicarbonate and Carbonate<a class="headerlink" href="#bicarbonate-and-carbonate" title="Permalink to this headline">¶</a></h2>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-2">
<span class="eqno">(245)<a class="headerlink" href="#equation-rapid-mix-rm-examples-2" title="Permalink to this equation">¶</a></span>\[HCO_3^ - \overset {{K_2}} \longleftrightarrow {H^ + } + CO_3^{ - 2}\]</div>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-3">
<span class="eqno">(246)<a class="headerlink" href="#equation-rapid-mix-rm-examples-3" title="Permalink to this equation">¶</a></span>\[{K_2} = \frac{{\left[ {{H^ + }} \right]\left[ {CO_3^{ - 2}} \right]}}{{\left[ {HCO_3^ - } \right]}}\]</div>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-4">
<span class="eqno">(247)<a class="headerlink" href="#equation-rapid-mix-rm-examples-4" title="Permalink to this equation">¶</a></span>\[p{K_2} = 10.3\]</div>
</div>
<div class="section" id="total-concentration-of-carbonates">
<span id="heading-total-concentration-of-carbonates"></span><h2>Total Concentration of Carbonates<a class="headerlink" href="#total-concentration-of-carbonates" title="Permalink to this headline">¶</a></h2>
<p>The total concentration of carbonate species is given by</p>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-5">
<span class="eqno">(248)<a class="headerlink" href="#equation-rapid-mix-rm-examples-5" title="Permalink to this equation">¶</a></span>\[ \begin{align}\begin{aligned}{C_T} = \left[ {{H_2}CO_3^{\star} } \right] + \left[ {HCO_3^ - } \right] + \left[ {CO_3^{ - 2}} \right]\\Where: :math:`{C_T}` is the total concentration of carbonates.\end{aligned}\end{align} \]</div>
<p>The total concentration of carbonates, <span class="math notranslate nohighlight">\({C_T}\)</span>, is useful because it is conservative even though the individual species concentrations change as pH changes.</p>
</div>
<div class="section" id="alpha-notation">
<span id="heading-alpha-notation"></span><h2>Alpha Notation<a class="headerlink" href="#alpha-notation" title="Permalink to this headline">¶</a></h2>
<p>The alpha notation is used to show the concentration dependence on pH and to make the equations simpler.</p>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-6">
<span class="eqno">(249)<a class="headerlink" href="#equation-rapid-mix-rm-examples-6" title="Permalink to this equation">¶</a></span>\[\left[ {{H_2}CO_3^{\star} } \right] = {\alpha_0}{C_T}\]</div>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-7">
<span class="eqno">(250)<a class="headerlink" href="#equation-rapid-mix-rm-examples-7" title="Permalink to this equation">¶</a></span>\[\left[ {HCO_3^-} \right] = {\alpha_1}{C_T}\]</div>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-8">
<span class="eqno">(251)<a class="headerlink" href="#equation-rapid-mix-rm-examples-8" title="Permalink to this equation">¶</a></span>\[\left[ {CO_3^{-2}} \right] = {\alpha_2}{C_T}\]</div>
</div>
<div class="section" id="acid-neutralizing-capacity-anc-or-alkalinity">
<span id="heading-acid-neutralizing-capacity-anc-or-alkalinity"></span><h2>Acid Neutralizing Capacity (ANC) or Alkalinity<a class="headerlink" href="#acid-neutralizing-capacity-anc-or-alkalinity" title="Permalink to this headline">¶</a></h2>
<p>Acid neutralizing capacity or alkalinity is the ability of a water sample to react with and neutralize an input of acid. The units of ANC are equivalents (or protons) per liter. Bicarbonate, <span class="math notranslate nohighlight">\(HCO_3^-\)</span>, can react with one proton, <span class="math notranslate nohighlight">\(H^+\)</span>, and thus each mole of <span class="math notranslate nohighlight">\(HCO_3^-\)</span> provides one equivalent per liter of ANC. The other terms in the equation have similar explanations.</p>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-9">
<span class="eqno">(252)<a class="headerlink" href="#equation-rapid-mix-rm-examples-9" title="Permalink to this equation">¶</a></span>\[{\text{ANC}} = [HCO_3^ - {\text{] + 2[CO}}_3^{ - 2}{\text{] + [O}}{{\text{H}}^{\text{ - }}}{\text{] - [}}{{\text{H}}^{\text{ + }}}{\text{]}}\]</div>
<p>Note that carbonic acid and dissolved carbon dioxide are not in the ANC equation because they have no ability to neutralize protons.</p>
<p>We can write the ANC equation using alpha notation</p>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-10">
<span class="eqno">(253)<a class="headerlink" href="#equation-rapid-mix-rm-examples-10" title="Permalink to this equation">¶</a></span>\[ANC = {C_T}({\alpha_1} + 2{\alpha_2}) + \frac{{{K_w}}}{{\left[ {{H^ + }} \right]}} - \left[ {{H^ + }} \right]\]</div>
<p>The alphas are each a function of the proton concentration and the dissociation constants of the carbonate reactions.</p>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-11">
<span class="eqno">(254)<a class="headerlink" href="#equation-rapid-mix-rm-examples-11" title="Permalink to this equation">¶</a></span>\[{\alpha_{\text{0}}} = \frac{1}{{1 + \frac{{{K_1}}}{{[{H^ + }]}} + \frac{{{K_1}{K_2}}}{{{{[{H^ + }]}^2}}}}}\]</div>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-12">
<span class="eqno">(255)<a class="headerlink" href="#equation-rapid-mix-rm-examples-12" title="Permalink to this equation">¶</a></span>\[{\alpha_{\text{0}}} = \frac{1}{{1 + \frac{{{K_1}}}{{[{H^ + }]}}\left( {1 + \frac{{{K_2}}}{{[{H^ + }]}}} \right)}}\]</div>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-13">
<span class="eqno">(256)<a class="headerlink" href="#equation-rapid-mix-rm-examples-13" title="Permalink to this equation">¶</a></span>\[{\alpha_{\text{1}}} = \frac{1}{{\frac{{[{{\rm H}^ + }]}}{{{{\rm K}_1}}} + 1 + \frac{{{{\rm K}_2}}}{{[{{\rm H}^ + }]}}}}\]</div>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-14">
<span class="eqno">(257)<a class="headerlink" href="#equation-rapid-mix-rm-examples-14" title="Permalink to this equation">¶</a></span>\[{\alpha_{\text{2}}} = \frac{1}{{\frac{{{{[{{\rm H}^ + }]}^2}}}{{{{\rm K}_1}{{\rm K}_2}}} + \frac{{[{{\rm H}^ + }]}}{{{{\rm K}_2}}} + 1}}\]</div>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-15">
<span class="eqno">(258)<a class="headerlink" href="#equation-rapid-mix-rm-examples-15" title="Permalink to this equation">¶</a></span>\[{\alpha_{\text{2}}} = \frac{1}{{1 + \frac{{[{{\rm H}^ + }]}}{{{{\rm K}_2}}}\left( {1 + \frac{{[{{\rm H}^ + }]}}{{{{\rm K}_1}}}} \right)}}\]</div>
<p>For completeness we include acid neutralizing capacity for the case where the system is in equilibrium with atmospheric carbon dioxide,
<span class="math notranslate nohighlight">\(CO_2\)</span>.</p>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-16">
<span class="eqno">(259)<a class="headerlink" href="#equation-rapid-mix-rm-examples-16" title="Permalink to this equation">¶</a></span>\[ANC_{atm\,equilibrium} = \frac{{{P{C{O_2}}}{K_H}}}{{{\alpha_0}}}({\alpha_1} + 2{\alpha_2}) + \frac{{{K_w}}}{{\left[ {{H^ + }} \right]}} - \left[ {{H^ + }} \right]\]</div>
<div class="section" id="ph-adjustment">
<h3>pH Adjustment<a class="headerlink" href="#ph-adjustment" title="Permalink to this headline">¶</a></h3>
<p>In drinking water treatment plant operation it is sometimes necessary to add a base (or acid) to increase (or decrease) the pH of the raw water. The carbonate system is most important in understanding how the base will adjust the pH because the reaction between carbonic acid and bicarbonate occurs around pH 6.3, the pK for that reaction. Carbon dioxide exchange with the atmosphere is insignificant in drinking water treatment unit processes unless there is a aeration stage. Thus we can use the ANC equation for the case with no <span class="math notranslate nohighlight">\(CO_2\)</span> exchange with the atmosphere.</p>
<p>We will evaluate the case where we add a base that will increase the ANC of the raw water and it might also increase the total carbonate concentration. Our goal is to calculate how much of that base to add to reach a target pH. The final ANC after base addition is given by
.. math:: ANC_1 = ANC_0 + Pi_{ANC}C_B</p>
<div class="line-block">
<div class="line">where:</div>
<div class="line"><span class="math notranslate nohighlight">\(ANC_1\)</span> is the final acid neutralizing capacity of the mixture after the base is added.</div>
<div class="line"><span class="math notranslate nohighlight">\(C_B\)</span> is concentration of base in mole/liter  <span class="math notranslate nohighlight">\(\Pi_{ANC}\)</span> is ANC per mole of base</div>
</div>
<p>The final carbonate concentration is given by</p>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-17">
<span class="eqno">(260)<a class="headerlink" href="#equation-rapid-mix-rm-examples-17" title="Permalink to this equation">¶</a></span>\[C_{T_1} ={C_{T_0}}+ \Pi_{CO_3^{-2}}C_B\]</div>
<div class="line-block">
<div class="line">where:</div>
<div class="line"><span class="math notranslate nohighlight">\(C_{T_1}\)</span> is the final total carbonate concentration of the mixture after the base is added.</div>
<div class="line"><span class="math notranslate nohighlight">\(\Pi_{CO_3^{-2}}\)</span> is mole of carbonate per mole of base (0 for <span class="math notranslate nohighlight">\(NaOH\)</span> and 1 for <span class="math notranslate nohighlight">\(Na_2CO_3\)</span>)</div>
</div>
<p>Substituting these values into the ANC equation we obtain</p>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-18">
<span class="eqno">(261)<a class="headerlink" href="#equation-rapid-mix-rm-examples-18" title="Permalink to this equation">¶</a></span>\[ANC_0 + \Pi_{ANC}C_B = ({C_{T_0}}+ \Pi_{CO_3^{-2}}C_B)({\alpha_1} + 2{\alpha_2}) +  \frac{{{K_w}}}{{\left[ {{H^ + }} \right]}} - \left[ {{H^ + }} \right]\]</div>
<p>Now we solve for <span class="math notranslate nohighlight">\(C_B\)</span>, the concentration of base that must be added to reach a target pH.</p>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-19">
<span class="eqno">(262)<a class="headerlink" href="#equation-rapid-mix-rm-examples-19" title="Permalink to this equation">¶</a></span>\[(\Pi_{ANC} -\Pi_{CO_3^{-2}}({\alpha_1} + 2{\alpha_2}) )C_B= {C_{T_0}}({\alpha_1} + 2{\alpha_2}) +  \frac{{{K_w}}}{{\left[ {{H^ + }} \right]}} - \left[ {{H^ + }} \right] - ANC_0\]</div>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-20">
<span class="eqno">(263)<a class="headerlink" href="#equation-rapid-mix-rm-examples-20" title="Permalink to this equation">¶</a></span>\[C_B= \frac{{C_{T_0}}({\alpha_1} + 2{\alpha_2}) +  \frac{{{K_w}}}{{\left[ {{H^ + }} \right]}} - \left[ {{H^ + }} \right] - ANC_0}{\Pi_{ANC} -\Pi_{CO_3^{-2}}({\alpha_1} + 2{\alpha_2})}\]</div>
<p>Note that the equations above can also be used for the case where acid is added to reduce the pH. In that case <span class="math notranslate nohighlight">\(\Pi_{ANC}\)</span> will have a negative value.</p>
</div>
</div>
<div class="section" id="example-find-the-required-dose-of-several-bases-to-raise-the-ph-at-the-manzaragua-water-treatment-plant">
<h2>Example: Find the required dose of several bases to raise the pH at the Manzaragua Water Treatment Plant<a class="headerlink" href="#example-find-the-required-dose-of-several-bases-to-raise-the-ph-at-the-manzaragua-water-treatment-plant" title="Permalink to this headline">¶</a></h2>
<p>The Mazaragua AguaClara plant consists of two 1 L/s plants operating in parallel. The plant is located in the municipality of Guinope, the department of El Paraiso, Honduras.</p>
<blockquote>
<div><div class="figure align-center" id="id1">
<span id="manzaragua-wtp"></span><a class="reference internal image-reference" href="../_images/Manzaragua_WTP.jpg"><img alt="Manzaragua WTP" src="../_images/Manzaragua_WTP.jpg" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 52 </span><span class="caption-text">Manzaragua water treatment plant using two of the AguaClara 1 L/s plants in parallel.</span></p>
</div>
</div></blockquote>
<p>The plant performed very poorly from the first day of operation. The first attempted fix was to double the flocculator residence time by increasing the number of flocculator pipes (3 inch diameter by 1.5 m long) from 12 to 24. This improved performance, but the plant continued to perform poorly. A raw water sample was analyzed on May 30, 2018 and the following results were obtained.</p>
<div class="figure align-center" id="id2">
<span id="figure-manzaragua-water-analysis"></span><a class="reference internal image-reference" href="../_images/Manzaragua_Water_Analysis.jpg"><img alt="Manzaragua Water Analysis" src="../_images/Manzaragua_Water_Analysis.jpg" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 53 </span><span class="caption-text">Water quality analysis for Manzaragua.</span></p>
</div>
<span id="table-manzaragua-water-quality-analysis"></span><table border="1" class="colwidths-given docutils align-center" id="id3">
<caption><span class="caption-number">Table 11 </span><span class="caption-text">Manzaragua water quality analysis</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Units</th>
<th class="head">Standard</th>
<th class="head">Results</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Turbidity</td>
<td>NTU</td>
<td>5</td>
<td>71</td>
</tr>
<tr class="row-odd"><td>Color</td>
<td>color units</td>
<td>15</td>
<td>150</td>
</tr>
<tr class="row-even"><td>pH</td>
<td>pH</td>
<td>6.5 - 8.5</td>
<td>5.91</td>
</tr>
<tr class="row-odd"><td>Conductivity</td>
<td><span class="math notranslate nohighlight">\(\mu s/cm\)</span></td>
<td>400</td>
<td>69.15</td>
</tr>
<tr class="row-even"><td>Alkalinity</td>
<td><span class="math notranslate nohighlight">\(mg/L\)</span> as <span class="math notranslate nohighlight">\(CaCO_3\)</span></td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>24.5</td>
</tr>
<tr class="row-odd"><td>Bicarbonates</td>
<td><span class="math notranslate nohighlight">\(mg/L\)</span> as <span class="math notranslate nohighlight">\(CaCO_3\)</span></td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>24.5</td>
</tr>
<tr class="row-even"><td>Carbonates</td>
<td><span class="math notranslate nohighlight">\(mg/L\)</span> as <span class="math notranslate nohighlight">\(CaCO_3\)</span></td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>Hardness</td>
<td><span class="math notranslate nohighlight">\(mg/L\)</span> as <span class="math notranslate nohighlight">\(CaCO_3\)</span></td>
<td>400</td>
<td>15.68</td>
</tr>
</tbody>
</table>
<p>This water has high color which suggests a high concentration of dissolved organic matter. The pH is a clear problem because the pH is too low for the coagulant nanoparticles to precipitate. As the water sample pH of 5.91 a significant fraction of the coagulant will remain soluble.</p>
<p>Our goal is to determine how much base will need to be added to raise the pH. We do not have data on the <em>optimal</em> pH for treating high color water with PACl and so we will use pH 7 as the target. We will need a separate calculation to estimate how much additional <span class="math notranslate nohighlight">\(Na_2CO_3\)</span> will need to be added to balance the PACl acidity.</p>
<p>At circumneutral pH (pH close to 7) the buffering capacity of the water is dominated by carbonate chemistry and specifically by the equilibrium between <span class="math notranslate nohighlight">\({H_2}CO_3^{\star}\)</span> and $HCO_3^- $. We will use the acid neutralizing capacity (reported as calcium carbonate alkalinity) and the pH from the sample analysis to estimate the total concentration of carbonates. We will not use the sample analysis carbonate concentrations because they can not be precisely correct.</p>
<p>The solution steps are as follows: 1) Find total carbonate concentration, <span class="math notranslate nohighlight">\(C_{T_0}\)</span>, of the raw water sample using the ANC equation for the case where the system is not exchanging <span class="math notranslate nohighlight">\(CO_2\)</span> with the atmosphere. 1) Solve for the required concentration of base, <span class="math notranslate nohighlight">\(C_B\)</span>.</p>
<p>For step 1 we need to solve the ANC equation for the carbonate concentration.</p>
<div class="math notranslate nohighlight" id="equation-rapid-mix-rm-examples-21">
<span class="eqno">(264)<a class="headerlink" href="#equation-rapid-mix-rm-examples-21" title="Permalink to this equation">¶</a></span>\[C_{T_0} = \frac{ANC_0  - \frac{{{K_w}}}{{\left[ {{H^ + }} \right]}} + \left[ {{H^ + }} \right]}{\alpha_1 + 2\alpha_2}\]</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We eventually should add the effect of the coagulant to this analysis so the required base concentration can be calculated given the raw water alkalinity, raw water pH, and coagulant dose.</p>
</div>
<span id="table-anc-and-carbonate-values-for-several-bases-and-acids"></span><table border="1" class="colwidths-given docutils align-center" id="id4">
<caption><span class="caption-number">Table 12 </span><span class="caption-text">ANC and carbonate values for several bases and acids</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Base/Acid</th>
<th class="head"><span class="math notranslate nohighlight">\(Pi_{ANC}\)</span></th>
<th class="head"><span class="math notranslate nohighlight">\(Pi_{CO_3^{-2}}\)</span></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="math notranslate nohighlight">\(Na_2CO_3\)</span> or <span class="math notranslate nohighlight">\(CaCO_3\)</span></td>
<td>2</td>
<td>1</td>
</tr>
<tr class="row-odd"><td><span class="math notranslate nohighlight">\(NaHCO_3\)</span></td>
<td>1</td>
<td>1</td>
</tr>
<tr class="row-even"><td><span class="math notranslate nohighlight">\(NaOH\)</span></td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-odd"><td><span class="math notranslate nohighlight">\(HCl\)</span> or <span class="math notranslate nohighlight">\(HNO_3\)</span></td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="row-even"><td><span class="math notranslate nohighlight">\(H_2SO_4\)</span></td>
<td>-2</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>For <span class="math notranslate nohighlight">\(Na_2CO_3\)</span> * <span class="math notranslate nohighlight">\(\Pi_{ANC}\)</span> = 2 because we are adding
<span class="math notranslate nohighlight">\(CO_3^{-2}\)</span> which is multiplied by two in the ANC equation because
<span class="math notranslate nohighlight">\(CO_3^{-2}\)</span> can react with two protons. * <span class="math notranslate nohighlight">\(\Pi_{CO_3^{-2}}\)</span>
= 1 because there is one mole of <span class="math notranslate nohighlight">\(CO_3\)</span> per mole of
<span class="math notranslate nohighlight">\(Na_2CO_3\)</span></p>
<p>Below is the code used to calculate the required base addition.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aide_design.play</span> <span class="k">import</span><span class="o">*</span>
<span class="kn">from</span> <span class="nn">aguaclara_research.play</span> <span class="k">import</span><span class="o">*</span>
<span class="kn">import</span> <span class="nn">aguaclara_research.Environmental_Processes_Analysis</span> <span class="k">as</span> <span class="nn">epa</span>

<span class="sd">&quot;&quot;&quot;define molecular weights&quot;&quot;&quot;</span>
<span class="n">m_Ca</span> <span class="o">=</span> <span class="mf">40.078</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">g</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">mol</span>
<span class="n">m_C</span> <span class="o">=</span> <span class="mf">12.011</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">g</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">mol</span>
<span class="n">m_O</span> <span class="o">=</span> <span class="mf">15.999</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">g</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">mol</span>
<span class="n">m_Na</span> <span class="o">=</span> <span class="mf">22.99</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">g</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">mol</span>
<span class="n">m_H</span> <span class="o">=</span> <span class="mf">1.008</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">g</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">mol</span>
<span class="n">m_CaCO3</span> <span class="o">=</span> <span class="n">m_Ca</span><span class="o">+</span><span class="n">m_C</span><span class="o">+</span><span class="mi">3</span><span class="o">*</span><span class="n">m_O</span>
<span class="n">m_Na2CO3</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">m_Na</span><span class="o">+</span><span class="n">m_C</span><span class="o">+</span><span class="mi">3</span><span class="o">*</span><span class="n">m_O</span>
<span class="n">m_NaHCO3</span> <span class="o">=</span> <span class="n">m_Na</span><span class="o">+</span><span class="n">m_H</span><span class="o">+</span><span class="n">m_C</span><span class="o">+</span><span class="mi">3</span><span class="o">*</span><span class="n">m_O</span>
<span class="n">m_NaOH</span> <span class="o">=</span> <span class="n">m_Na</span><span class="o">+</span><span class="n">m_O</span><span class="o">+</span><span class="n">m_H</span>

<span class="sd">&quot;&quot;&quot;Raw water characteristics&quot;&quot;&quot;</span>
<span class="n">pH_0</span> <span class="o">=</span> <span class="mf">5.91</span>
<span class="n">ANC_0</span> <span class="o">=</span> <span class="p">(</span><span class="mf">24.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="o">/</span><span class="n">m_CaCO3</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mmol</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">)</span>
<span class="n">ANC_0</span>

<span class="k">def</span> <span class="nf">total_carbonates_closed</span><span class="p">(</span><span class="n">pH</span><span class="p">,</span> <span class="n">ANC</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function calculates total carbonates for a closed system given pH and ANC</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    pH : float</span>
<span class="sd">        pH of the sample</span>
<span class="sd">    ANC: float</span>
<span class="sd">        acid neutralizing capacity of the sample</span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    The total carbonates of the sample</span>
<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; total_carbonates_closed(1*u.mmol/u.L,8)</span>
<span class="sd">    1.017 mole/liter</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">ANC</span> <span class="o">-</span> <span class="n">epa</span><span class="o">.</span><span class="n">Kw</span><span class="o">/</span><span class="n">epa</span><span class="o">.</span><span class="n">invpH</span><span class="p">(</span><span class="n">pH</span><span class="p">)</span> <span class="o">+</span> <span class="n">epa</span><span class="o">.</span><span class="n">invpH</span><span class="p">(</span><span class="n">pH</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">epa</span><span class="o">.</span><span class="n">alpha1_carbonate</span><span class="p">(</span><span class="n">pH</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">epa</span><span class="o">.</span><span class="n">alpha2_carbonate</span><span class="p">(</span><span class="n">pH</span><span class="p">))</span>


<span class="n">CT_0</span> <span class="o">=</span> <span class="n">total_carbonates_closed</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">)</span>


<span class="sd">&quot;&quot;&quot; calculate the amount of base that must be added to reach a target pH&quot;&quot;&quot;</span>
<span class="k">def</span> <span class="nf">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_ANC</span><span class="p">,</span><span class="n">Pi_CO3</span><span class="p">,</span><span class="n">pH_target</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;This function calculates the required base (or acid) to adjust the pH to a target value. The buffering capacity is assumed to be completely due to carbonate species. The initial carbonate concentration is calculated based on the initial pH and the initial ANC.</span>

<span class="sd">  Parameters</span>
<span class="sd">  ----------</span>
<span class="sd">  pH_0: float</span>
<span class="sd">      pH of the sample</span>
<span class="sd">  ANC_0: float</span>
<span class="sd">      acid neutralizing capacity (Alkalinity) of the sample in eq/L.</span>
<span class="sd">  Pi_ANC: float</span>
<span class="sd">    equivalents of ANC per mole of base (or acid)</span>
<span class="sd">  Pi_CO3: float</span>
<span class="sd">    mole of carbonate per mole of base (or acid)</span>
<span class="sd">  pH_target: float</span>
<span class="sd">    pH goal</span>
<span class="sd">  Returns</span>
<span class="sd">  -------</span>
<span class="sd">  The required concentration of base (or acid) in millimoles/L</span>
<span class="sd">  Examples</span>
<span class="sd">  --------</span>
<span class="sd">  &gt;&gt;&gt; pH_adjust(5.91,0.2*u.mmol/u.L,1,1,7)</span>
<span class="sd">  2.2892822041250924 millimole/liter</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">CT_0</span> <span class="o">=</span> <span class="n">total_carbonates_closed</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">)</span>
  <span class="n">B_num</span> <span class="o">=</span> <span class="n">CT_0</span> <span class="o">*</span> <span class="p">(</span><span class="n">epa</span><span class="o">.</span><span class="n">alpha1_carbonate</span><span class="p">(</span><span class="n">pH_target</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">epa</span><span class="o">.</span><span class="n">alpha2_carbonate</span><span class="p">(</span><span class="n">pH_target</span><span class="p">))</span> <span class="o">+</span> <span class="n">epa</span><span class="o">.</span><span class="n">Kw</span><span class="o">/</span><span class="n">epa</span><span class="o">.</span><span class="n">invpH</span><span class="p">(</span><span class="n">pH_target</span><span class="p">)</span> <span class="o">-</span> <span class="n">epa</span><span class="o">.</span><span class="n">invpH</span><span class="p">(</span><span class="n">pH_target</span><span class="p">)</span> <span class="o">-</span> <span class="n">ANC_0</span>
  <span class="n">B_den</span> <span class="o">=</span> <span class="n">Pi_ANC</span> <span class="o">-</span> <span class="n">Pi_CO3</span><span class="o">*</span><span class="p">(</span><span class="n">epa</span><span class="o">.</span><span class="n">alpha1_carbonate</span><span class="p">(</span><span class="n">pH_target</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">epa</span><span class="o">.</span><span class="n">alpha2_carbonate</span><span class="p">(</span><span class="n">pH_target</span><span class="p">))</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">B_num</span><span class="o">/</span><span class="n">B_den</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mmol</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;target pH&quot;&quot;&quot;</span>
<span class="n">pH_target</span> <span class="o">=</span> <span class="mi">7</span>

<span class="n">Pi_ANC_Na2CO3</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">Pi_CO3_Na2CO3</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">Pi_ANC_NaHCO3</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">Pi_CO3_NaHCO3</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">Pi_ANC_NaOH</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">Pi_CO3_NaOH</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">C_Na2CO3</span> <span class="o">=</span> <span class="n">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_ANC_Na2CO3</span><span class="p">,</span><span class="n">Pi_CO3_Na2CO3</span><span class="p">,</span><span class="n">pH_target</span><span class="p">)</span>

<span class="n">C_NaHCO3</span> <span class="o">=</span> <span class="n">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_ANC_NaHCO3</span><span class="p">,</span><span class="n">Pi_CO3_NaHCO3</span><span class="p">,</span><span class="n">pH_target</span><span class="p">)</span>
<span class="n">C_NaOH</span> <span class="o">=</span> <span class="n">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_ANC_NaOH</span><span class="p">,</span><span class="n">Pi_CO3_NaOH</span><span class="p">,</span><span class="n">pH_target</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;Display results in a pandas table&quot;&quot;&quot;</span>
<span class="n">base</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;NaOH&quot;</span><span class="p">,</span><span class="s2">&quot;NaHCO3&quot;</span><span class="p">,</span><span class="s2">&quot;Na2CO3&quot;</span><span class="p">]</span>
<span class="n">myindex</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;[mmoles/L]&quot;</span><span class="p">,</span><span class="s2">&quot;[mg/L]&quot;</span><span class="p">]</span>
<span class="n">row1</span> <span class="o">=</span> <span class="p">[</span><span class="n">C_Na2CO3</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span><span class="n">C_NaHCO3</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span><span class="n">C_NaOH</span><span class="o">.</span><span class="n">magnitude</span><span class="p">]</span>
<span class="n">row2</span> <span class="o">=</span> <span class="p">[(</span><span class="n">C_Na2CO3</span><span class="o">*</span><span class="n">m_Na2CO3</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,(</span><span class="n">C_NaHCO3</span><span class="o">*</span><span class="n">m_NaHCO3</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,(</span><span class="n">C_NaOH</span><span class="o">*</span><span class="n">m_NaOH</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">row1</span><span class="p">,</span><span class="n">row2</span><span class="p">],</span><span class="n">index</span><span class="o">=</span><span class="n">myindex</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">base</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

<span class="sd">&quot;&quot;&quot;Graph the base concentration required as a function of the target pH&quot;&quot;&quot;</span>
<span class="n">pH_graph</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span>
<span class="n">C_Na2CO3</span> <span class="o">=</span> <span class="n">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_ANC_Na2CO3</span><span class="p">,</span><span class="n">Pi_CO3_Na2CO3</span><span class="p">,</span><span class="n">pH_graph</span><span class="p">)</span>
<span class="n">C_NaHCO3</span> <span class="o">=</span> <span class="n">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_ANC_NaHCO3</span><span class="p">,</span><span class="n">Pi_CO3_NaHCO3</span><span class="p">,</span><span class="n">pH_graph</span><span class="p">)</span>
<span class="n">C_NaOH</span> <span class="o">=</span> <span class="n">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_ANC_NaOH</span><span class="p">,</span><span class="n">Pi_CO3_NaOH</span><span class="p">,</span><span class="n">pH_graph</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pH_graph</span><span class="p">,</span><span class="n">C_NaHCO3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pH_graph</span><span class="p">,</span><span class="n">C_Na2CO3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pH_graph</span><span class="p">,</span><span class="n">C_NaOH</span><span class="p">)</span>
<span class="n">imagepath</span> <span class="o">=</span> <span class="s1">&#39;Rapid_Mix/Images/&#39;</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;pH target&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Base concentration (mmole/L)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;sodium bicarbonate&quot;</span><span class="p">,</span><span class="s2">&quot;sodium carbonate&quot;</span><span class="p">,</span><span class="s2">&quot;sodium hydroxide&quot;</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">imagepath</span><span class="o">+</span><span class="s1">&#39;mole_base_for_target_pH&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pH_graph</span><span class="p">,(</span><span class="n">C_Na2CO3</span><span class="o">*</span><span class="n">m_Na2CO3</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pH_graph</span><span class="p">,(</span><span class="n">C_NaOH</span><span class="o">*</span><span class="n">m_NaOH</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;pH target&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Base concentration (mg/L)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;sodium carbonate&quot;</span><span class="p">,</span><span class="s2">&quot;sodium hydroxide&quot;</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">imagepath</span><span class="o">+</span><span class="s1">&#39;mg_base_for_target_pH&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>The analysis reveals that the choice of base matters. The most efficient (on a mass or mole basis) base is <span class="math notranslate nohighlight">\(NaOH\)</span> because it doesn’t add any carbonates that don’t fully react with the hydrogen ions. The decision about which base to use will be influenced by economics, operator safety, and by whether additional carbonate buffering simplifies plant operation with changing raw water quality.</p>
<span id="table-calcium-bases"></span><table border="1" class="colwidths-given docutils" id="id5">
<caption><span class="caption-number">Table 13 </span><span class="caption-text">Calcium base.</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Chemical name</th>
<th class="head">common name</th>
<th class="head">Chemcal formula</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>calcium carbonate</td>
<td>limestone or chalk</td>
<td><span class="math notranslate nohighlight">\(CaCO_3\)</span></td>
</tr>
<tr class="row-odd"><td>calcium hydroxide</td>
<td>slaked lime or hydrated lime</td>
<td><span class="math notranslate nohighlight">\(Ca(OH)_2\)</span></td>
</tr>
<tr class="row-even"><td>calcium oxide</td>
<td>quicklime</td>
<td><span class="math notranslate nohighlight">\(CaO\)</span></td>
</tr>
</tbody>
</table>
<p>The calcium bases are relatively inexpensive and have the disadvantage of lower solubility than sodium bases. Calcium carbonate has a low solubility, carbon dioxide is present in the atmosphere, and thus calcium carbonate precipitation limits the concentration that can be used for chemical feeds.</p>
<div class="figure align-center" id="id6">
<span id="figure-mole-base-for-target-ph"></span><a class="reference internal image-reference" href="../_images/mole_base_for_target_pH.png"><img alt="mole base for target pH" src="../_images/mole_base_for_target_pH.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 54 </span><span class="caption-text">Dose of three bases (in mole/L) required to achieve a target pH for the Manzaragua water. Carbonates provide more buffering and less change in the pH compared with <span class="math notranslate nohighlight">\(NaOH\)</span>.</span></p>
</div>
<div class="figure align-center" id="id7">
<span id="figure-mg-base-for-target-ph"></span><a class="reference internal image-reference" href="../_images/mg_base_for_target_pH.png"><img alt="mg base for target pH" src="../_images/mg_base_for_target_pH.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 55 </span><span class="caption-text">Dose of two bases (in mg/L) required to achieve a target pH for the Manzaragua water. Carbonates provide more buffering and less change in the pH compared with <span class="math notranslate nohighlight">\(NaOH\)</span>.</span></p>
</div>
<p>The required dose for each of the bases is summarized below.</p>
<span id="table-base-table"></span><table border="1" class="colwidths-given docutils" id="id8">
<caption><span class="caption-number">Table 14 </span><span class="caption-text">Dose of each base required to change the pH of the Manzaragua water to 7.</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">units</th>
<th class="head"><span class="math notranslate nohighlight">\(NaOH\)</span></th>
<th class="head"><span class="math notranslate nohighlight">\(NaHCO_3\)</span></th>
<th class="head"><span class="math notranslate nohighlight">\(Na_2CO_3\)</span></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>[mmoles/L]</td>
<td>0.45</td>
<td>2.8</td>
<td>0.53</td>
</tr>
<tr class="row-odd"><td>[mg/L]</td>
<td>47.21</td>
<td>235.0</td>
<td>21.19</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="RM_Theory_and_Future_Work.html" class="btn btn-neutral float-right" title="Rapid Mix Theory and Future Work" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="RM_Derivations.html" class="btn btn-neutral" title="Rapid Mix Derivations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, AguaClara Cornell.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/mathjax_config.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>