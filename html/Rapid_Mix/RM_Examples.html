

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Rapid Mix Appendix C: Examples &mdash; AguaClara Textbook  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Rapid Mix Theory and Future Work" href="RM_Theory_and_Future_Work.html" />
    <link rel="prev" title="Rapid Mix Derivations" href="RM_Derivations.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> AguaClara Textbook
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Acknowledgements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Authors.html">Authors</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 1: Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Introduction.html">Introduction to AguaClara Water Treatment Design</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 2: Review: Fluid Mechanics and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Review/Review_Fluid_Mechanics.html">Review: Fluid Mechanics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Review/Review_Fluid_Mechanics_Derivations.html">Review: Fluid Mechanics Derivations</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 3: Flow Control and Measurement</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Intro.html">Flow Control and Measurement Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Design.html">Flow Control and Measurement Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Derivations.html">Flow Control and Measurement Derivations</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 4: Rapid Mix</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="RM_Intro.html">Rapid Mix Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="RM_Design.html">Rapid Mix Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="RM_Derivations.html">Rapid Mix Derivations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Rapid Mix Appendix C: Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example-ph-adjustment">Example: pH Adjustment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lfom-and-coagulant-injection-sizing">LFOM and coagulant injection sizing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-problem-energy-dissipation-rate-in-a-straight-pipe">Example problem: Energy dissipation rate in a straight pipe</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="RM_Theory_and_Future_Work.html">Rapid Mix Theory and Future Work</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 5: Flocculation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Intro.html">Flocculation Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Model.html">Flocculation Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Design.html">Flocculation Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Derivations.html">Flocculation Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Theory_and_Future_Work.html">Flocculation Theory and Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Examples.html">Flocculation Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 6: Sedimentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Intro.html">Sedimentation Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Design.html">Sedimentation Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Examples.html">Sedimentation Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Theory_and_Future_Work.html">Sedimentation Theory and Future Work</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 7: Filtration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Filtration/Filtration_Intro.html">Filtration  Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Filtration/Filtration_Design.html">Filtration Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Filtration/Filtration_Derivations.html">Filtration Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Filtration/Filtration_Theory_and_Future_Work.html">Filtration Theory and Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Filtration/EStaRS_Design.html">EStaRS Design</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 8: Dissolved Gas</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Dissolved_Gas/DG_Intro.html">Dissolved Gas Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 9: Fluoride</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Fluoride/Fluoride_Intro.html">Fluoride Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 10: Wastewater</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../WasteWater/WW_Theory_and_Future_Work.html">WasteWater Theory and Future Work</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 11: Troubleshooting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/Troubleshooting.html">Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/Troubleshooting.html#solutions">Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/Troubleshooting.html#proposed-solutions-to-eliminate-iron-oxidizing-slime-bacteria">Proposed solutions to eliminate iron oxidizing slime bacteria</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributor's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/rst_intro.html">Introduction to RST and Sphinx for Textbook Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/example_aguaclara_rst.html">Functionality in RST and AguaClara Convention</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/parameter_convention_list.html">Parameter Convention List</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AguaClara Textbook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Rapid Mix Appendix C: Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Rapid_Mix/RM_Examples.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rapid-mix-appendix-c-examples">
<span id="title-rapid-mix-examples"></span><h1>Rapid Mix Appendix C: Examples<a class="headerlink" href="#rapid-mix-appendix-c-examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="example-ph-adjustment">
<span id="heading-example-ph-adjustment"></span><h2>Example: pH Adjustment<a class="headerlink" href="#example-ph-adjustment" title="Permalink to this headline">¶</a></h2>
<p>Find the required dose of several bases to raise the pH at the Manzaragua Water Treatment Plant
The Mazaragua AguaClara plant consists of two 1 L/s plants operating in parallel. The plant is located in the municipality of Guinope, the department of El Paraiso, Honduras.</p>
<div class="figure align-center" id="id1">
<span id="manzaragua-wtp"></span><a class="reference internal image-reference" href="../_images/Manzaragua_WTP.jpg"><img alt="Manzaragua WTP" src="../_images/Manzaragua_WTP.jpg" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 59 </span><span class="caption-text">Manzaragua water treatment plant using two of the AguaClara 1 L/s plants in parallel.</span></p>
</div>
<p>The plant performed very poorly from the first day of operation. The first attempted fix was to double the flocculator residence time by increasing the number of flocculator pipes (3 inch diameter by 1.5 m long) from 12 to 24. This improved performance, but the plant continued to perform poorly. A raw water sample was analyzed on May 30, 2018 and the following results were obtained.</p>
<div class="figure align-center" id="id2">
<span id="figure-manzaragua-water-analysis"></span><a class="reference internal image-reference" href="../_images/Manzaragua_Water_Analysis.jpg"><img alt="Manzaragua Water Analysis" src="../_images/Manzaragua_Water_Analysis.jpg" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 60 </span><span class="caption-text">Water quality analysis for Manzaragua.</span></p>
</div>
<span id="table-manzaragua-water-quality-analysis"></span><table border="1" class="colwidths-given docutils align-center" id="id3">
<caption><span class="caption-number">Table 10 </span><span class="caption-text">Manzaragua water quality analysis</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Units</th>
<th class="head">Standard</th>
<th class="head">Results</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Turbidity</td>
<td>NTU</td>
<td>5</td>
<td>71</td>
</tr>
<tr class="row-odd"><td>Color</td>
<td>color units</td>
<td>15</td>
<td>150</td>
</tr>
<tr class="row-even"><td>pH</td>
<td>pH</td>
<td>6.5 - 8.5</td>
<td>5.91</td>
</tr>
<tr class="row-odd"><td>Conductivity</td>
<td><span class="math notranslate nohighlight">\(\mu s/cm\)</span></td>
<td>400</td>
<td>69.15</td>
</tr>
<tr class="row-even"><td>Alkalinity</td>
<td><span class="math notranslate nohighlight">\(mg/L\)</span> as <span class="math notranslate nohighlight">\(CaCO_3\)</span></td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>24.5</td>
</tr>
<tr class="row-odd"><td>Bicarbonates</td>
<td><span class="math notranslate nohighlight">\(mg/L\)</span> as <span class="math notranslate nohighlight">\(CaCO_3\)</span></td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>24.5</td>
</tr>
<tr class="row-even"><td>Carbonates</td>
<td><span class="math notranslate nohighlight">\(mg/L\)</span> as <span class="math notranslate nohighlight">\(CaCO_3\)</span></td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>Hardness</td>
<td><span class="math notranslate nohighlight">\(mg/L\)</span> as <span class="math notranslate nohighlight">\(CaCO_3\)</span></td>
<td>400</td>
<td>15.68</td>
</tr>
</tbody>
</table>
<p>This water has high color which suggests a high concentration of dissolved organic matter. The pH is a clear problem because the pH is too low for the coagulant nanoparticles to precipitate. As the water sample pH of 5.91 a significant fraction of the coagulant will remain soluble.</p>
<p>Our goal is to determine how much base will need to be added to raise the pH. We do not have data on the <em>optimal</em> pH for treating high color water with PACl and so we will use pH 7 as the target.</p>
<p>At circumneutral pH (pH close to 7) the buffering capacity of the water is dominated by carbonate chemistry and specifically by the equilibrium between <span class="math notranslate nohighlight">\({H_2}CO_3^{\star}\)</span> and <span class="math notranslate nohighlight">\(HCO_3^-\)</span> . We will use the acid neutralizing capacity (reported as calcium carbonate alkalinity) and the pH from the sample analysis to estimate the total concentration of carbonates. We will not use the sample analysis carbonate concentrations because they can not be precisely correct.</p>
<p>We will find the amount of base that must be added using <a class="reference internal" href="RM_Derivations.html#equation-base-for-ph-adjust">(156)</a>.</p>
<span id="table-anc-and-carbonate-values-for-several-bases-and-acids"></span><table border="1" class="colwidths-given docutils align-center" id="id4">
<caption><span class="caption-number">Table 11 </span><span class="caption-text">ANC and carbonate values for several bases and acids</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Base/Acid</th>
<th class="head"><span class="math notranslate nohighlight">\(Pi_{ANC}\)</span></th>
<th class="head"><span class="math notranslate nohighlight">\(Pi_{CO_3^{-2}}\)</span></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="math notranslate nohighlight">\(Na_2CO_3\)</span> or <span class="math notranslate nohighlight">\(CaCO_3\)</span></td>
<td>2</td>
<td>1</td>
</tr>
<tr class="row-odd"><td><span class="math notranslate nohighlight">\(NaHCO_3\)</span></td>
<td>1</td>
<td>1</td>
</tr>
<tr class="row-even"><td><span class="math notranslate nohighlight">\(NaOH\)</span></td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-odd"><td><span class="math notranslate nohighlight">\(HCl\)</span> or <span class="math notranslate nohighlight">\(HNO_3\)</span></td>
<td>-1</td>
<td>0</td>
</tr>
<tr class="row-even"><td><span class="math notranslate nohighlight">\(H_2SO_4\)</span></td>
<td>-2</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>For <span class="math notranslate nohighlight">\(Na_2CO_3\)</span> * <span class="math notranslate nohighlight">\(\Pi_{ANC}\)</span> = 2 because we are adding
<span class="math notranslate nohighlight">\(CO_3^{-2}\)</span> which is multiplied by two in the ANC equation because
<span class="math notranslate nohighlight">\(CO_3^{-2}\)</span> can react with two protons. * <span class="math notranslate nohighlight">\(\Pi_{CO_3^{-2}}\)</span>
= 1 because there is one mole of <span class="math notranslate nohighlight">\(CO_3\)</span> per mole of
<span class="math notranslate nohighlight">\(Na_2CO_3\)</span></p>
<p>Below is the code used to calculate the required base addition.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aide_design.play</span> <span class="k">import</span><span class="o">*</span>
<span class="kn">from</span> <span class="nn">aguaclara_research.play</span> <span class="k">import</span><span class="o">*</span>
<span class="kn">import</span> <span class="nn">aguaclara_research.Environmental_Processes_Analysis</span> <span class="k">as</span> <span class="nn">epa</span>

<span class="sd">&quot;&quot;&quot;define molecular weights&quot;&quot;&quot;</span>
<span class="n">m_Ca</span> <span class="o">=</span> <span class="mf">40.078</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">g</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">mol</span>
<span class="n">m_C</span> <span class="o">=</span> <span class="mf">12.011</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">g</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">mol</span>
<span class="n">m_O</span> <span class="o">=</span> <span class="mf">15.999</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">g</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">mol</span>
<span class="n">m_Na</span> <span class="o">=</span> <span class="mf">22.99</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">g</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">mol</span>
<span class="n">m_H</span> <span class="o">=</span> <span class="mf">1.008</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">g</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">mol</span>
<span class="n">m_CaCO3</span> <span class="o">=</span> <span class="n">m_Ca</span><span class="o">+</span><span class="n">m_C</span><span class="o">+</span><span class="mi">3</span><span class="o">*</span><span class="n">m_O</span>
<span class="n">m_Na2CO3</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">m_Na</span><span class="o">+</span><span class="n">m_C</span><span class="o">+</span><span class="mi">3</span><span class="o">*</span><span class="n">m_O</span>
<span class="n">m_NaHCO3</span> <span class="o">=</span> <span class="n">m_Na</span><span class="o">+</span><span class="n">m_H</span><span class="o">+</span><span class="n">m_C</span><span class="o">+</span><span class="mi">3</span><span class="o">*</span><span class="n">m_O</span>
<span class="n">m_NaOH</span> <span class="o">=</span> <span class="n">m_Na</span><span class="o">+</span><span class="n">m_O</span><span class="o">+</span><span class="n">m_H</span>

<span class="sd">&quot;&quot;&quot;Raw water characteristics&quot;&quot;&quot;</span>
<span class="n">pH_0</span> <span class="o">=</span> <span class="mf">5.91</span>
<span class="n">ANC_0</span> <span class="o">=</span> <span class="p">(</span><span class="mf">24.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="o">/</span><span class="n">m_CaCO3</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mmol</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">)</span>
<span class="n">ANC_0</span>

<span class="k">def</span> <span class="nf">total_carbonates_closed</span><span class="p">(</span><span class="n">pH</span><span class="p">,</span> <span class="n">ANC</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function calculates total carbonates for a closed system given pH and ANC</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    pH : float</span>
<span class="sd">        pH of the sample</span>
<span class="sd">    ANC: float</span>
<span class="sd">        acid neutralizing capacity of the sample</span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    The total carbonates of the sample</span>
<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; total_carbonates_closed(1*u.mmol/u.L,8)</span>
<span class="sd">    1.017 mole/liter</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">ANC</span> <span class="o">-</span> <span class="n">epa</span><span class="o">.</span><span class="n">Kw</span><span class="o">/</span><span class="n">epa</span><span class="o">.</span><span class="n">invpH</span><span class="p">(</span><span class="n">pH</span><span class="p">)</span> <span class="o">+</span> <span class="n">epa</span><span class="o">.</span><span class="n">invpH</span><span class="p">(</span><span class="n">pH</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">epa</span><span class="o">.</span><span class="n">alpha1_carbonate</span><span class="p">(</span><span class="n">pH</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">epa</span><span class="o">.</span><span class="n">alpha2_carbonate</span><span class="p">(</span><span class="n">pH</span><span class="p">))</span>


<span class="n">CT_0</span> <span class="o">=</span> <span class="n">total_carbonates_closed</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">)</span>


<span class="sd">&quot;&quot;&quot; calculate the amount of base that must be added to reach a target pH&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_base</span><span class="p">,</span><span class="n">Pi_CO3</span><span class="p">,</span><span class="n">Pi_Al</span><span class="p">,</span><span class="n">C_Al</span><span class="p">,</span><span class="n">pH_target</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;This function calculates the required base (or acid) to adjust the pH to a target value. The buffering capacity is assumed to be completely due to carbonate species. The initial carbonate concentration is calculated based on the initial pH and the initial ANC.</span>

<span class="sd">  Parameters</span>
<span class="sd">  ----------</span>
<span class="sd">  pH_0: float</span>
<span class="sd">      pH of the sample</span>
<span class="sd">  ANC_0: float</span>
<span class="sd">      acid neutralizing capacity (Alkalinity) of the sample in eq/L.</span>
<span class="sd">  Pi_base: float</span>
<span class="sd">    equivalents of ANC per mole of base (or acid)</span>
<span class="sd">  Pi_CO3: float</span>
<span class="sd">    mole of carbonate per mole of base (or acid)</span>
<span class="sd">  Pi_Al : float</span>
<span class="sd">    equivalents of ANC per mole of aluminum coagulant</span>
<span class="sd">  C_Al</span>
<span class="sd">    concentration of aluminum coagulant in moles/L</span>
<span class="sd">  pH_target: float</span>
<span class="sd">    pH goal</span>
<span class="sd">  Returns</span>
<span class="sd">  -------</span>
<span class="sd">  The required concentration of base (or acid) in millimoles/L</span>
<span class="sd">  Examples</span>
<span class="sd">  --------</span>
<span class="sd">  &gt;&gt;&gt; pH_adjust(5.91,0.2*u.mmol/u.L,1,1,0,0,7)</span>
<span class="sd">  2.2892822041250924 millimole/liter</span>
<span class="sd">  &gt;&gt;&gt; pH_adjust(7,0.2*u.mmol/u.L,1,1,0,0,0,0,7)</span>
<span class="sd">  0.0 millimole/liter</span>
<span class="sd">  &gt;&gt;&gt; pH_adjust(7,0*u.mmol/u.L,1,0,-3,1*u.mmol/u.L,7)</span>
<span class="sd">  3.0 millimole/liter</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">CT_0</span> <span class="o">=</span> <span class="n">total_carbonates_closed</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">)</span>
  <span class="n">B_num</span> <span class="o">=</span> <span class="n">CT_0</span> <span class="o">*</span> <span class="p">(</span><span class="n">epa</span><span class="o">.</span><span class="n">alpha1_carbonate</span><span class="p">(</span><span class="n">pH_target</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">epa</span><span class="o">.</span><span class="n">alpha2_carbonate</span><span class="p">(</span><span class="n">pH_target</span><span class="p">))</span> <span class="o">+</span> <span class="n">epa</span><span class="o">.</span><span class="n">Kw</span><span class="o">/</span><span class="n">epa</span><span class="o">.</span><span class="n">invpH</span><span class="p">(</span><span class="n">pH_target</span><span class="p">)</span> <span class="o">-</span> <span class="n">epa</span><span class="o">.</span><span class="n">invpH</span><span class="p">(</span><span class="n">pH_target</span><span class="p">)</span> <span class="o">-</span> <span class="n">ANC_0</span> <span class="o">-</span> <span class="n">Pi_Al</span><span class="o">*</span><span class="n">C_Al</span>
  <span class="n">B_den</span> <span class="o">=</span> <span class="n">Pi_base</span> <span class="o">-</span> <span class="n">Pi_CO3</span><span class="o">*</span><span class="p">(</span><span class="n">epa</span><span class="o">.</span><span class="n">alpha1_carbonate</span><span class="p">(</span><span class="n">pH_target</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">epa</span><span class="o">.</span><span class="n">alpha2_carbonate</span><span class="p">(</span><span class="n">pH_target</span><span class="p">))</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">B_num</span><span class="o">/</span><span class="n">B_den</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mmol</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">)</span>


<span class="sd">&quot;&quot;&quot;target pH&quot;&quot;&quot;</span>
<span class="n">pH_target</span> <span class="o">=</span> <span class="mi">7</span>

<span class="n">Pi_base_Na2CO3</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">Pi_CO3_Na2CO3</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">Pi_base_NaHCO3</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">Pi_CO3_NaHCO3</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">Pi_base_NaOH</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">Pi_CO3_NaOH</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">C_Na2CO3</span> <span class="o">=</span> <span class="n">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_base_Na2CO3</span><span class="p">,</span><span class="n">Pi_CO3_Na2CO3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">pH_target</span><span class="p">)</span>

<span class="n">C_NaHCO3</span> <span class="o">=</span> <span class="n">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_base_NaHCO3</span><span class="p">,</span><span class="n">Pi_CO3_NaHCO3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">pH_target</span><span class="p">)</span>
<span class="n">C_NaOH</span> <span class="o">=</span> <span class="n">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_base_NaOH</span><span class="p">,</span><span class="n">Pi_CO3_NaOH</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">pH_target</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;Display results in a pandas table&quot;&quot;&quot;</span>
<span class="n">base</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;NaOH&quot;</span><span class="p">,</span><span class="s2">&quot;NaHCO3&quot;</span><span class="p">,</span><span class="s2">&quot;Na2CO3&quot;</span><span class="p">]</span>
<span class="n">myindex</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;[mmoles/L]&quot;</span><span class="p">,</span><span class="s2">&quot;[mg/L]&quot;</span><span class="p">]</span>
<span class="n">row1</span> <span class="o">=</span> <span class="p">[</span><span class="n">C_Na2CO3</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span><span class="n">C_NaHCO3</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span><span class="n">C_NaOH</span><span class="o">.</span><span class="n">magnitude</span><span class="p">]</span>
<span class="n">row2</span> <span class="o">=</span> <span class="p">[(</span><span class="n">C_Na2CO3</span><span class="o">*</span><span class="n">m_Na2CO3</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,(</span><span class="n">C_NaHCO3</span><span class="o">*</span><span class="n">m_NaHCO3</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,(</span><span class="n">C_NaOH</span><span class="o">*</span><span class="n">m_NaOH</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">row1</span><span class="p">,</span><span class="n">row2</span><span class="p">],</span><span class="n">index</span><span class="o">=</span><span class="n">myindex</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">base</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

<span class="sd">&quot;&quot;&quot;Graph the base concentration required as a function of the target pH&quot;&quot;&quot;</span>
<span class="n">pH_graph</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span>
<span class="n">C_Na2CO3</span> <span class="o">=</span> <span class="n">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_base_Na2CO3</span><span class="p">,</span><span class="n">Pi_CO3_Na2CO3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">pH_graph</span><span class="p">)</span>
<span class="n">C_NaHCO3</span> <span class="o">=</span> <span class="n">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_base_NaHCO3</span><span class="p">,</span><span class="n">Pi_CO3_NaHCO3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">pH_graph</span><span class="p">)</span>
<span class="n">C_NaOH</span> <span class="o">=</span> <span class="n">pH_adjust</span><span class="p">(</span><span class="n">pH_0</span><span class="p">,</span><span class="n">ANC_0</span><span class="p">,</span><span class="n">Pi_base_NaOH</span><span class="p">,</span><span class="n">Pi_CO3_NaOH</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">pH_graph</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pH_graph</span><span class="p">,</span><span class="n">C_NaHCO3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pH_graph</span><span class="p">,</span><span class="n">C_Na2CO3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pH_graph</span><span class="p">,</span><span class="n">C_NaOH</span><span class="p">)</span>
<span class="n">imagepath</span> <span class="o">=</span> <span class="s1">&#39;Rapid_Mix/Images/&#39;</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;pH target&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Base concentration (mmole/L)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;sodium bicarbonate&quot;</span><span class="p">,</span><span class="s2">&quot;sodium carbonate&quot;</span><span class="p">,</span><span class="s2">&quot;sodium hydroxide&quot;</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">imagepath</span><span class="o">+</span><span class="s1">&#39;mole_base_for_target_pH&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pH_graph</span><span class="p">,(</span><span class="n">C_Na2CO3</span><span class="o">*</span><span class="n">m_Na2CO3</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pH_graph</span><span class="p">,(</span><span class="n">C_NaOH</span><span class="o">*</span><span class="n">m_NaOH</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;pH target&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Base concentration (mg/L)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;sodium carbonate&quot;</span><span class="p">,</span><span class="s2">&quot;sodium hydroxide&quot;</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">imagepath</span><span class="o">+</span><span class="s1">&#39;mg_base_for_target_pH&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>The analysis reveals that the choice of base matters. The most efficient (on a mass or mole basis) base is <span class="math notranslate nohighlight">\(NaOH\)</span> because it doesn’t add any carbonates that don’t fully react with the hydrogen ions. The decision about which base to use will be influenced by economics, operator safety, and by whether additional carbonate buffering simplifies plant operation with changing raw water quality.</p>
<span id="table-calcium-bases"></span><table border="1" class="colwidths-given docutils" id="id5">
<caption><span class="caption-number">Table 12 </span><span class="caption-text">Calcium base.</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Chemical name</th>
<th class="head">common name</th>
<th class="head">Chemcal formula</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>calcium carbonate</td>
<td>limestone or chalk</td>
<td><span class="math notranslate nohighlight">\(CaCO_3\)</span></td>
</tr>
<tr class="row-odd"><td>calcium hydroxide</td>
<td>slaked lime or hydrated lime</td>
<td><span class="math notranslate nohighlight">\(Ca(OH)_2\)</span></td>
</tr>
<tr class="row-even"><td>calcium oxide</td>
<td>quicklime</td>
<td><span class="math notranslate nohighlight">\(CaO\)</span></td>
</tr>
</tbody>
</table>
<p>The calcium bases are relatively inexpensive and have the disadvantage of lower solubility than sodium bases. Calcium carbonate has a low solubility, carbon dioxide is present in the atmosphere, and thus calcium carbonate precipitation limits the concentration that can be used for chemical feeds.</p>
<div class="figure align-center" id="id6">
<span id="figure-mole-base-for-target-ph"></span><a class="reference internal image-reference" href="../_images/mole_base_for_target_pH.png"><img alt="mole base for target pH" src="../_images/mole_base_for_target_pH.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 61 </span><span class="caption-text">Dose of three bases (in mole/L) required to achieve a target pH for the Manzaragua water. Carbonates provide more buffering and less change in the pH compared with <span class="math notranslate nohighlight">\(NaOH\)</span>.</span></p>
</div>
<div class="figure align-center" id="id7">
<span id="figure-mg-base-for-target-ph"></span><a class="reference internal image-reference" href="../_images/mg_base_for_target_pH.png"><img alt="mg base for target pH" src="../_images/mg_base_for_target_pH.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 62 </span><span class="caption-text">Dose of two bases (in mg/L) required to achieve a target pH for the Manzaragua water. Carbonates provide more buffering and less change in the pH compared with <span class="math notranslate nohighlight">\(NaOH\)</span>.</span></p>
</div>
<p>The required dose for each of the bases is summarized below.</p>
<span id="table-base-table"></span><table border="1" class="colwidths-given docutils" id="id8">
<caption><span class="caption-number">Table 13 </span><span class="caption-text">Dose of each base required to change the pH of the Manzaragua water to 7.</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">units</th>
<th class="head"><span class="math notranslate nohighlight">\(NaOH\)</span></th>
<th class="head"><span class="math notranslate nohighlight">\(NaHCO_3\)</span></th>
<th class="head"><span class="math notranslate nohighlight">\(Na_2CO_3\)</span></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>[mmoles/L]</td>
<td>0.45</td>
<td>2.8</td>
<td>0.53</td>
</tr>
<tr class="row-odd"><td>[mg/L]</td>
<td>47.21</td>
<td>235.0</td>
<td>21.19</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="lfom-and-coagulant-injection-sizing">
<span id="heading-lfom-and-coag-injection-sizing"></span><h2>LFOM and coagulant injection sizing<a class="headerlink" href="#lfom-and-coagulant-injection-sizing" title="Permalink to this headline">¶</a></h2>
<p>A water treatment plant that is treating 120 L/s of water injects the coagulant into the middle of the pipe that delivers the raw water to the plant and then splits the flow into 2 parallel treatment trains for subsequent flocculation. The pipe is PVC 24 inch nominal pipe diameter SDR 26. The water temperature is <span class="math notranslate nohighlight">\(0^{\circ}C\)</span>. Estimate the minimum distance between the injection point and the flow split.</p>
<p>We will use a <a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Design.html#heading-lfom"><span class="std std-ref">linear flow orifice meter</span></a> with 20 cm of head loss. The first step is to determine the diameter of the LFOM.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot; importing &quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">aide_design.play</span> <span class="k">import</span><span class="o">*</span>
<span class="kn">from</span> <span class="nn">aguaclara_research.play</span> <span class="k">import</span><span class="o">*</span>
<span class="kn">import</span> <span class="nn">aguaclara_research.floc_model</span> <span class="k">as</span> <span class="nn">fm</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="k">import</span> <span class="n">FormatStrFormatter</span>
<span class="n">imagepath</span> <span class="o">=</span> <span class="s1">&#39;AguaClara Water Treatment Plant Design/Rapid Mix/Images/&#39;</span>

<span class="n">Q_plant</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span>
<span class="n">HL_LFOM</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">cm</span>
<span class="n">Pi_LFOM_safety</span> <span class="o">=</span> <span class="mf">1.2</span>
<span class="n">SDR_LFOM</span> <span class="o">=</span> <span class="mi">26</span>
<span class="kn">from</span> <span class="nn">aide_design.unit_process_design</span> <span class="k">import</span> <span class="n">lfom</span> <span class="k">as</span> <span class="n">lfom</span>
<span class="n">ND_LFOM</span> <span class="o">=</span> <span class="n">lfom</span><span class="o">.</span><span class="n">nom_diam_lfom_pipe</span><span class="p">(</span><span class="n">Q_plant</span><span class="p">,</span><span class="n">HL_LFOM</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ND_LFOM</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span><span class="n">ND_LFOM</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">cm</span><span class="p">),</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>

<span class="n">L_flow</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">ID_SDR</span><span class="p">(</span><span class="n">ND_LFOM</span><span class="p">,</span><span class="n">SDR_LFOM</span><span class="p">)</span>
<span class="n">L_flow</span>
</pre></div>
</div>
<p>The LFOM requires a 24 inch diameter pipe.</p>
</div>
<div class="section" id="example-problem-energy-dissipation-rate-in-a-straight-pipe">
<h2>Example problem: Energy dissipation rate in a straight pipe<a class="headerlink" href="#example-problem-energy-dissipation-rate-in-a-straight-pipe" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Solution scheme</dt>
<dd>1) Calculate the friction factor
1) Use <code class="xref eq docutils literal notranslate"><span class="pre">mixing_pipe_diameters</span></code> to estimate the mixing length in pipe diameters
1) Convert to pipe length in meters.</dd>
</dl>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aide_design.play</span> <span class="k">import</span><span class="o">*</span>
<span class="n">T_water</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">degC</span>
<span class="n">Pipe_roughness</span> <span class="o">=</span> <span class="n">mat</span><span class="o">.</span><span class="n">PIPE_ROUGH_PVC</span>
<span class="n">Pipe_roughness</span>
<span class="n">Nu_water</span> <span class="o">=</span> <span class="n">pc</span><span class="o">.</span><span class="n">viscosity_kinematic</span><span class="p">(</span><span class="n">T_water</span><span class="p">)</span>
<span class="n">Q_pipe</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span>
<span class="n">ND_pipe</span> <span class="o">=</span> <span class="mi">24</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">inch</span>
<span class="n">SDR_pipe</span> <span class="o">=</span> <span class="mi">26</span>
<span class="n">ID_pipe</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">ID_SDR</span><span class="p">(</span><span class="n">ND_pipe</span><span class="p">,</span><span class="n">SDR_pipe</span><span class="p">)</span>
<span class="n">f_pipe</span> <span class="o">=</span> <span class="n">pc</span><span class="o">.</span><span class="n">fric</span><span class="p">(</span><span class="n">Q_pipe</span><span class="p">,</span><span class="n">ID_pipe</span><span class="p">,</span><span class="n">Nu_water</span><span class="p">,</span><span class="n">Pipe_roughness</span><span class="p">)</span>
<span class="n">N_pipe_diameters</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="n">f_pipe</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
<span class="n">N_pipe_diameters</span>
<span class="sd">&quot;&quot;&quot;The minimum length for mixing is thus&quot;&quot;&quot;</span>
<span class="n">L_mixing</span> <span class="o">=</span> <span class="n">ID_pipe</span><span class="o">*</span><span class="n">N_pipe_diameters</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The minimum distance required for mixing across the diameter of the pipe is &#39;</span><span class="p">,</span><span class="n">L_mixing</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">())</span>
<span class="n">v_lfom</span> <span class="o">=</span> <span class="p">(</span><span class="n">Q_plant</span><span class="o">/</span><span class="n">pc</span><span class="o">.</span><span class="n">area_circle</span><span class="p">(</span><span class="n">pipe</span><span class="o">.</span><span class="n">ID_SDR</span><span class="p">(</span><span class="n">ND_LFOM</span><span class="p">,</span><span class="n">SDR_LFOM</span><span class="p">)))</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v_lfom</span><span class="p">)</span>
<span class="n">t_mixing</span> <span class="o">=</span> <span class="p">(</span><span class="n">L_mixing</span><span class="o">/</span><span class="n">v_lfom</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
<span class="n">t_mixing</span>
</pre></div>
</div>
<p>The previous analysis provides a minimum distance for sufficient mixing so that equal mass flux of coagulant will end up in both treatment trains. This assumes that the coagulant was injected in the pipe centerline. Injection at the wall of the pipe is a poor practice and would require many more pipe diameters because it takes significant time for the coagulant to be mixed out of the slower fluid at the wall. The time required for mixing at the scale of the flow in the plant is thus accomplished in a few seconds. This ends up being the fastest part of the transport of the coagulant nanoparticles on their way to attachment to the clay particles.  Next we will determine a typical flow rate of coagulant. <strong>Aluminum</strong> concentrations for polyaluminum chloride (PACl) typically range from 1 to 10 mg/L. The maximum PACl stock solution concentration is about 70 g/L as <strong>Al</strong>.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C_PACl_stock</span> <span class="o">=</span> <span class="mi">70</span> <span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">g</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span>
<span class="n">C_PACl_dose_max</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span>
<span class="n">Q_PACl_max</span> <span class="o">=</span> <span class="p">(</span><span class="n">Q_plant</span><span class="o">*</span><span class="n">C_PACl_dose_max</span><span class="o">/</span><span class="n">C_PACl_stock</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mL</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Q_PACl_max</span><span class="p">)</span>
</pre></div>
</div>
<p>We can estimate the diameter of the injection port by setting the kinetic energy loss where the coagulant is injected into the main flow to be large enough to exceed the pressure fluctuations downstream of the LFOM. The amount of energy we invest in injecting the coagulant into the raw water is a compromise between having to raise the entire chemical feed system including the stock tanks to increase the potential energy and a goal of not having pressure fluctuations inside the LFOM pipe cause flow oscillations in the chemical dosing tube. Thus our goal is to have the kinetic energy at the injection point be large compared with the expected pressure fluctuations in the LFOM. Given that the head loss through the LFOM is often 20 cm, we expect the pressure fluctuations from turbulence to be a small fraction of that head loss. Thus we set the kinetic energy to be equivalent to 2 cm.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HL_Coag_injection</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">cm</span>
<span class="n">v_Coag_injection</span> <span class="o">=</span> <span class="p">((</span><span class="mi">2</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">gravity</span> <span class="o">*</span> <span class="n">HL_Coag_injection</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">m</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v_Coag_injection</span><span class="p">)</span>
<span class="n">D_Coag_injection_min</span> <span class="o">=</span> <span class="n">pc</span><span class="o">.</span><span class="n">diam_circle</span><span class="p">(</span><span class="n">Q_PACl_max</span><span class="o">/</span><span class="n">v_Coag_injection</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">D_Coag_injection_min</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="RM_Theory_and_Future_Work.html" class="btn btn-neutral float-right" title="Rapid Mix Theory and Future Work" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="RM_Derivations.html" class="btn btn-neutral" title="Rapid Mix Derivations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, AguaClara Cornell.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/mathjax_config.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>