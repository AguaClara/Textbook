

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Python Tutorial &mdash; AguaClara Textbook 223/merge documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script async="async" src="../_static/mathjax_config.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Equation Quick Reference" href="../equations.html" />
    <link rel="prev" title="AguaClara Infrastructure Design Engine" href="../AIDE/AIDE.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AguaClara Textbook
          

          
          </a>

          
            
            
              <div class="version">
                223/merge
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Acknowledgements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Authors.html">Authors</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 1: Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">The Physics of Water Treatment Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="Design_Evolution.html">Design Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="Challenges.html">Challenges</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 2: Fluids and Hydraulics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Fluids_and_Hydraulics/Fluid_Mechanics.html">Fluid Mechanics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fluids_and_Hydraulics/Fluid_Mechanics_Derivations.html">Fluid Mechanics Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fluids_and_Hydraulics/Manifold_Hydraulics.html">Manifold Hydraulics</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 3: Fluid Deformation, Fractals, and Forces</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Fluid_Deformation_and_Energy_Dissipation/FDED_Intro.html">Energy Dissipation Rate, Velocity Gradient, and Mixing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fluid_Deformation_and_Energy_Dissipation/FDED_Derivations.html">Fluid Deformation and Energy Dissipation Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocs_Fractals_and_Forces/FFF_Intro.html">Flocs, Fractals, Forces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocs_Fractals_and_Forces/FFF_Suspensions.html">Fluidized Suspensions</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 4: Chemistry of Water Treatment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Chemistry_of_Water_Treatment/Chemistry_Intro.html">Chemistry of Coagulant Nanoparticles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chemistry_of_Water_Treatment/Chemistry_Derivations.html">Carbonate Reactions, Buffering, and pH</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 5: Flow Control and Measurement</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Intro.html">Constant Head Tanks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Design.html">AguaClara Flow Control and Measurement Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Derivations.html">Flow Control and Measurement Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Solution.html">Flow Control and Measurement Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/ET_Design.html">Entrance Tank Design</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 6: Rapid Mix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Intro.html">Rapid Mix Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Design.html">Rapid Mix Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Examples.html">Rapid Mix: Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Theory_and_Future_Work.html">Rapid Mix Theory and Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Mechanical_Solution.html">Rapid Mix Mechanical Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Design_Solution.html">Rapid Mix Design Solution</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 7: Flocculation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Model.html">AguaClara Hydraulic Flocculation Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Derivations.html">Flocculation Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Design.html">Flocculation Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Design_Challenge.html">Flocculation Design Challenge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Mechanical_Solution.html">Mechanical Flocculator Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Model_Solution.html">Flocculation Model Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Design_Solution.html">Flocculator Design Solution</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 8: Clarification</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Clarification/Clarifier_Intro.html">Clarification Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Clarification/Clarifier_Derivations.html">Clarifier Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Clarification/Clarifier_Design.html">Clarifier Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Clarification/Clarifier_Design_Challenge.html">Clarification Design Challenge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Clarification/Clarifier_Theory_and_Future_Work.html">Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Clarification/Clarifier_Examples.html">Clarification Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 9: Filtration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Filtration/Filtration_Intro.html">Filtration  Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Filtration/Filtration_Design.html">Stacked Rapid Sand Filter Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Filtration/Filtration_Design_Challenge.html">Filtration Design Challenge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Filtration/Filtration_Theory_and_Future_Work.html">Filtration Theory and Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Filtration/Filtration_Design_Solution.html">Filtration Design Solution</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 10: Dissolved Gas</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Dissolved_Gas/DG_Intro.html">Dissolved Gas Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 11: Operation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Operation/Coagulant_Automation.html">Coagulant Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Operation/Troubleshooting.html">Plant Operation Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix 1 + Resources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../AIDE/AIDE.html">AguaClara Infrastructure Design Engine</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#import-statements">Import statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#markdown">Markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transitioning-from-matlab-to-python">Transitioning From Matlab To Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="#arrays-and-units">Arrays and units</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting">Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-problem">Example problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pipe-database">Pipe Database</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../equations.html">Equation Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributor's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/rst_intro.html">Introduction to RST and Sphinx for Textbook Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/example_aguaclara_rst.html">Functionality in RST and AguaClara Convention</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/parameter_convention_list.html">Parameter Convention List</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AguaClara Textbook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Python Tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/Introduction/Python_Tutorial.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <embed>
   <link rel="canonical" href="https://aguaclara.github.io/Textbook/Introduction/Python_Tutorial.html" />
   <script src="https://hypothes.is/embed.js" async></script>
</embed><div class="section" id="python-tutorial">
<span id="title-python-tutorial"></span><h1>Python Tutorial<a class="headerlink" href="#python-tutorial" title="Permalink to this headline">¶</a></h1>
<span id="table-code-resources"></span><table class="docutils align-left" id="id1">
<caption><span class="caption-number">Table 23 </span><span class="caption-text">Code resources.</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Description</p></th>
<th class="head"><p>Theme</p></th>
<th class="head"><p>Example function</p></th>
<th class="head"><p>Function call</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="http://docs.python.org/3/library/functions.html">Python functions</a></p></td>
<td><p>low level programming functions</p></td>
<td><p>open a file</p></td>
<td><p>open(file, mode=’r’)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/hgrecco/pint/blob/master/pint/constants_en.txt">Pint universal constants</a></p></td>
<td><p>physical constants with units</p></td>
<td><p>Avogadro’s number</p></td>
<td><p>u.avogadro_number</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/hgrecco/pint/blob/master/pint/default_en.txt">Pint units</a></p></td>
<td><p>units that can be attached to numbers and numpy arrays</p></td>
<td><blockquote>
<div><p>5 m/s</p>
</div></blockquote>
</td>
<td><p>5* u.mm/u.s</p></td>
</tr>
<tr class="row-odd"><td><p>aguaclara.core. <a class="reference external" href="https://github.com/AguaClara/aguaclara/blob/master/aguaclara/core/physchem.py">physchem</a></p></td>
<td><p>pipeflow, orifices, viscosity of water, weirs, manifolds, Kozeny equation</p></td>
<td><p>total head loss in a straight pipe</p></td>
<td><p>headloss(FlowRate, Diam, Length, Nu, PipeRough, KMinor)</p></td>
</tr>
<tr class="row-even"><td><p>aguaclara.research. <a class="reference external" href="https://github.com/AguaClara/aguaclara/blob/master/aguaclara/research/floc_model.py">floc_model</a></p></td>
<td><p>AguaClara flocculation model, velocity gradients, Kolmogorov length scales</p></td>
<td><p>velocity gradient in a coiled tube</p></td>
<td><p>g_coil(FlowPlant, IDTube, RadiusCoil, Temp)</p></td>
</tr>
<tr class="row-odd"><td><p>aguaclara.research. <a class="reference external" href="https://github.com/AguaClara/aguaclara/blob/master/aguaclara/research/environmental_processes_analysis.py">environmental_processes_analysis</a></p></td>
<td><blockquote>
<div><p>carbonate system, CMFR and advection dispersion reactor analysis</p>
</div></blockquote>
</td>
<td><p>extract data from ProCoDA generated Gran analysis file</p></td>
<td><p>Gran(data_file_path)</p></td>
</tr>
<tr class="row-even"><td><p>aguaclara.research. <a class="reference external" href="https://github.com/AguaClara/aguaclara/blob/master/aguaclara/research/procoda_parser.py">procoda_parser</a></p></td>
<td><p>Extracts data from multiple ProCoDA files based on the state and data column</p></td>
<td><p>extract a column of data from a ProCoDA data file</p></td>
<td><p>column_of_data (data_file_path, start, column)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/">SciPy</a></p></td>
<td><p>computing integrals numerically, solving differential equations, optimization, and sparse matrices</p></td>
<td><p>root finding</p></td>
<td><p>root(func, 0.3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy/user/quickstart.html">NumPy</a></p></td>
<td><p>Array manipulation and math functions</p></td>
<td><p>create an array with linearly spaced elements</p></td>
<td><p>np. <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.linspace.html#numpy.linspace">linspace</a> (start,stop,num)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://matplotlib.org/tutorials/index.html">PyPlot</a></p></td>
<td><p>Graphs!</p></td>
<td><p>Create beautiful graphs</p></td>
<td><p>see below</p></td>
</tr>
</tbody>
</table>
<div class="section" id="import-statements">
<h2>Import statements<a class="headerlink" href="#import-statements" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">aguaclara</span> <span class="kn">as</span> <span class="nn">ac</span>
<span class="kn">from</span> <span class="nn">aguaclara.core.units</span> <span class="kn">import</span> <span class="n">unit_registry</span> <span class="k">as</span> <span class="n">u</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">constants</span><span class="p">,</span> <span class="n">interpolate</span>
</pre></div>
</div>
<p>Hint: If you are typing a function name and want to know what the options are for completing what you are typing, just hit the tab key for a menu of options.</p>
<p>Hint: If you want to see the source code associated with a function, you
can do the following import inspect inspect.getsource(foo)</p>
<p>Where “foo” is the function that you’d like to learn about.</p>
</div>
<div class="section" id="markdown">
<h2>Markdown<a class="headerlink" href="#markdown" title="Permalink to this headline">¶</a></h2>
<p>Markdown allow you to mix code, beautiful Latex equations, nicely formatted text, figures, and tables.</p>
<div class="math notranslate nohighlight" id="equation-introduction-python-tutorial-0">
<span class="eqno">(821)<a class="headerlink" href="#equation-introduction-python-tutorial-0" title="Permalink to this equation">¶</a></span>\[c = \sqrt{a^2 + b^2}\]</div>
<p>Markdown does not handle automatic numbering of equations, figures, and tables.</p>
<p>The Python Kernel remembers all definitions (functions and variables) as they are defined based on execution. Thus if you fail to execute a line of code, the parameters defined in that line won’t be available. Similarly, if you define a parameter and then delete that line of code, that parameter remains defined until you reset all runtimes or restart.</p>
<p>Before submitting a file for others to use, you need to verify that all of the dependencies are defined and that you didn’t accidently delete a definition that is required. You can do this by resetting all runtimes (Runtime menu) and then running all.</p>
</div>
<div class="section" id="transitioning-from-matlab-to-python">
<h2>Transitioning From Matlab To Python<a class="headerlink" href="#transitioning-from-matlab-to-python" title="Permalink to this headline">¶</a></h2>
<p><strong>Indentation</strong> - When writing functions or using statements, Python recognizes code blocks from the way they are indented. A code block is a group of statements that, together, perform a task. A block begins with a header that is followed by one or more statements that are indented with respect to the header. The indentation indicates to the Python interpreter, and to programmers that are reading the code, that the indented statements and the preceding header form a code block.</p>
<p><strong>Suppressing Statements</strong> - Unlike Matlab, you do not need a semi-colon to suppress a statement in Python;</p>
<p><strong>Indexing</strong> - Matlab starts at index 1 whereas Python starts at index 0.</p>
<p><strong>Functions</strong> - In Matlab, functions are written by invoking the keyword “function”, the return parameter(s), the equal to sign, the function name and the input parameters. A function is terminated with “end”.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">average</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
  <span class="k">if</span> <span class="o">~</span><span class="n">isvector</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">error</span><span class="p">(</span><span class="s1">&#39;Input must be a vector&#39;</span><span class="p">)</span> <span class="n">end</span>
    <span class="n">y</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="n">length</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
    <span class="n">end</span>
</pre></div>
</div>
<p>In Python, functions can be written by using the keyword “def”, followed by the function name and then the input parameters in parenthesis followed by a colon. A function is terminated with “return”.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">average</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
  <span class="k">if</span> <span class="o">~</span><span class="n">isvector</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
  <span class="k">raise</span> <span class="n">VocationError</span><span class="p">(</span><span class="s2">&quot;Input must be a vector&quot;</span><span class="p">)</span>
  <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="n">length</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Statements</strong> - for loops and if statements do not require the keyword “end” in Python. The loop header in Matlab varies from that of Python. Check examples below:</p>
<p>Matlab code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="n">H</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
  <span class="k">for</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">s</span>
    <span class="k">for</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">s</span>
    <span class="n">H</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">r</span><span class="o">+</span><span class="n">c</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">end</span>
  <span class="n">end</span>
</pre></div>
</div>
<p><strong>Printing</strong> - Use “print()” in Python instead of “disp” in Matlab.</p>
<p><strong>Helpful Documents</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://numpy.org/doc/stable/user/numpy-for-matlab-users.html">Numpy for Matlab Users</a></p></li>
<li><p><a class="reference external" href="http://stsievert.com/blog/2015/09/01/matlab-to-python/">Stepping from Matlab to Python</a></p></li>
<li><p><a class="reference external" href="https://web.archive.org/web/20200904210558/http://researchcomputing.github.io/meetup_fall_2014/pdfs/fall2014_meetup13_python_matlab.pdf">Python for Matlab Users, UC Boulder</a></p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="units">
<h2>Units<a class="headerlink" href="#units" title="Permalink to this headline">¶</a></h2>
<p>Engineering requires calculations with units. Prior to modern computer languages engineers used paper and pencil, slide rules, calculators, and more recently spreadsheets to do calculations. All of these methods are prone to calculation errors because units aren’t handled as an essential part of each value. Spreadsheets are especially notorious for calculation errors because unit conversions are buried in formulas that are hidden in the cells.</p>
<p>Operations on values with units follow very clear algebraic rules and thus units can be attached to numerical values and carried through math operations. This capability is implemented in Python using <a class="reference external" href="https://pint.readthedocs.io/en/latest/">Pint</a> . The Pint package includes a host of units and prefixes (such as <span class="math notranslate nohighlight">\(\mu\)</span> for <span class="math notranslate nohighlight">\(10^{-6}\)</span>). As you master using Python and Pint you will say goodbye to mindless unit conversions forever!</p>
<p>Environmental engineers historically described surface loading rates for clarifiers using units of gal/min per square foot. How fast is <span class="math notranslate nohighlight">\(\frac{1 gpm}{ft^2}\)</span> in <span class="math notranslate nohighlight">\(\frac{mm}{s}\)</span>?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">V_surface_loading_rate</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">gal</span><span class="o">/</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">min</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">ft</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The surface loading rate is&#39;</span><span class="p">,</span> <span class="n">V_surface_loading_rate</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The surface loading rate is&#39;</span><span class="p">,</span> <span class="n">ac</span><span class="o">.</span><span class="n">round_sig_figs</span><span class="p">(</span><span class="n">V_surface_loading_rate</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>The surface loading rate is 0.6791 millimeter / second</p>
<p>After reducing the number of significant digits to 2 we obtain:
The surface loading rate is 0.68 millimeter / second</p>
<p>How long does it take to stop a car that is initially traveling at 60 mph if the coefficient of friction is 0.5?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v_0</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">mile</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">hr</span>
<span class="n">friction_coefficient</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">deceleration</span> <span class="o">=</span> <span class="n">friction_coefficient</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">standard_gravity</span>
<span class="n">t_deceleration</span> <span class="o">=</span> <span class="n">v_0</span><span class="o">/</span><span class="n">deceleration</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The time to stop the car is&#39;</span><span class="p">,</span><span class="n">t_deceleration</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The time to stop the car is&#39;</span><span class="p">,</span><span class="n">t_deceleration</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">())</span>
</pre></div>
</div>
<p>The time to stop the car is 120 mile / hour / standard_gravity</p>
<p>We add the .to_base_units() directive to force pint to simplify the units.</p>
<p>The time to stop the car is 5.47 second</p>
<p>Many functions written in Python do not yet handle units and thus it is sometimes necessary to remove the units. Examples include graphs (althougth units might be coming to matplotlib), SciPy functions, and the NumPy functions used to populate arrays. For these cases you can strip the units off a number using the .magnitude method. Be careful to make sure you know what the units are before you remove them otherwise you may be confused by the results!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Q</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">gal</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">min</span>
<span class="n">fill_time</span> <span class="o">=</span> <span class="mi">3</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">hr</span>
<span class="n">Volume</span> <span class="o">=</span> <span class="n">Q</span> <span class="o">*</span> <span class="n">fill_time</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The volume is&#39;</span><span class="p">,</span><span class="n">Volume</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The magnitude of the Volume is&#39;</span><span class="p">,</span> <span class="n">Volume</span><span class="o">.</span><span class="n">magnitude</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The units of the flow are&#39;</span><span class="p">,</span> <span class="n">Volume</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>
<span class="c1">#force pint to display in a selected set of Units</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The volume is&#39;</span><span class="p">,</span><span class="n">Volume</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">kL</span><span class="p">))</span>
</pre></div>
</div>
<p>The volume is 15 gallon * hour / minute</p>
<p>The magnitude of the Volume is 15.0</p>
<p>The units of the flow are gallon * hour / minute</p>
<p>The volume is 3.41 kiloliter</p>
<p>It is useful to force pint to display the result in the units of your choice.</p>
</div>
<div class="section" id="arrays-and-units">
<h2>Arrays and units<a class="headerlink" href="#arrays-and-units" title="Permalink to this headline">¶</a></h2>
<p>Use NumPy arrays rather than Python lists to enable math with numbers and units. When creating arrays with units remember that</p>
<blockquote>
<div><ul class="simple">
<li><p>Array elements don’t have units!</p></li>
<li><p>Arrays can have units.</p></li>
</ul>
</div></blockquote>
<p>Therefore always attach units to the array after the array has been created. This means that array elements should be dimensionless and thus arrays must be created using dimensionless values.</p>
<p>We can use NumPy linspace with a simple change to make it dimensionless. Usually linspace has start and stop elements that would logically have units: np.linspace(start, stop, num). But elements can’t have units! We can make the inputs to linspace be dimensionless to create a dimensionless array and then multiplies it by the final value that includes the units to scale the array correctly. For evenly spaced arrays starting at the end of the first space we have either:</p>
<blockquote>
<div><ul class="simple">
<li><p>np.linspace(start/stop, 1, num) * stop</p></li>
<li><p>np.linspace(1 / num, 1, num) * stop</p></li>
</ul>
</div></blockquote>
<p>For evenly spaced arrays starting with zero we have:</p>
<blockquote>
<div><ul class="simple">
<li><p>np.linspace(0, 1, num+1) * stop!</p></li>
</ul>
</div></blockquote>
<p>The print function can’t currently handle arrays with units. The array can be printed nicely in two steps as shown below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n_rows</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">Flow</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span>
<span class="n">Flow_array</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">n_rows</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="n">n_rows</span><span class="p">)</span> <span class="o">*</span> <span class="n">Flow</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The array of flow rates is&#39;</span><span class="p">,</span><span class="n">Flow_array</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span><span class="n">Flow_array</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>

<span class="n">Flow_array</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">n_rows</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="n">n_rows</span><span class="p">)</span> <span class="o">*</span> <span class="n">Flow</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The array of flow rates is&#39;</span><span class="p">,</span><span class="n">Flow_array</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span><span class="n">Flow_array</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>

<span class="n">Flow_array</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="n">n_rows</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">Flow</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The array of flow rates is&#39;</span><span class="p">,</span><span class="n">Flow_array</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span><span class="n">Flow_array</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>
</pre></div>
</div>
<p>[  2.   4.   6.   8.  10.  12.  14.  16.  18.  20.] liter / second</p>
</div>
<div class="section" id="plotting">
<h2>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h2>
<p>We will use this <a class="reference external" href="https://matplotlib.org/tutorials/introductory/usage.html#coding-styles">pyplot coding style</a> .</p>
<blockquote>
<div><ul class="simple">
<li><p>fig is a Figure instance—like a blank canvas</p></li>
<li><p>ax is an AxesSubplot instance—think of a frame for plotting in</p></li>
</ul>
</div></blockquote>
<p>Create a graph showing flow rate vs depth for two linear flow orifice meters that have a depth range of 20 cm and flow ranges of 50 and 70 L/s.</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.legend.html">Legend location options</a></p></li>
<li><p><a class="reference external" href="https://matplotlib.org/api/colors_api.html">Colors</a></p>
<ul>
<li><p>‘b’, ‘g’, ‘r’, ‘c’, ‘m’, ‘y’, ‘k’, ‘w’</p></li>
<li><p>blue, green, red, cyan, magenta, yellow, black, white</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://matplotlib.org/api/markers_api.html#module-matplotlib.markers">Data markers (if you are plotting data and not a model or curve fit)</a></p></li>
</ul>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">H_max</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">cm</span>
<span class="n">Q_max1</span> <span class="o">=</span> <span class="mi">50</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span>
<span class="n">Q_max2</span> <span class="o">=</span> <span class="mi">70</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span>
<span class="n">num</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">H_max</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">num</span><span class="p">)</span> <span class="p">)</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">Q_max1</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">Q_max2</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="s1">&#39;r-&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">Q_max1</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="s1">&#39;b-&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">Q_max2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;water depth (&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">units</span><span class="p">)</span> <span class="o">+</span><span class="s1">&#39;)&#39;</span><span class="p">)</span>
<span class="c1">#ax.set(ylabel=&#39;Flow rate (&#39;+str(Q_max1.units)+&#39;)&#39;)</span>
<span class="c1">#Below is the method for using latex to format the units</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Flow rate &#39;</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;$\left (\frac{L}{s}\right )$&#39;</span><span class="p">)</span>

<span class="c1"># options: linear or log</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">yscale</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xscale</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="c1">#options:</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>

<span class="c1">#alternative method to create a legend instead of using &quot;label=Q_max1 in ax.plot&quot;</span>
<span class="c1">#ax.legend([Q_max1,Q_max2])</span>

<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;../Images/LFOM_flow_vs_height&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-center" id="id2">
<span id="figure-lfom-flow-vs-height"></span><a class="reference internal image-reference" href="../_images/LFOM_flow_vs_height.png"><img alt="LFOM flow vs height" src="../_images/LFOM_flow_vs_height.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 225 </span><span class="caption-text">The flow through an LFOM is directly proportional to the height of the water above the bottom of the first row of orifices.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>Indexing is done by row and then by column. To call all of the elements in a row or column, use a colon. As you can see in the following example, indexing in python begins at zero. So <code class="docutils literal notranslate"><span class="pre">a[:,1]</span></code> is calling all rows in the second column</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#create an empty array</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="c1">#Given that I&#39;m going to using np.array to assign the elements I didn&#39;t need to create the empty array first.</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">]])</span>
<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">a</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span>
<span class="c1">#access the last row by find the shape, selecting the 2nd element in the shape, and then subtracting one</span>
<span class="n">a</span><span class="p">[:,</span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">a</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="sd">&#39;&#39;&#39;specify a range of values in an array. Use a colon to slice the array, with the number before the colon being the index of the first element, and the number after the colon being **one greater** than the index of the last element&#39;&#39;&#39;</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="example-problem">
<h2>Example problem<a class="headerlink" href="#example-problem" title="Permalink to this headline">¶</a></h2>
<p>Calculate the number of moles of methane in a 20 L container at 15 psi above atmospheric pressure with a temperature of 30 C.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># First assign the values given in the problem to variables.</span>
<span class="n">P</span> <span class="o">=</span> <span class="mi">15</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">psi</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">atm</span>
<span class="n">T</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">degC</span>
<span class="n">V</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">L</span>
<span class="c1"># Use the equation PV=nRT and solve for n, the number of moles.</span>
<span class="c1"># The universal gas constant is available in pint.</span>
<span class="n">nmolesmethane</span> <span class="o">=</span> <span class="p">(</span><span class="n">P</span><span class="o">*</span><span class="n">V</span><span class="o">/</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">R</span><span class="o">*</span><span class="n">T</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">kelvin</span><span class="p">)))</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">nmolesmethane</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;There are &#39;</span><span class="p">,</span> <span class="n">nmolesmethane</span> <span class="p">,</span><span class="s1">&#39; of methane in the container.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>There are  1.625 mole  of methane in the container.</p>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<p>When it becomes necessary to do the same calculation multiple times, it is useful to create a function to facilitate the calculation in the future.</p>
<blockquote>
<div><ul class="simple">
<li><p>Function blocks begin with the keyword def followed by the function name and parentheses ( ).</p></li>
<li><p>Any input parameters or arguments should be placed within these parentheses.</p></li>
<li><p>The code block within every function starts with a colon (:) and is indented.</p></li>
<li><p>The statement return [expression] exits a function and returns an expression to the user. A return statement with no arguments is the same as return None.</p></li>
<li><p>(Optional) The first statement of a function can the documentation string of the function or docstring, written with apostrophes .</p></li>
</ul>
</div></blockquote>
<p>Below is an example of a function that takes three inputs, pressure, volume, and temperature, and returns the number of moles.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creating a function is easy in Python</span>
<span class="k">def</span> <span class="nf">nmoles</span><span class="p">(</span><span class="n">P</span><span class="p">,</span><span class="n">V</span><span class="p">,</span><span class="n">T</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">P</span><span class="o">*</span><span class="n">V</span><span class="o">/</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">R</span><span class="o">*</span><span class="n">T</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">kelvin</span><span class="p">)))</span><span class="o">.</span><span class="n">to_base_units</span><span class="p">()</span>
</pre></div>
</div>
<p>Try using the new function to solve the same problem as above. You can reuse the variables. You can use the new function call inside the print statement.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;There are&#39;</span><span class="p">,</span> <span class="n">nmoles</span><span class="p">(</span><span class="n">P</span><span class="p">,</span><span class="n">V</span><span class="p">,</span><span class="n">T</span><span class="p">),</span><span class="s1">&#39;of methane in the container.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">There</span> <span class="n">are</span> <span class="mf">1.62</span> <span class="n">mol</span> <span class="n">of</span> <span class="n">methane</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">container</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="pipe-database">
<h2>Pipe Database<a class="headerlink" href="#pipe-database" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://github.com/AguaClara/aguaclara/blob/master/aguaclara/core/pipes.py">pipes</a> has many useful functions concerning pipe sizing. It provides functions that calculate actual pipe inner and outer diameters given the nominal diameter of the pipe. Note that nominal diameter just means the diameter that it is called (hence the discriptor “nominal”) and thus a 1 inch nominal diameter pipe might not have any dimensions that are actually 1 inch!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">aguaclara.core.pipes</span> <span class="kn">as</span> <span class="nn">pipe</span>
<span class="c1"># The OD function in pipedatabase returns the outer diameter of a pipe given the nominal diameter, ND.</span>
<span class="n">pipe</span><span class="o">.</span><span class="n">OD</span><span class="p">(</span><span class="mi">6</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">inch</span><span class="p">)</span>
</pre></div>
</div>
<p>6.625 inch</p>
<p>The ND_SDR_available function returns the nominal diameter of a pipe that has an inner diameter equal to or greater than the requested inner diameter <a class="reference external" href="http://www.engineeringtoolbox.com/sdr-standard-dimension-ratio-d_318.html">SDR, standard diameter ratio</a> . Below we find the smallest available pipe that has an inner diameter of at least 7 cm</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">IDmin</span> <span class="o">=</span> <span class="mi">7</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">cm</span>
<span class="n">SDR</span> <span class="o">=</span> <span class="mi">26</span>
<span class="n">ND_my_pipe</span> <span class="o">=</span> <span class="n">ac</span><span class="o">.</span><span class="n">ND_SDR_available</span><span class="p">(</span><span class="n">IDmin</span><span class="p">,</span><span class="n">SDR</span><span class="p">)</span>
<span class="n">ND_my_pipe</span>
</pre></div>
</div>
<p>3.0 inch</p>
<p>The actual inner diameter of this pipe is</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ID_my_pipe</span> <span class="o">=</span> <span class="n">ac</span><span class="o">.</span><span class="n">ID_SDR</span><span class="p">(</span><span class="n">ND_my_pipe</span><span class="p">,</span><span class="n">SDR</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">ID_my_pipe</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">cm</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">8.2</span> <span class="n">cm</span>
</pre></div>
</div>
<p>We can display the available nominal pipe sizes that are in our
database.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ac</span><span class="o">.</span><span class="n">ND_all_available</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../equations.html" class="btn btn-neutral float-right" title="Equation Quick Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../AIDE/AIDE.html" class="btn btn-neutral float-left" title="AguaClara Infrastructure Design Engine" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, https://www.aguaclarareach.org/.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>