

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Enclosed Stacked Rapid Sand Filter Design &mdash; AguaClara Textbook 276/merge documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script async="async" src="../_static/mathjax_config.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AguaClara Textbook
          

          
          </a>

          
            
            
              <div class="version">
                276/merge
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Acknowledgements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Authors.html">Authors</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 1: Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Introduction.html">The Physics of Water Treatment Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Design_Evolution.html">Design Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Challenges.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Challenges.html#drinking-water-challenges">Drinking Water Challenges</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Challenges.html#wastewater-treatment-challenges">Wastewater Treatment Challenges</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Challenges.html#anaerobic-pulsed-bed">Anaerobic Pulsed Bed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Challenges.html#aerobic-string-digester-asd">Aerobic String Digester (ASD)</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 2: Fluids and Hydraulics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Fluids_and_Hydraulics/Fluid_Mechanics.html">Fluid Mechanics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fluids_and_Hydraulics/Fluid_Mechanics_Derivations.html">Fluid Mechanics Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fluids_and_Hydraulics/Manifold_Hydraulics.html">Manifold Hydraulics</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 3: Fluid Deformation, Fractals, and Forces</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Fluid_Deformation_and_Energy_Dissipation/FDED_Intro.html">Energy Dissipation Rate, Velocity Gradient, and Mixing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fluid_Deformation_and_Energy_Dissipation/FDED_Derivations.html">Fluid Deformation and Energy Dissipation Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocs_Fractals_and_Forces/FFF_Intro.html">Flocs, Fractals, Forces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocs_Fractals_and_Forces/FFF_Suspensions.html">Fluidized Suspensions</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 4: Chemistry of Water Treatment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Chemistry_of_Water_Treatment/Chemistry_Intro.html">Chemistry of Coagulant Nanoparticles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chemistry_of_Water_Treatment/Chemistry_Derivations.html">Carbonate Reactions, Buffering, and pH</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 5: Flow Control and Measurement</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Intro.html">Constant Head Tanks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Design.html">AguaClara Flow Control and Measurement Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Derivations.html">Flow Control and Measurement Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Solution.html">Flow Control and Measurement Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/ET_Design.html">Entrance Tank Design</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 6: Rapid Mix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Intro.html">Rapid Mix Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Design.html">Rapid Mix Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Examples.html">Rapid Mix: Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Theory_and_Future_Work.html">Rapid Mix Theory and Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Mechanical_Solution.html">Rapid Mix Mechanical Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Design_Solution.html">Rapid Mix Design Solution</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 7: Flocculation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Model.html">AguaClara Hydraulic Flocculation Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Derivations.html">Flocculation Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Design.html">Flocculation Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Design_Challenge.html">Flocculation Design Challenge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Mechanical_Solution.html">Mechanical Flocculator Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Model_Solution.html">Flocculation Model Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Design_Solution.html">Flocculator Design Solution</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 8: Sedimentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Intro.html">Sedimentation Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Derivations.html">AguaClara Sedimentation Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Design.html">Sedimentation Tank Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Design_Challenge.html">Sedimentation Design Challenge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Theory_and_Future_Work.html">Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Examples.html">Sedimentation Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 9: Filtration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Filtration_Intro.html">Filtration  Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Filtration_Intro.html#filtration-theory">Filtration Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="Filtration_Design.html">Stacked Rapid Sand Filter Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="Filtration_Theory_and_Future_Work.html">Filtration Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="Filtration_Design_Solution.html">Filtration Design Solution</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 10: Dissolved Gas</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Dissolved_Gas/DG_Intro.html">Dissolved Gas Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 11: Fluoride</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Fluoride/Fluoride_Intro.html">Fluoride Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 12: Troubleshooting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/Troubleshooting.html">Plant Operation Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/Troubleshooting.html#high-head-loss-after-backwash-in-estars">High Head Loss After Backwash in EStaRS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/Troubleshooting.html#encrustation-of-filter-pipes-at-las-vegas">Encrustation of Filter Pipes at Las Vegas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/Troubleshooting.html#slime-at-las-vegas">Slime at Las Vegas</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix 1 + Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Python_Tutorial.html">Python Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../equations.html">Equations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributor's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/rst_intro.html">Introduction to RST and Sphinx for Textbook Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/example_aguaclara_rst.html">Functionality in RST and AguaClara Convention</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/parameter_convention_list.html">Parameter Convention List</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AguaClara Textbook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Enclosed Stacked Rapid Sand Filter Design</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/Filtration/EStaRS_Design.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <embed>
   <link rel="canonical" href="https://aguaclara.github.io/Textbook" />
   <script src="https://hypothes.is/embed.js" async></script>
</embed><div class="section" id="enclosed-stacked-rapid-sand-filter-design">
<span id="title-estars"></span><h1>Enclosed Stacked Rapid Sand Filter Design<a class="headerlink" href="#enclosed-stacked-rapid-sand-filter-design" title="Permalink to this headline">¶</a></h1>
<p>The Enclosed Stacked Rapid Sand filter, EStaRS, is a compact filter built inside a pipe. Open Stacked Rapid Sand, OStaRS, construction methods require that a person be able to work inside the filter to finish the waterproofing of the concrete walls and to install the pipe modules for the inlets and outlets. The minimum filter area for OStaRS is approximately 1 square meter. Given a backwash velocity of 11 mm/s that corresponds to a minimum flow of about 11 L/s. It is always best to have at least 2 filters operating in parallel so that the filters can be backwashed when the plant is operating at less than 50% of the design flow rate. Thus EStaRS filters will be used for plants with flows less than about 20 L/s.</p>
<ul class="simple">
<li><p>Use standard caps on the top and bottom of the filter body.</p></li>
<li><p>Use clamp on fittings to split the filter body at two places between layers.</p></li>
<li><p>Use clamp on fittings on trunks to enable removal.</p></li>
<li><p>Use trunks that are 2” ND so that the molded ends of the branches have something to prevent them from rotating.</p></li>
<li><p>Join branches across trunk with an upper and lower strap that is clamped in place with hose clamps.</p></li>
<li><p>use band clamps on inside of filter to connect trunks</p></li>
<li><p>weld a pipe stub to pass through the filter body for the trunks</p></li>
</ul>
<p>The EStaRS filters should be modular with one pipe connection to attach to the settled water source and another pipe connection to attach to the finished water. The flow division between filters could be an LFOM for each filter in the inlet tank. To make a filter modular the inlet and outlet tanks need to be integrated into the filter module.</p>
<p>The inlet and outlet tanks could be separate or connected and they could be rectangular PVC tanks or PVC pipes.</p>
<p>Previous problems with EStaRS filters included air entrainment and fabrication problems with the filter internal piping. Corrugated pipes that are available for filter body diameters greater than 60 centimeters that are available in Honduras have very thin inner walls that are not thick enough for strong welds. This requires use of a gasket seal for passing the trunk lines through the filter body. The corrugated pipes are also more difficult to attach the required end caps on the filter body. For these reasons we do not recommend using corrugated pipes for the filter body. Smooth walled PVC pipe is available in sizes up to 60 cm in diameter (ND = 24”) and is the material of choice for the filter body.</p>
<p>Air entrainment may be a problem in the inlet pipes. If air is carried into the filter the head loss through the filter will increase rapidly. Byron Zuniga reports that he was unable to get an effective backwash at the San Juan Guarita plant based on the observation that the head loss increased rapidly after backwash even though there was no evidence of turbidity release during backwash. This observation is consistent with air being entrained in the inlet pipes and carried into the filter where it rapidly fills the pores of the sand and thus prevents water from flowing through those pores.</p>
<p>The solution to air entrainment is to design the inlet pipes to act like tube settlers so that the air can return to the inlet tank.</p>
<p>We need a method to measure the flow rate entering the filters. The slot weir in the OStaRS filter could be used to measure the flow and would have a nonlinear scale. An alternative that the operators would readily understand would be to replace the slot weir with an LFOM.</p>
<p>The 4 EStaRS that are in operation in Central America as of 2021 have winged pipes with orifices for the inlets. There are no reports of problems with sand entering the inlet pipes and thus that appears to be a success. This does require the use of a gate valve for the backwash pipe to ensure that the transition from backwash to filtration mode doesn’t happen too quickly. During this transition there is reverse flow from the filter into the inlet pipes and if that flow rate is too high it could carry sand into the inlet branches.</p>
<div class="section" id="air-venting-from-trunks">
<h2>Air venting from trunks<a class="headerlink" href="#air-venting-from-trunks" title="Permalink to this headline">¶</a></h2>
<p>The trunks are initially filled with air.
The trunks must have a water seal that is as low as the siphon water seal (is this the constraint?) to ensure that air is never sucked into the filter during backwash.
The trunk entry into the filter body is thus at a local high point and air that accumulates in the top of the trunk and the top of the branches has no way to get out.
There must be a vent on the top of the trunks where they enter the filter body.</p>
<div class="section" id="vent-options">
<h3>Vent options<a class="headerlink" href="#vent-options" title="Permalink to this headline">¶</a></h3>
<p>1) tube straight up to top of inlet tank (will suck air during backwash)
1) tube that connects into the top of the filter body (during filtration air will travel up the tubes and vent into the top of the filter body. During backwash water will take this shortcut to bypass the sand. It could work if the tubes are small enough that the bypass during backwash is small)
1) Use sloped section of trunk line to act as tube settler to remove bubbles that are entrained in the inlet. This doesn’t solve the problem of air that is in the local high spot of trunks.</p>
<p>It seems that the only option is to connect the air release tubes to the top of the filter.</p>
</div>
<div class="section" id="elevation-considerations">
<h3>Elevation considerations<a class="headerlink" href="#elevation-considerations" title="Permalink to this headline">¶</a></h3>
<p>The head loss through the sand during backwash is equal to the settled depth of sand. This means that the water level in the top inlet pipe will drop by an amount equal to the depth of the sand. That means that the bottom of the inlet tank must be ABOVE the top of the sand + the OD of the trunk + head loss in the backwash trunk inlet.</p>
</div>
</div>
</div>
<div class="section" id="old-info">
<h1>Old info<a class="headerlink" href="#old-info" title="Permalink to this headline">¶</a></h1>
<p>used for low flow plants because they are less resource intensive to construct than a small version of the full-size concrete filter, additionally the OStaRS become infeasible in term of maintenance at very low flows because it would very narrow and very deep. This difficulty is noted in OStaRS filters handling less than 8 L/s corresponding to plant flows less than 16 L/s. This challenge invites the EStaRS as an alternative.</p>
<p>Because the EStaRS filter is constructed using only pipes and couplings, the possible EStaRS sizes are discretized as pipes are not available in every conceivable size. This constraint means that there are only three available sizes of EStaRS: 1 ft, 2 ft, and 3 ft diameter, which treat 0.764 L/s, 3.07 L/s, and 7.024 L/s, respectively.</p>
<p>As with the OStaRS, each plant should have at least 2 filters so that one can still be in use even when the other is in backwash. If the plant flow is more than corresponds with 2 filters, additional filters can and should be added in parallel to accommodate additional flow. In additional to requiring multiple filters there are other parts of the design that are the same for both types of filters! The stacked trunk and branch system is the most notable of these similarities, with key differences being in how the inlet and outlet system can be designed. Both the “traditional” concrete entrance/exit channel and boxes can be used, but a more compact design features entrance and exit tanks made from large diameter pipes making them modular. Most of this design file considers the shared characteristics of the concrete and pipe hydraulic controls.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>In this file, many values are functions of pipe nominal diameter and SDR. For the simplicity of reading, those values are written with just the geometric value used. For example, if an outer diameter (OD) is needed, it is written as <span class="math notranslate nohighlight">\(OD_{ExamplePipe}\)</span> rather than <span class="math notranslate nohighlight">\(OD(ND_{ExamplePipe}, SDR26)\)</span> which is more similar to how it would be found explicitly. Some other features that follow this convention are Inner Diameters and Radii, Outer Radii, and wall thicknesses.</p>
</div>
<p><code class="xref std std-numref docutils literal notranslate"><span class="pre">table_comparsion_filters</span></code> shows some of the design differences between the different filter types. The parameters included in the table will be described throughout this design.</p>
<table class="docutils align-default" id="table-comparison-filters">
<colgroup>
<col style="width: 22%" />
<col style="width: 15%" />
<col style="width: 14%" />
<col style="width: 0%" />
<col style="width: 18%" />
<col style="width: 0%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>EStaRS for PF300</p></th>
<th class="head" colspan="5"><p>EStaRS concrete   | EStaRS “Micky Mouse” | OStaRS</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Signal for BW</p></td>
<td><p>60cm head loss</p></td>
<td colspan="2"><p>75cm head loss</p></td>
<td colspan="2"><p>75cm head loss</p></td>
<td><p>Min 20cm, function of trunk diameter</p></td>
</tr>
<tr class="row-odd"><td><p>Entrance Tank Material</p></td>
<td><p>Concrete/PVC</p></td>
<td colspan="2"><p>Concrete</p></td>
<td colspan="2"><p>PVC</p></td>
<td><p>Concrete</p></td>
</tr>
<tr class="row-even"><td><p>Design Flow for 1 Filter</p></td>
<td><p>&lt;.75 L/s</p></td>
<td colspan="2"><p>.764 - 7.024 L/s</p></td>
<td colspan="2"><p>.764 - 7.024 L/s</p></td>
<td><p>&gt;8 L/s</p></td>
</tr>
<tr class="row-odd"><td><p>Sand Layer Height</p></td>
<td><p>15cm</p></td>
<td colspan="2"><p>20cm</p></td>
<td colspan="2"><p>20cm</p></td>
<td><p>80cm head loss</p></td>
</tr>
</tbody>
</table>
<p>[Add a section (table or figure) on your proposal for number and size of filters as a function of flow rate over the range of flows that you anticipate EStaRS will be used.]</p>
<p>Generally 2 or more filters are considered, so that one can still be in use when the other is being backwashed. The number and size of the filters as a function of the design flow rate and the maximum flow a filter of a particular size can handle.</p>
<p>In the design the first step is to determine what size EStaRS is needed because this determines nearly every parameter. <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure_body_d_and_n</span></code> shows the process by which the number and size of EStaRS is determined.</p>
<div class="figure align-center" id="id1">
<span id="figure-body-d-and-n"></span><a class="reference internal image-reference" href="../_images/figure_body_d_and_n.png"><img alt="flowchart showing how the filter size is determined, internal image" src="../_images/figure_body_d_and_n.png" style="width: 70%;" /></a>
<p class="caption"><span class="caption-text">This flowchart shows the way the plant flow is used with the available pipe diameters to determine an appropriate size and number of filters based on the total plant flow.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>The constraint that defines the filter body size is ultimately the backwash velocity. For the sand used in the filters the required upwards velocity to fluidize the sand is 9.8 mm/s. Using this velocity and the flow area of a pipe, as based on the inner diameter, provides a maximum flow for the filter, based on <span class="math notranslate nohighlight">\(Q_{Filter} = V_{BW}*A_{Filter}\)</span>. This <span class="math notranslate nohighlight">\(Q_{Filter}\)</span> describes the flow that must be seen for backwash to happen properly. Another array is generated by diving <span class="math notranslate nohighlight">\(Q_{Plant}\)</span> by <span class="math notranslate nohighlight">\(Q_{Filter}\)</span>. This array is equal to the required number of filters (<span class="math notranslate nohighlight">\(N_{Filter}\)</span>) of a particular diameters to serve a plant with a flow of <span class="math notranslate nohighlight">\(Q_{Plant}\)</span>. The value that is the smallest number of filters greater than or equal to 2 should is chosen, and the corresponding index of pipe diameter yields the size. If the chosen number is not an integer, it is rounded up to the nearest integer to provide the number of filters to be included. Rounding up guarantees that the entire plant flow can be filtered.</p>
<p>From the determination of the filter body size, the branch and trunk manifolds are the next most important feature of the design. Some relevant variables defined here. These are constrains that are set before component dimensions are determined.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 26%" />
<col style="width: 9%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default Value</p></th>
<th class="head"><p>What Constrains the Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(ND_{BallValve}\)</span></p></td>
<td></td>
<td><p>3 in</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(ND_{BedTester}\)</span></p></td>
<td></td>
<td><p>0.5in</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(ND_{BedTesterOuter}\)</span></p></td>
<td></td>
<td><p>1in</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(ND_{FiAirRelValve}\)</span></p></td>
<td><p>Air Valve diameter</p></td>
<td><p>0.5in</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(ND_{FiBwTrunkMin}\)</span></p></td>
<td><p>Minimum backwash trunk diameter</p></td>
<td><p>3in</p></td>
<td><p>Must fit branches and accommodate full filter flow</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(ND_{FiBwBranchkMin}\)</span></p></td>
<td><p>Mininmum backwash branch diameter</p></td>
<td><p>1in</p></td>
<td><p>Slotted pipes cannot be fabricated smaller than 1 in</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(ND_{FiTrunkMin}\)</span></p></td>
<td><p>Minimum trunk diameter</p></td>
<td><p>2in</p></td>
<td><p>Must be able to fit branches without significant flow obstruction</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(ND_{FiDrainExit}\)</span></p></td>
<td><p>Minimum drain pipe diameter</p></td>
<td><p>3in</p></td>
<td><p>Entire filter flow can drain with 10 cm of head</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(ND_{FiOverflowEnt}\)</span></p></td>
<td><p>Minimum overflow pipe diamete</p></td>
<td><p>3in</p></td>
<td><p>Entire filter flow can drain with 10cm of head</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(ND_{FiBranchMin}\)</span></p></td>
<td colspan="3"><p>Minimum branch diameter            |   1in        |  Slotted pipes cannot be fabricated smaller than 1 in</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(D_{OrificeMax}\)</span></p></td>
<td><p>Maximum orifice size on branches</p></td>
<td><p>1/4in</p></td>
<td><p>Larger will leave gaps along the wings for sand to escape</p></td>
</tr>
</tbody>
</table>
<p><em>trunk sizes based on Juan Guzmán’s recommendation in November 2018 to account for fabrication problems</em></p>
<p>Another important value determined by the filter body size is the area of the filter which is defined as: <span class="math notranslate nohighlight">\(\pi ID_{pipe}^2 / 4\)</span>. This becomes important later in determination of the mass of sand needed.</p>
<p>The pipe sizes recommended in this section come from certain assumptions of the amount of head required to use the filter. In November 2018, the difference in elevation of the water level from the exit tank to the entrance tank was increased to 75cm (an additional increase from 60, which was decided a year or so earlier) so that extra head loss in the manifold system does not influence filter functionality as has been seen in the field. This additional head will allow smaller manifold pipes to be used, as the added head loss in smaller pipes (from the increase of velocity) will not overcome the entrance and exit heights. Smaller manifold pipes will mean the entrance and exit tanks can stay narrower, though taller.</p>
<p>The determination of sizes for the drain and overflow come from using the orifice equation and the maximum flow that could be seen in the filter with a 10 cm safety height due the height of the weirs in the entrance and exits boxes in the concrete design and the height of pipe stubs in the Micky Mouse design. The goal with the drain especially is to allow the water to exit at the same flow it is entering in the event that the outflow isn’t working properly.</p>
<p>A schematic of these pipes can be see below in {Make a basic drawing of the filter or an Onshape drawing}. The image is not to scale, but shows generally how pipes are organized within the filter.</p>
<p>[We need an Onshape drawing! Perhaps early next year. The pipes MUST go to the floor. Exit to distribution starts at the bottom of the exit tank. Possibly the top of the exit and entrance tanks are only 10 cm above the filter body. Filter Body has an air vent. Need flow control weir system. Is it possible to have some of the pipes exit through the side of the entrance and exit tanks so those tanks don’t have to be so large? Sand drain? Pipe stubs in entrance and exit tanks for automated switch from filter to backwash. Backwash drain pipe with valve? Considering putting numbers on the inlets and outlets so that you can ]</p>
<p>It is important that the heights between the top of the settled water inlet and the overflow are 10 cm apart because if that distance is too small the overflow may not be large enough to handle excess flow as based on the safety height to find the overflow pipe area.</p>
<p>During operation the height of water in the entrance tank is watched to determine when backwash is necessary as it rises as head loss in the filter increases.</p>
<p>In addition to these numerical constraints there are several other constraints that are more clearly outlined in words.</p>
<ol class="arabic simple" id="word-constraints-of-the-filter">
<li><p>All inlet and outlet pipes must bend and rest on the floor before connecting to the entrance or exit tank to prevent air from getting into the filter body.</p></li>
<li><p>The exit branches are slotted pipes and the inlet branches have orifices with wings</p></li>
<li><p>The branches on either side of a trunk are composed of one length of pipe meaning the trunk has to be large enough so the branches don’t act like valves.</p></li>
<li><p>The branch spacing must be small compared to the sand layer depth, to efficiently use the sand. See <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure_layer_depth_and_branch_spacing</span></code> for a visual. They must however, also be far enough apart so that they can be feasible to fabricate.</p></li>
<li><p>The orifice spacing must be small compared to the branch spacing (for the same reasons as above)</p></li>
<li><p>The exit tank contain pipes for: the plant exit, the three filter outlets, and a drain.</p></li>
<li><p>The entrance tank contains pipes for: the four inlet pipes, an overflow pipe, and the inlet for the settled water.</p></li>
<li><p>During forward filtration there should be even flow between filters in parallel.</p></li>
<li><p>Within each filter there should be equal flow within each sand layer.</p></li>
<li><p>The filter body must have an air vent.</p></li>
<li><p>The filter body must contain a sand drain. (Which should only be used to replace sand, because it makes a mess!)</p></li>
<li><p>The maximum flow in the filter should only ever be what the filter is designed for!</p></li>
</ol>
<div class="figure align-center" id="id2">
<span id="figure-layer-depth-and-branch-spacing"></span><a class="reference internal image-reference" href="../_images/figure_layer_depth_and_branch_spacing.png"><img alt="schematic of brach spacing as comared to layer thickness, interal image" src="../_images/figure_layer_depth_and_branch_spacing.png" style="width: 70%;" /></a>
<p class="caption"><span class="caption-text">This figure shows the way the branch spacing should be small compared to the sand layer thickness. Water flows in the direction of decreasing piezometric head as shown by the vertical arrows on the left. On the right the flow of water within each sand layer is shown. If the branches were further apart the lines showing the path of the water would not utilize all the sand within the layer, resulting in wasted space, a source of inefficiency in the filter. Thus keeping the branches close together is important. This will be explored numerically in a following section.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>As the maximum flow of the filter is constrained by the available sizes of the pipe for the filter, the design flow of the filter is characterized by: <span class="math notranslate nohighlight">\(Q_{Bw} = V_{Bw}A_{Fi}\)</span>. Filters <strong>should not</strong> be run at flows above those for which they were designed. In the determination of the size of the internal components of a filter the design flow of the filter should always be used, this ensures that all parts can handle the maximum flow in the filter</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>It may seem peculiar that there is no minimum flow in the filter. This is because a filter, during forward filtration, will function fine at lower flows. A minimum flow constraint does occur with backwash, but if the flow is that low that less than one filter is needed it is unlikely that it will need to be backwashed regularly enough to be a concern. This issue has not been seen in any plant to date and is not accounted for in the design.</p>
</div>
</div></blockquote>
<p>This design will focus on flow through one filter, as having several filters in parallel wouldn’t alter the flow within one, though flow will be split between the filters. To do this a weir system is in place to split flow about evenly during forward filtration.</p>
<p>Within each filter the flow is then further split into the 6 layers of the filter.</p>
<p>The entire area of the filter is assumed to be active and is denoted as <span class="math notranslate nohighlight">\(A_{Fi}\)</span>, as calculated previously as a function of ID.</p>
<p>Within each filter the flow is diverted across six layers. (<span class="math notranslate nohighlight">\(N_{FiLayer} = 6\)</span>)</p>
<p>Thus the flow through each sand layer is: <span class="math notranslate nohighlight">\(Q_{FiLayer} = \frac{Q_{Fi}}{N_{FiLayer}}\)</span>.</p>
<p>This is not the flow experienced by all the pipe layers though. As shown in <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure_numbered_filter_layers</span></code> the two inner inlets, I-2 and I-3 each serve 2 filter layers and as a result carry flows that are double <span class="math notranslate nohighlight">\(Q_{FiLayer}\)</span></p>
<div class="figure align-center" id="id3">
<span id="figure-numbered-filter-layers"></span><a class="reference internal image-reference" href="../_images/figure_numbered_filter_layers.png"><img alt="filter manifold layer schematic, interal image" src="../_images/figure_numbered_filter_layers.png" style="width: 70%;" /></a>
<p class="caption"><span class="caption-text">This schematic shows the layers of the filter and the amount of flow within each pipe layer.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>This is important in knowing the maximum flow that will be in a trunk or branch at any given time, as that will be used to determine the orifice area as a function of the allowable head loss in combination with the spacing of branches and as a result the flow in each branch.</p>
<p>In the EStaRS filters, of all three sizes (1ft, 2ft, and 3ft), the sand layer thickness will be 20cm for each layer, except for filters designed to go with PF300 plants, then the depth will be 15cm so that all processes can be at the same elevation. In the OStaRS there are functions that define the sand layer depth, but the minimum distance, 20cm is applicable until trunk diameters are larger than 6 inches. Because for EStaRS this variable is unchanging the equations are not included, but it can be found in the OStaRS filter design file in the <span class="xref std std-ref">sand layer thickness</span> section.</p>
<p>The OStaRS filters have an option to increase the layer depth to account for the added width of the pipes in a larger filter, but in the EStaRS the trunk sizes will never be large enough because the flow is substantially lower.</p>
<p>So:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-0">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-0" title="Permalink to this equation">¶</a></span>\[H_{FiSandLayer} = 20cm\]</div>
<p>This is the center to center distance of the trunks.</p>
<p>As described in the constraints above, the spacing of the branches must be small compared to the layer depth. In this case, small can be taken to be half the distance, so <span class="math notranslate nohighlight">\(\Pi_{Spacing} = 0.5\)</span>. Thus:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-1">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-1" title="Permalink to this equation">¶</a></span>\[S_{Branches} = H_{FiSandLayer}*\Pi_{Spacing} = 10cm\]</div>
<p>This is the center to center distance of the branches and is meant to balance even flow distribution across each layer with ease of fabrication and material use (i.e. having 100 branches would mean very good flow distribution, but would be impossible to fabricate).</p>
<p>Then the number of branches on each side of the trunk is:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-2">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-2" title="Permalink to this equation">¶</a></span>\[N_{FiBranchMin} = round(\frac{ID_{FiPipe}}{B_{FiBranchMax}})\]</div>
<p>the ID function also takes the SDR for the pipe (26), but in the equation above was left out so the overall mechanism of the calculation is clearer. The value is rounded because an integer number of branches is needed. The various dimensions of each filter pipe layer can be seen in <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure_manifold_sizing</span></code>.</p>
<div class="figure align-center" id="id4">
<span id="figure-manifold-sizing"></span><a class="reference internal image-reference" href="../_images/figure_manifold_sizing.png"><img alt="filter manifold schematic, interal image" src="../_images/figure_manifold_sizing.png" style="width: 70%;" /></a>
<p class="caption"><span class="caption-text">This schematic shows the general naming and dimensions for one layer of the filter. This is a top down view.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>Setting the number of branches allows the flow within each branch to be determined, knowing that the area of the inlet orifices can be determined. It will also allow the sizes of branches and trunks to be determined.</p>
<p>In determining the size of the trunk and branches of the EStaRS the pressure recovery constraints are the most important design considerations. Having a pressure recovery term that is too high will lead to an uneven flow distribution. The two pressure recovery terms that are of particular concern are those in the trunks and branches during forward filtration, and the pressure recovery in the lowest branch during backwash. The first step is to find the flow rate in the branches. Then the PR constraint can be used to find the minimum diameter needed for forward filtration and during backwash.</p>
<p>In the EStaRS there are three components where flow distribution must be considered:</p>
<ol class="arabic simple">
<li><p>Between slots along outlet manifold branches and between orifices on inlet branches</p></li>
<li><p>Between branches along manifold trunks</p></li>
<li><p>Between filter layers</p></li>
</ol>
<p>Having uneven flow distribution is unwanted for several reasons, the mostly importantly being that the goal is for each parcel of water to spend approximately the same amount of time in the filter. If flow isn’t distributed well the distribution of residence times for the parcels will widen which decreases treatment efficiency.</p>
<p>The basis of this part of the design is using head loss in an analogous way as resistors in an electrical system. If head loss is intentionally high at a certain point in the filter, then other differences between paths (such a length of the pipe, or which orifice along a branch is the outlet) will not matter because the head loss of those differences is comparatively small. Additionally, some variation is considered. Creating a system with perfectly identical paths would be extraordinarily complex and would require setting the head loss (and pressure recovery) to zero for paths that have different lengths, so some dissimilarity is allowed for the sake of simplicity.</p>
<p>The relative distribution of the flow through a particular path is defined as:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-3">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-3" title="Permalink to this equation">¶</a></span>\[\Pi_Q = \frac{Q_{long}}{Q_{short}} = \sqrt{\frac{C_{p_{Short}}}{C_{p_{Short}}}}\]</div>
<div class="line-block">
<div class="line">Such that:</div>
<div class="line"><span class="math notranslate nohighlight">\(\Pi_Q =\)</span> the ratio of flow</div>
<div class="line"><span class="math notranslate nohighlight">\(Q_{long} =\)</span> the flow through the longest filter path (lowest layer, at the furthest slot on the furthest branch)</div>
<div class="line"><span class="math notranslate nohighlight">\(Q_{Long} =\)</span> the flow through the shortest filter path (top layer, closest slot on the first branch)</div>
<div class="line"><span class="math notranslate nohighlight">\(C_{p_{short}} =\)</span> pressure coefficient at the end of the shortest path</div>
<div class="line"><span class="math notranslate nohighlight">\(C_{p_{long}} =\)</span> pressure coefficient at the end of the longest path</div>
</div>
<p><span class="math notranslate nohighlight">\(C_p\)</span> is defined thoroughly in <span class="xref std std-ref">Filtration Introduction</span></p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-4">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-4" title="Permalink to this equation">¶</a></span>\[\Pi_Q = \frac{Q_{long}}{Q_{short}} = \sqrt{\frac{h_{L_{sand}}-PR}{h_{L_{sand}}}}\]</div>
<div class="line-block">
<div class="line">Such that:</div>
<div class="line"><span class="math notranslate nohighlight">\(h_{L_{Sand}} =\)</span> the head loss in the sand bed</div>
<div class="line"><span class="math notranslate nohighlight">\(PR =\)</span> pressure recovery (as defined by: <span class="math notranslate nohighlight">\(\frac{V^2}{2g}\)</span>)</div>
</div>
<p><span class="math notranslate nohighlight">\(PR = h_{L_{sand}}(1- \Pi_Q^2)\)</span></p>
<p>These relationships define the head loss constraints of the filter.</p>
<p>The ratio, <span class="math notranslate nohighlight">\(\Pi_{Q}\)</span> has been  somewhat arbitrarily given a value of <span class="math notranslate nohighlight">\(0.85\)</span>, meaning the flow exiting the longest path is 85% of the flow exiting from the shortest path.</p>
<p>Thus from above:</p>
<p><span class="math notranslate nohighlight">\(1 - \Pi_{Q}^2 = .278 = \Pi_{ManifoldHeadLoss}\)</span></p>
<p>Where the ratio of the pressure recovery in the branches to the head loss through the clean bed (or through just the slots/holes in backwash) is:</p>
<p><span class="math notranslate nohighlight">\(\Pi_{ManifoldHeadLoss} = \frac{PR}{h_{L_{sand}}}\)</span></p>
<p><strong>make this useful</strong></p>
<p>This equation is used to determine the smallest pipe size that meets the pressure recovery constraint for a certain flow. It almost provides a maximum value for head loss within the system, summing the various pressure recovery terms and comparting to this value will show if the design makes sense. As the head loss through  the sand is known, the equation can be directly solved for pressure recovery. From the total filter flow the flow through any branch can be determined. As the pressure recovery term is directly related to the velocity in the pipe a maximum velocity can be determined from the PR term. This maximum velocity can be used to find the minimum area for the branches from pressure recovery, which can provide a pipe diameter. This value can be compared to the minimum determined by the fabrication constraint of the slotted pipes and the larger of the 2 minimums is used for the design.</p>
<p>Though the piezometric head profiles for the inlet and outlet manifolds for the middle layers may be parallel, meaning the pressure recovery is less constrained for a good flow distribution, a tight constraint is still needed for the outer manifolds where the velocity is 1/2 and the PR is 1/4 (because pressure recovery goes with the square of the velocity) that of the inner layer, while the term is smaller still in the bottom-most manifold where the velocity head is tiny as the diameter is larger to accommodate for full filter flow during backwash.</p>
<p>See the section on Pressure Recovery  in <span class="xref std std-ref">Filtration Intro</span> for more information if this is unclear.</p>
<dl class="simple">
<dt>The overall steps to find the total orifice area and number of orifices necessary:</dt><dd><ol class="arabic simple">
<li><p>Determine the fraction of flow that comes out of the longest branches</p></li>
<li><p>Set head loss to be low (&lt;5cm)</p></li>
<li><p>Use the flow that will be in the largest branch to determine the area</p></li>
<li><p>Set the area of one orifice to be the largest it can be due to fabrication constraints.</p></li>
<li><p>Divide the area obtains in 3 by the area of one orifice as determined in 4. This is the number of orifices necessary on the longest branch.</p></li>
</ol>
</dd>
</dl>
<p><em>The number of orifices for the other branches requires the spacing of the orifices which requires the trunk size, which is determined later, so hold tight.</em></p>
<p>As shown in the previous section maximum flow in a trunk will be either <span class="math notranslate nohighlight">\(Q_{Fi}\)</span> or <span class="math notranslate nohighlight">\(\frac{Q_{Fi}}{3}\)</span> (the equivalent of <span class="math notranslate nohighlight">\(2Q_{Layer}\)</span>). As we are concerned with maximum flows and corresponding maximum velocities, those flows are considered for the design.</p>
<p>In this case the longest branch is slightly less than <span class="math notranslate nohighlight">\(\frac{ID_{Fi}}{2}\)</span>. To keep the calculations simple the maximum fraction of the flow served by any branch would be in the longest branch, the approximate area of the filter layer served would be approximately the length of this branch time the spacing of the branches.</p>
<div class="figure align-center" id="id5">
<span id="figure-flow-fraction-branch"></span><a class="reference internal image-reference" href="../_images/figure_flow_fraction_branch.png"><img alt="filter schematic, interal image" src="../_images/figure_flow_fraction_branch.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">The red box shows the approximate area served by the longest branch. The area is slightly overestimated, but using a rectangular area and by assuming the branch is exactly half the length of the inner diameter ensures that the largest fraction possible does not exceed what is designed for.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>From that area, the fraction of the filter layer served by the hypothetical longest branch can be directly found by dividing that area by the total cross-sectional area of the filter.</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-5">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-5" title="Permalink to this equation">¶</a></span>\[\begin{split}\frac{(\frac{ID_{Fi}}{2} * S_{Branch})}{\pi*\frac{ID_{Fi}^2}{4}}  = \Pi_{branch}
\\ \\ Then: \\ \\
\Pi_{branch}*2Q_{FiLayer} = Q_{BranchMax}\end{split}\]</div>
<p>This describes the largest flow in any branch during forward filtration. For the backwash branches the only difference is with the flow:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-6">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-6" title="Permalink to this equation">¶</a></span>\[\begin{split}\frac{\frac{ID_{Fi}}{2} * S_{Branch}}{\pi*\frac{ID_{Fi}^2}{4}} =  \Pi_{branch}
\\ \\ Then: \\ \\
\Pi_{branch}*Q_{Fi} = Q_{BranchBWMax}\end{split}\]</div>
<p>These two flows can be used with the pressure recovery terms to determine the smallest branch sizes that can work.</p>
<p>Using this flow the total area of the inlet orifices can be found for the longest branch, this area can then describe the number of orifices and their spacing. The spacing then applies to all the branches not just the longest one.</p>
<p>Because the pressure recovery in the branches is the constraint in determining total orifice sizing, it is convenient to first consider the generic pressure recovery term:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-7">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-7" title="Permalink to this equation">¶</a></span>\[h_L = \frac{(\frac{Q}{\Pi*A*\epsilon})^2}{2g}\]</div>
<p>In the equation above the HL is equivalent to the pressure recovery, the velocity term has just been replaced with the flow to area ratio at the inlets or outlets. Depending on which inlet or outlet system is being looked at the porosity term and flow term will vary. Additionally, we are setting the head loss to be small so the term being found is the total area required to keep the head loss small. Thus it can be rearranged to:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-8">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-8" title="Permalink to this equation">¶</a></span>\[A = \frac{1}{\frac{(\sqrt{2g*h_L})*\Pi*\epsilon}{Q}}\]</div>
<p>The suggested design head loss for the inlets and outlets is 5 cm, but is flexible in the . The following table shows the other constraints used to solve for the required areas.</p>
<table class="docutils align-default" id="table-branch-head-loss">
<colgroup>
<col style="width: 22%" />
<col style="width: 17%" />
<col style="width: 26%" />
<col style="width: 16%" />
<col style="width: 12%" />
<col style="width: 8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p><span class="math notranslate nohighlight">\(Q\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(h_L\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(\epsilon\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(\Pi\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(g\)</span></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_{InletOrifices}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(Q_{BranchMax}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(h_{L_{InletOrificesFW}}= 5cm\)</span></p></td>
<td><p>1</p></td>
<td><p><span class="math notranslate nohighlight">\(\Pi_{VC}\)</span></p></td>
<td><p>g</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(A_{OutletSlots}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(Q_{BranchMax}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(h_{L_{OutletSlotsFW}}= 5cm\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\epsilon_{sand}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\Pi_{VC}\)</span></p></td>
<td><p>g</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_{BWorifices  }\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(Q_{BranchBWMax}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(h_{L_{BWorificesBW}}= 5cm\)</span></p></td>
<td><p>1</p></td>
<td><p><span class="math notranslate nohighlight">\(\Pi_{VC}\)</span></p></td>
<td><p>g</p></td>
</tr>
</tbody>
</table>
<p>Though the bottom inlet layer has two conditions for flow, forward filtration and backwash, the flow is six times higher during backwash, so the forward filtration condition is not considered, as it would not be the limiting head loss. For the same reason the top inlet is not considered because its flow will always be lower than that in the two inner inlets serving two layers.</p>
<p>This area is the total area of inlet/outlet space required along the longest branch.</p>
<p>If we assume that:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-9">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-9" title="Permalink to this equation">¶</a></span>\[\begin{split}D_{Orifice} = D_{OrificeMax} \\ \\ Then: \\ \\ D_{Orifice} = 0.25in\end{split}\]</div>
<p>This diameter can be used to find the area of one orifice, <span class="math notranslate nohighlight">\(A_{Orifice}\)</span>.</p>
<p>Then:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-10">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-10" title="Permalink to this equation">¶</a></span>\[\frac{A_{InletOrifices}}{A_{Orifice}} , \frac{A_{BWorifices}}{A_{Orifice}}\]</div>
<p>are the respective number of orifices necessary on the longest branch for the regular inlet manifolds and the backwash manifold respectively.</p>
<p>Those values divided by the length of the longest branch provides the spacing for the orifices. However here it become important to use the actual longest length of the branch, so that it is clear that all the orifices will fit.</p>
<p>The factors that makes the length of the branch different from simply <span class="math notranslate nohighlight">\(ID/2\)</span>, are the cap on the end and the width of the trunk. These can both be seen in <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure_branch_length</span></code>.</p>
<div class="figure align-center" id="id6">
<span id="figure-branch-length"></span><a class="reference internal image-reference" href="../_images/filter_branch_length.png"><img alt="filter manifold, internal image" src="../_images/filter_branch_length.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">This image shows an old image of a filter inlet manifold. The center dotted line shows the midline of the trunk, and the circle shows the cap on the end of one branch. The radius of the trunk and the depth of the cap at then end must be subtracted from the length to determine the spacing of the orifices. This image also shows how not all of the branch length is used for inlet orifices.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>Before getting to the diameter of the trunk, the branch diameter must be found. Following the same process as above it is possible to determine the area necessary to limit the pressure recovery term. Additionally there is a minimum branch constraint due to the fabrication of slotted pipes.</p>
<p><strong>mention slots as well since they have to be included, they can be in a different section but should still be around here somewhere</strong> They also depend on the size of the branch because of the curvature</p>
<p>As stated above the maximum flow in a trunk will be either <span class="math notranslate nohighlight">\(Q_{Fi}\)</span> or <span class="math notranslate nohighlight">\(\frac{Q_{Fi}}{3}\)</span> (the equivalent of <span class="math notranslate nohighlight">\(2Q_{Layer}\)</span>). As we are concerned with maximum flows and corresponding maximum velocities, those flows are considered for the design.</p>
<p>The number of branches is set based on the spacing constraint, thus all this section aims to find is an acceptable area of the branches to keep pressure recovery low to keep flow distribution even.</p>
<p>Again begin with:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-11">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-11" title="Permalink to this equation">¶</a></span>\[h_L = \frac{(\frac{Q}{\pi*A*\epsilon})^2}{2g}\]</div>
<p>And then rearrage so solve for area:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-12">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-12" title="Permalink to this equation">¶</a></span>\[A = \frac{1}{\frac{(\sqrt{2g*h_L})*\pi*\epsilon}{Q}}\]</div>
<p>Where, the conditions are the same as for the <span class="math notranslate nohighlight">\(A_{BwOrifices}\)</span> above except that <span class="math notranslate nohighlight">\(Q = Q_{Fi}\)</span> for the backwash condition and <span class="math notranslate nohighlight">\(Q = \frac{Q_{Fi}}{3}\)</span> for the forward filtration condition.</p>
<p>The areas determined is the minimum total area of the branches, <span class="math notranslate nohighlight">\(A_{BranchTotalMinBW}\)</span> and <span class="math notranslate nohighlight">\(A_{BranchTotalMinFW}\)</span>. As the number of branches is determined solely by the size of the filter, dividing this area by the number of branches yields the minimum area of an individual branch. Here is it important to remember that both sides of the trunk have branches!</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-13">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-13" title="Permalink to this equation">¶</a></span>\[\begin{split} Remember: \\
 N_{BranchTrunk} = 2*Round(\frac{ID_{Fi}}{B_{FiBranchMax}})
\\ So: \\
 A_{BranchMinBW} = \frac{A_{BranchTotalMinBW}}{N_{BranchTrunk}}
\\ and \\
 A_{BranchMinFW} = \frac{A_{BranchTotalMinFW}}{N_{BranchTrunk}}\end{split}\]</div>
<p>Those areas directly correspond to diameters. To keep the design consistent the same size pipe will be used for all branches so the larger of the two sizes (which will be from the backwash calculation) will be used to determine the size of the branches. If both values are smaller than the minimum needed to slot the pipes, then the predefined minimum will be used. If the diameter calculated is not a regular pipe inner diameter the next largest actual pipe size should be used.</p>
<p>Due to fabrication methods for the slotted pipes (manufacturing by machine), the slot width, <span class="math notranslate nohighlight">\(B_{slot}\)</span> is always 0.2 mm. The number of slot rows is also fixed at 2, because each branch has slots on both sides. This constrains the minimum size that the slotted pipes can be, because</p>
<p>the total slot area for one outlet layer needs to be able to accept <span class="math notranslate nohighlight">\(\frac{Q_{Fi}}{3}\)</span>, this includes two layers of slots on each branch.</p>
<p>The total area of the slots for one layer should be at least equal to the total orifice area on the inlet manifolds of the the inner two inlet layer (the ones that each serve <span class="math notranslate nohighlight">\(\frac{Q_{Fi}}{3}\)</span>). Assuming that flow will be distributed on the same way for the outlet manifold as it was on the inlet manifold, in terms of relative flow per branch, it then follows that the area of orifices on the longest outlet branch should be equal to the area of orifices on the longest inlet branch (which are the same length!):</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-14">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-14" title="Permalink to this equation">¶</a></span>\[A_{SlotsLongestBranch} = A_{OrificesLongestBranch}\]</div>
<p>Knowing the slot width makes determining the total slots length of the longest branch easy to find.</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-15">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-15" title="Permalink to this equation">¶</a></span>\[\frac{A_{SlotsLongestBranch}}{B_{Slot}} = L_{SlotsLongestBranch}\]</div>
<p>From the cumulative area of slots and the width of the slots, the total length of slots can be determined. This length of slots is for one side of one branch <em>yes?</em></p>
<p>As the branches are different lengths along one trunk, the number of slots is different per branch depending on the length, but the spacing is the same so the variation is accounted for.</p>
<p>In determining the trunk size both pressure recovery and the influence of the branches intercepting the trunks must be considered.</p>
<p><strong>Must figure out the importance of the valve effect on this to determine the algorithm</strong></p>
<p>See  <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure_estars_flow_schematic</span></code> for a schematic of the filter layers. For a schematic of flow during backwash see <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure_estars_bw_flow_schematic</span></code>.</p>
<div class="figure align-center" id="id7">
<span id="figure-estars-flow-schematic"></span><a class="reference internal image-reference" href="../_images/figure_flow_distribution_estars.png"><img alt="filter schematic, interal image" src="../_images/figure_flow_distribution_estars.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">This schematic shows the flows through every inlet and outlet components of the EStaRS system. Each of the outlets takes in flow from two filter layers as do the inner inlets. The outer inlets provide water for only one layer. The bottom inlet must also accommodate the flow required for backwash and is larger in diameter to account for this.</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<p>Because the 2 inner inlets (the ones that aren’t the backwash trunk or the uppermost trunk) distribute flow to two layers the flow between them is equal to <span class="math notranslate nohighlight">\(2Q_{FiLayer}\)</span> which is shown in the schematic. In a later section, we will show that the flow within each layer is not exactly even because of the head loss through various paths, but for the calculation of maximum flow, even flow is an appropriate guess.</p>
<div class="figure align-center" id="id8">
<span id="figure-estars-bw-flow-schematic"></span><a class="reference internal image-reference" href="../_images/figure_bw_flow_distribution.png"><img alt="filter schematic, interal image" src="../_images/figure_bw_flow_distribution.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">This schematic shows the flows through an EStaRS during backwash. For the design, it is assumed that filter is being used to full capacity so that flow total flow during forward filtration is equal to the backwash (design) flow. In practice those values might be different, in which case the flow is the design flow, <strong>not</strong> the sum of the filter layers. Rather than the outlet pipes, a separate backwash manifold is used to discard the water used during backwash.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<p>On each layer trunk, there are <span class="math notranslate nohighlight">\(N_{FiBranch}\)</span> branches on <strong>each side</strong> of the trunk. That means the total number of branches on each trunk is <span class="math notranslate nohighlight">\(2N_{FiBranch}\)</span></p>
<p>[This section needs to go above the section where you calculate the branch diameter given the PR constraint.]</p>
<p>The total allowable pressure recovery of the filter manifold is controlled by the head loss in each sand layer and the head loss ratio, <span class="math notranslate nohighlight">\(\Pi_{ManifoldHeadLoss}\)</span>.</p>
<p>The head loss through the sand layer, <span class="math notranslate nohighlight">\(HL_{FiCleanLayerMin}\)</span> is a function of layer depth, <span class="math notranslate nohighlight">\(H_{FiLayer}\)</span> and overall velocity of the filter , <span class="math notranslate nohighlight">\(\frac{Q_{FiLayer}}{A_{Fi}}\)</span>, using the Kozeny Equation in <span class="xref std std-ref">Headloss Requirement</span> in the Filtration Design section.</p>
<p>Using the definition of the pressure recovery ratio, the maximum allowable pressure recovery in the filter manifold can be calculated, this value is not necessarily the actual pressure recovery the system may see, just the allowable maximum:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-16">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-16" title="Permalink to this equation">¶</a></span>\[PR_{FiMax} = HL_{FiCleanLayerMin}*\Pi_{ManifoldHeadLoss}\]</div>
<p>Subtracting the previously calculated branch PR from this maximum determine how much PR is theoretically left for the trunks. The maximum trunk PR can then be calculated back to a velocity.
[The PR in the branches must be low in order to ensure uniform flow along the length of a branch. The PR in the Trunks must be low to ensure that each branch has the same piezometric head driving flow into (or out of) the filter. Also note that there will be another constraint for the trunk that is designed to get uniform flow distribution between filter layers. And one must consider the flow blockage in the trunk line caused by the branches when calculating the pressure recovery.]</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-17">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-17" title="Permalink to this equation">¶</a></span>\[ \begin{align}\begin{aligned}PR_{TrunkEst} = PR_{FiMax} - PR_{FiBwManBranchEst}\\V_{FiTrunkMaxPR} = \sqrt{2g*PR_{TrunkEst}}\end{aligned}\end{align} \]</div>
<p>The velocity is important because it, along with the known flow rate through the trunk, are used to find a theoretical area for the flow. This area sets and ideal ID for a trunk pipe. Using the pipe database allows a search for the closest match.</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-18">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-18" title="Permalink to this equation">¶</a></span>\[ID_{TrunkIdeal} = \sqrt{\frac{4*\frac{2*Q_{FiLayer}}{{V_{FiTrunkMaxPR}}}}   {\pi}}\]</div>
<p>In the pipe database the nearest, larger, pipe size is chosen for SDR 26. The associated ND is compared with <span class="math notranslate nohighlight">\(ND_{FiTrunkMinLow}\)</span>, whichever is larger is chosen as <span class="math notranslate nohighlight">\(ND_{FiTrunk}\)</span>. From this ND the ID is found knowin the pipe is SDR 26.</p>
<p>Then the PR term can be found:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-19">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-19" title="Permalink to this equation">¶</a></span>\[PR_{FiTrunk} = \frac{(\frac{2Q_{FiLayer}}{(\pi\frac{ID_{FiTrunk}^2}{4})})^2}{2g}\]</div>
<p>Knowing the actual (for this flow) PR term provides a better value for determining the allowable PR in the branches.</p>
<p>So now, the <span class="math notranslate nohighlight">\(PR_{FiBranchMax}\)</span> is the different between the allowable PR and the PR calculated for the trunk:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-20">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-20" title="Permalink to this equation">¶</a></span>\[PR_{FiBranchMax} = PR_{FiMax} - PR_{FiTrunk}\]</div>
<p>Then the maximum velocity in the branches can be found. Which, as above leads to the actual size of the branches.</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-21">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-21" title="Permalink to this equation">¶</a></span>\[V_{FiBranchMax} = \sqrt{2g*PR_{FiBranchMax}}\]</div>
<p>The ND is found by again comparing the <span class="math notranslate nohighlight">\(ND_{FiBranchMin}\)</span> with the ND that emerges from taking the ID as calculated from the velocity and the flow:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-22">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-22" title="Permalink to this equation">¶</a></span>\[ID_{FiBranchEst} = \sqrt { \frac{4}{\pi}(\frac{\frac{2Q_{FiLayer}}{2N_{FiBranch}}}{V_{FiBranchMax}})^2}\]</div>
<p>This ID is compared with available IDs of SDR26 and the nearest value that is above that ID is chosen to compare against <span class="math notranslate nohighlight">\(ND_{FiBranchMin}\)</span> as defined in the beginning.</p>
<p>For the chosen ND, the corresponding ID is used to determine the PR in the branches with SDR26.</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-23">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-23" title="Permalink to this equation">¶</a></span>\[PR_{FiBranch} = \frac{(\frac{\frac{2Q_{FiLayer}}{2N_{{FiBranch}}}}{(\pi\frac{ID_{FiBranch}^2}{4})})^2}{2g}\]</div>
<p>The sum of the PRs from the branches can then be compared to the maximum allowable PR term. If the design logic worked properly then <span class="math notranslate nohighlight">\((PR_{FiBranch} +  PR_{FiTrunk}) &lt; PR_{FiMax}\)</span> with  <span class="math notranslate nohighlight">\(PR_{FiBranch} +  PR_{FiTrunk} = PR_{FiMan}\)</span> indicating the pressure recovery in the Filter Manifold.</p>
<p>The second pressure recovery constraint is in the backwash branch during backwash. During backwash the lowest trunk sees all the flow at a higher velocity than any other trunk does during filtration meaning all of its branches experience a higher flow as well. Because the velocity is higher, the PR term will also be higher, so it must be constrained to maintain even flow.</p>
<p>The initial estimate of head loss through the holes is <span class="math notranslate nohighlight">\(HL_{FiBwOrifices} = 10cm\)</span>. [where did this come from? One proposal is the same constraint as we discussed with the horizontal filter. The head loss through the orifice must be close to the distance between orifices. This is to ensure that the entire bed fluidizes. If there is a section of the filter where the sand isn’t fluidized, then that sand will form an incline that is the angle of repose of sand in water. Thus, the maximum depth that the first covered orifice under the settled sand will be determined by the distance between orifices and the angle of repose of the sand. If we assume conservatively that the angle of repose is 45 degrees, then the depth of sand would equal the spacing between the orifices. And if the head loss through the orifices was equal to that depth of sand, then there would be enough water coming out of the first covered orifice to fluidize the sand above it.</p>
<p>Darn… My analysis in the previous paragraph is flawed because the water flows from the orifices into a big half pipe BEFORE coming into contact with sand. Thus, the head loss through the orifices DOES NOT help ensure that the sand fluidizes everywhere in the filter. Similarly, the orifices don’t have to be sized to get the same flow out of the first and last orifice in a branch because flow equalization will occur in the half pipe. So perhaps the goal is to get reasonable flow distribution between first and last orifice so that the equalization flow has a much lower velocity than the main flow in the branch. We need to figure this out! and this can go near the top of the design. My sense is that there may be a good deal of flexibility in the total orifice area.   ]</p>
<p>[Need to start by calculating the diameter of these orifices and somehow set the spacing between orifices. This requires a design algorithm. Not sure of the steps yet. I understand that the maximum size hole that can be drilled is something close to 1/4” because larger holes end up coming out the side of the gap between the wing pipe and the branch. Once you know the max diameter that can be used for the orifice (Juan should know this) then you can calculate the total maximum orifice area required (based on an algorithm that we need to invent). Then calculate the spacing between the orifices to get the required number of orifices.  ]</p>
<p>Using the head loss ratio, <span class="math notranslate nohighlight">\(\Pi_{ManifoldHeadLoss}\)</span> , the allowable PR can be determined: <span class="math notranslate nohighlight">\(PR_{FiBwManMax} = HL_{FiBwOrifices}*\Pi_{ManifoldHeadLoss}\)</span></p>
<p>Come back to this a little bit… depends on fabrication methods</p>
<p>[I believe these calculations can go above the pipe size calculations. I believe the orifice area is set by the backwash fluidization of the next covered orifice constraint. And I think that constraint is minimal because the orifices end up being very close together. ]</p>
<p>Knowing the PR in the BW manifold, the design head loss through the outlet orifices can be determined based on:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-24">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-24" title="Permalink to this equation">¶</a></span>\[HL_{BwOrifices} = \frac{PR_{BwManTotal}}{\Pi_{ManifoldHeadLoss}}\]</div>
<p>With this head loss the necessary total area of the orifices for the backwash branch can be determined using the orifice equation <strong>REF</strong>, as <span class="math notranslate nohighlight">\(HL_{BwOrifices}\)</span> , <span class="math notranslate nohighlight">\(\Pi_{VCOrifice}\)</span>, and <span class="math notranslate nohighlight">\(Q_{FiBw}\)</span> are known.</p>
<p>This area is doubled to find the area of the slots. [I am not sure why this is true? Because two layers are served perhaps?]</p>
<blockquote>
<div><div class="math notranslate nohighlight" id="equation-filtration-estars-design-25">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-25" title="Permalink to this equation">¶</a></span>\[A_{FiManSlots} = 2*A_{FiBwOrifices}\]</div>
</div></blockquote>
<p>Also the area of the backwash orifices is equal to <span class="math notranslate nohighlight">\(A_{FiTopManSlots}\)</span>, which is the area of the manifold that takes in backwash water for removal from the treatment train.</p>
<p>Regarding the inlets, those for backwash are determined differently than the orifices on the rest of the inlet branches. This section traces the process for the backwash branches and then the rest of the manifold branches.</p>
<p>The only difference between the two is the length of the branches. Because the backwash trunk is slightly larger than the rest of the trunks, the branches must be slightly shorter so that the whole manifold fits in the filter body.</p>
<p>Then for each the total number of orifices necessary for a layer of the manifold can be found by summing the array of number of holes (<span class="math notranslate nohighlight">\(N_{BranchOrifices}\)</span>) and multiplying by 2 to account for the trunks having branches on two sides.</p>
<p>The drill bit sizes considered are 1/16 inch, 1/8 inch, 3/16 in, and 1/4 inch. The maximum hole size is 1/4in because when the holes are larger they stick out from under the edge of the wings. This is constrained by the curvature of the wings as shown below in <strong>Figure XYZ</strong></p>
<p>Pipes 2, 4, and 6 (the outlet pipes) are all identical and the total head loss through the outlet system is approximately three times the <span class="math notranslate nohighlight">\(HL_{OutletSlotForWard}\)</span> as calculated based on the table above. The outlet pipes are the only pipes where the porosity of the sand is accounted for because the outlet slot system is the only place in the filter where the sand interfaces with the pipe openings. The exclusion zones prevent sand at the inlets and as such the porosity is not accounted for in any other head loss calculation, see <strong>FIGURE SOMETHING OR OTHER FOR IMAGE OF THE EXCLUSION ZONE</strong>. Pipe 7 experiences 2 different head losses depending on whether the filter is in forward filtration or backwash. Pipes 3 and 5 are also identical.</p>
<p>Additional note for <code class="xref std std-numref docutils literal notranslate"><span class="pre">table_branch_head_loss</span></code>. The pipes show the overall flow direction at each layer. The each of those numbers pipes, from a vertical cross-sections looks generally like the trunk and branches in <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure_circle_branches</span></code>.</p>
<div class="figure align-center" id="id9">
<span id="figure-circle-branches"></span><a class="reference internal image-reference" href="../_images/figure_circle_branches.png"><img alt="basic sketch of flow path within a manifold layer" src="../_images/figure_circle_branches.png" style="width: 60%;" /></a>
<p class="caption"><span class="caption-text">A generic sketch of one layer of a manifold. The yellow arrows indicate this is an influent manifold. The number of branches is variable depending on the size of the filter.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<p>Having these geometries and head losses determined means the parameters for the rest of the system can be determined, as most of it depends on the sizes of the trunks and branches.</p>
<p>The construction of the entrance and exit pipes are the main difference between the “conventional” filter entrance/exits tanks and the “Micky Mouse” design. The difference can be seen in the <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure_estars_comparison</span></code></p>
<div class="figure align-center" id="id10">
<span id="figure-estars-comparison"></span><a class="reference internal image-reference" href="../_images/figure_estars_comparison.png"><img alt="CAD &quot;conventional&quot; vs micky mouse photo design" src="../_images/figure_estars_comparison.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">These images show the difference in the two styles of EStaRS. In the image on the left, the “Micky Mouse” design is shown. the two pipes on the upper right and left are the entrance and exit tanks for the filter. The image on the right shows the EStaRS design that is more similar to the design of the OStaRS with a concrete entrance and exit system. Note that these two systems are for different flow rates which is why the image on the right shows two modules.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<p>In this sections the sizes of these tanks are determined.</p>
<p>The size of the entrance and exit tank pipe dimensions is constrained by the sizes and number of the pipes that feed into or out of each tank.</p>
<p>The entrance needs to have space for: 4 inlets, one of which is the bottom, slightly larger pipe for backwash, an inlet from the sedimentation tank, and an overflow pipe, so that if the entrance pipe overflows the water is directed elsewhere rather than just spilling all over the place. The outlet tank pipe requires space for three outlets from the filter, an outlet to the plant exit, and a drain in the event that maintenance needs to be done or if the effluent quality is not sufficient.</p>
<p>The pipes connect lengthwise with the pipe so it is their total area that must fit with the area of the tanks. In addition to the pipe area, they will be connected with flexible couplings, which add extra space considerations. Additionally, for ease of fabrication the flexible couplings should not be closer than 1 cm to each other. The pipe sized determined in this section come from using Onshape to determine feasible pipe placements (as there are many configurations that may fit)</p>
<p>The minimum sizes for the trunks and drains specified at the beginning of this file turn out to be sufficient for each design, therefore the entrance tank must accommodate: 4 2” pipes and 1 3” pipes (with the overflow being the only pipe that comes from the side of the tank). These dimensions require a 12in pipe. The exit tank requires 4 2” pipes and 1 3” pipe as well, but the drain is included in that number. Thus a 12” pipe is required for the exit as well.</p>
<p>In determining the total sand depth and total length of the filter pipe several distances are assumed:</p>
<div class="line-block">
<div class="line"><span class="math notranslate nohighlight">\(T_{BottomCap} = 1 in\)</span> This is the thickness of the cap at the bottom of the filter, without this cap the pipe would be open on the bottom.</div>
<div class="line"><span class="math notranslate nohighlight">\(H_{TopCap} = 6 in\)</span> This is the overlap of the cap onto the filter pipe.</div>
<div class="line"><span class="math notranslate nohighlight">\(H_{FilterValve} = 10 cm\)</span> This is the height of the sand drain. It should not opened unless all the sand is to come out of the filter!</div>
<div class="line"><span class="math notranslate nohighlight">\(H_{FiBottom} = 5cm + T_{BottomCap}\)</span> This is the elevation at which the sand starts, and exists because the cap has thickness.</div>
<div class="line"><span class="math notranslate nohighlight">\(H_{FluidizedBedtoSiphon} = 20cm\)</span> This is a safety distance to prevent sand from ever escaping the filter during filtration or backwash.</div>
</div>
<p>The minimum height of sand in the filter is the depth of each filter layer times the number of filter layers plus the outer radius of the backwash trunk. The outer radius is added because the layer height is defined as the center-to-center distance of the layer, but on the bottom layer there is an additional radius depth of sand, as shown in the following equation.</p>
<p><span class="math notranslate nohighlight">\(H_{FiSand} = N_{Layer}*H_{FiLayerMin} + OR_{BwTrunk}\)</span> <strong>the actual height should just be calculated here?</strong></p>
<p>The active sand depth (the sand actually used during filtration) is just the number of layer times sand depth. This depth is useful to consider how much sand is being used during filtrations. <strong>should this consider the sand around each branch/trunk or does that not matter?</strong></p>
<p><span class="math notranslate nohighlight">\(H_{FiSandActive} = N_{Layer}*{H_FiLayerMin}\)</span></p>
<p>The total height of the filter needs to account for the safety distance to prevent sand escape in addition to the necessary space for the sand to fluidize. At the velocity backwash occurs, the ratio of the fluidized bed height to the settled bed height is: <span class="math notranslate nohighlight">\(\Pi_{FiFluidized} = 1.3\)</span></p>
<p>It is assumed that all of the sand fluidizes so that:</p>
<p><span class="math notranslate nohighlight">\(H_{FluidizedBed} = \Pi_{FiFluidized}*H_{FiSand}\)</span> <strong>make this variable match up</strong></p>
<p>Then, the height of the filter, characterized as a length because it is in the direction of flow is the sum of these components:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-26">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-26" title="Permalink to this equation">¶</a></span>\[L_{FilterBody} = H_{FiBottom} + H_{FluidizedBed} +  H_{FluidizedBedtoSiphon} + OD_{BWTrunkFitting} + S_{Fitting}\]</div>
<p>Where <span class="math notranslate nohighlight">\(S_Fitting\)</span> is the spacing of the fitting? <strong>But what does this look like? Add a pic</strong></p>
<p>This length comes out to be around 2 meters which is much less than that required for an OStaRS!</p>
<p>One the depth of the fluidized bed is determined, the steady state head loss during backwash can be determined. Knowing this will inform later assumptions about relative head loss in the system.</p>
<p>The following expression is used to find this value:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-27">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-27" title="Permalink to this equation">¶</a></span>\[HL_{BwSS} = \frac{H_{FiSand}*(\rho_{Sand} - \rho_{Water})*(1 - \epsilon_{Sand})}{\rho_{Water}}\]</div>
<p>This head loss value should be very close to the depth of the settled sand bed.  This equation for head loss comes from <strong>…where does it come from….</strong></p>
<p>The head loss of a dirty bed is taken as <span class="math notranslate nohighlight">\(HL_{FiDirty} = 0.75m\)</span> As a result the height in the filter for backwash initiation to occur is the sum of head loss in the other components (<strong>check this</strong>).</p>
<p>Now that the sand layer depth is set the Kozeny Head Loss can be determined for the clean bed and the head loss through various flow paths can be determined.</p>
<p>First use the Kozeny equation from <span class="xref std std-ref">Headloss Requirements</span> to find the head loss in each of the sand layers. In the design for the OStaRS a different layer height may be used for the bottom layer to account for the larger backwash pipe, but in the EStaRS that difference does not matter, as that additional depth does not contain head loss that matter for the flow.</p>
<p>As the filter has 6 layers there are six possible paths for the water to take. The calculations for head loss through each layer depends specifically on which layer when it comes to minor loss coefficients and lengths of flow paths but the overall process is the same. This section outlines the algorithm without going into the specific calculations necessary for the head loss determination.</p>
<p>In each path, the path head loss is the sum of : inlet plumbing major and minor losses, sand layer losses, and outlet plumbing (for the relevant flow) minor losses</p>
<p>The design steps are as follows:</p>
<ol class="arabic simple">
<li><p>Find the max head loss through the respective paths (Q1 - Q6).</p></li>
<li><p>Find the min head loss through the respective paths (Q1 - Q6).</p></li>
<li><p>Find the average head loss of the paths <span class="math notranslate nohighlight">\((\frac{sum(HL)}{6})\)</span> (<em>This average is a theoretical term because the flow distribution will change slightly to make the head loss pretty much even in each path (otherwise flow distribution would be a non-issue) It is expected that each layer will have a head loss close to this average</em>)</p></li>
<li><p>Find <span class="math notranslate nohighlight">\(\Pi_{layer}\)</span>. The ratio of  the flow distribution. The goal is to be close to 1. This term is calulated as the square root of the ratio of the minimum path head loss to the maximum path head loss. <span class="math notranslate nohighlight">\(\Pi_{layer}\)</span> is a check to ensure all paths provide approximately the same impediment to flow.</p></li>
</ol>
<p>The siphon in the EStaRS system is different from the OStaRS system because it doesn’t involve air to create suction. It acts simply as an exit for water at the top of the filter. This system only works because the entire filter is enclosed, meaning if the head loss out through the siphon pipe is less than going out the other exits, that is the flow path the water will take. Based on this strict definition of the siphon, this system isn’t really a siphon to maintain parallel naming to the OStaRS, it is called that.</p>
<div class="figure align-center" id="id11">
<span id="figure-siphon-schematic"></span><a class="reference internal image-reference" href="../_images/figure_siphon_schematic.png"><img alt="siphon schematic for EStaRS systems" src="../_images/figure_siphon_schematic.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">This figure shows the important components to the siphon system in an EStaRS system. The component labelled entrance tank either the filter entrance box (for the Micky Mouse design) or the concrete filter entrance box. In either design the head loss calculations are the same.</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<p>It works by simply opening the siphon valve as labelled in <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure_siphon_schematic</span></code>, then the inlet pipes are closed in the entrance tank with pipe stubs starting at the top, eventually leaving only the backwash pipe open. That’s it! To end backwash, the process is reversed. Inlets are opened back up one at time, and THEN the valve is closed. Though this process is simple it requires some finesse get right. If all the inlet are closed immediately then the water level in the filter entrance tank will drop too low and air will get in the filter. Air in the filter causes head loss problems and is unwanted. To avoid this the pipe stubs to close the inlets are wiggled around to act as valves so that the water level during backwash is around 10cm above the bottom of the filter entrance tank. <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure_siphon_schematic</span></code> has this value labelled.</p>
<p>It is important to maintain this height because the height of the water level during backwash as compared to the height of the outlet of the siphon pipe controls the backwash flow. If the water level is too low, the sand may not fluidize. If the water level is too high, the sand may over-fluidize and be washed out of the filter.</p>
<p>The pipe size for the siphon is the same as the backwash trunk: <span class="math notranslate nohighlight">\(ND_{Siphon} = ND_{BwTrunk}\)</span>, this diameter is really a minimum to ensure the siphon pipe doesn’t accumulate too much head loss.</p>
<p>The preliminary estimate of siphon length is twice the length of the filter: <span class="math notranslate nohighlight">\(L_{SiphonEst} = 2*L_{FilterBody}\)</span>. By making this initial assumption the major losses through this length of the siphon piping can be calculated.</p>
<p>There are assumed to be minor losses in the entrance, exit, and in three elbows.</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-28">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-28" title="Permalink to this equation">¶</a></span>\[K_{FiSiphon} = K_{PipeEnt} + 3*K_{Elbow90} + K_{PipeExit}\]</div>
<p>The maximum head loss for siphon initiation is the sum of head losses of other predetermined quantities including:</p>
<p><span class="math notranslate nohighlight">\(HL_{BWinitiation}\)</span> (From head loss section)
<span class="math notranslate nohighlight">\(HL_{FiForwardNoSuckAir}\)</span> (The height the water level needs to be to stop air from getting into the filter.)
<span class="math notranslate nohighlight">\(HL_{FiDirty}\)</span>  (as defined in Expert Inputs) (The height water is allowed to rise in the entrance tank before backwash should be started, this varies on the style of filter. See <code class="xref std std-numref docutils literal notranslate"><span class="pre">table_comparsion_filters</span></code> for the different values)
<span class="math notranslate nohighlight">\(HL_{BwInletPlumbing}\)</span>
<span class="math notranslate nohighlight">\(HL_{SiphonMax}\)</span> (as defined in expert inputs) (the maximum head loss allowed through the siphon at stea)</p>
<p>with  <span class="math notranslate nohighlight">\(H_{SiphonNoSuckAir}\)</span> subtracted</p>
<p>This value represents the highest the water can be over the siphon exit.</p>
<p>To determine a more appropriate siphon head loss the actual head losses are determined.</p>
<p>The head loss of the siphon pipe is determined by major losses resulting from the backwash flow through the pipe. This pipe is labelled in the schematic.</p>
<p>The outlet system head loss is taken as a head loss from a weir using the backwash flow and inner diameter of the siphon pipe.</p>
<p>The orifice head loss of the siphon (where it connects from the filter body into the siphon pipe) is determined using the orifice equation with the inner diameter, the Vena Contracta coefficient, and the backwash flow as inputs.</p>
<p>From those calculated parameters the steady state backwash head loss can be found as follows:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-29">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-29" title="Permalink to this equation">¶</a></span>\[HL_{FiBwTotalSS} = HL_{BwInletPlumbing} + HL_{BwSS} + HL_{SiphonOrifice} + HL_{FiSiphonPipe} + HL_{SiphonOutlet}\]</div>
<p>This is the height that must exist between the siphon outlet and 10 cm above the bottom of the filter entrance box, as shown in the schematic. Because the backwash system works using the difference in elevation getting these values correct is critical.</p>
<p>Additionally, the density of the fluidized sand can be determined.</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-30">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-30" title="Permalink to this equation">¶</a></span>\[\rho_{Fluidized} = \rho_{H2O}*\epsilon_{Sand}*\Pi_{Fluidized} + \frac{\rho_{FiSand}*(1-\epsilon_{sand})}{\Pi_{Fluidized}}\]</div>
<p>Determining the sand volume allows for cost estimation and stability assessments of the filter. As sand is only in the main filter body that is the volume of largest concern. Most generally, the amount of sand needed is the volume of sand that would fit into the filter body to the proper height with the volume of the pipe manifold subtracted, because volume containing pipes should not have sand.</p>
<p>The plumbing within the filter body consists of the Backwash Trunk, the other inlet/outlet trunks, and the branches.</p>
<p>Approximating each of these as cylinders and excluding the small volume taken up by pipe caps, this calculation is very straight forward.</p>
<p>The volume of the backwash trunk is: <span class="math notranslate nohighlight">\(\frac{\pi}{4}*OD_{BWTrunk}^2*ID_{FiPipe}\)</span></p>
<p>The volume of the rest of the trunks is <span class="math notranslate nohighlight">\(\frac{\pi}{4}*OD_{Trunks}^2*ID_{FiPipe}*6\)</span>
where 6 is the number of trunks excluding the backwash trunk.</p>
<p>The volume occupied by the branches is <span class="math notranslate nohighlight">\(OD_{Branches}^2 *L_{TotalBranches}*7\)</span></p>
<p>Where 7 is the number of layers of branches, and <span class="math notranslate nohighlight">\(L_{TotalBranches}\)</span> the total lengths of the branches for one filter layer.</p>
<p>Thus the total plumbing volume is:</p>
<p><span class="math notranslate nohighlight">\(\rlap{-} V_{FiPlumbing} = \rlap{-} V_{BWTrunk} + \rlap{-} V_{Trunks} + \rlap{-} V_{Branches}\)</span></p>
<p>Then the total sand volvume in the filter is the volume of the filter (a function of its heigth and area) minus the volume of the plumbing.</p>
<p><span class="math notranslate nohighlight">\(\rlap{-} V_{SandTotal} = (A_{Fi}*H_{FiSandLow}) - \rlap{-} V_{FiPlumbing}\)</span>.</p>
<p>Multplying the density of the sand, <span class="math notranslate nohighlight">\(\rho_{Sand}\)</span> by the volume of the sand gives the mass of the sand, <span class="math notranslate nohighlight">\(M_{Sand}\)</span></p>
<p>The mass of one sand bag, <span class="math notranslate nohighlight">\(M_{SandBag}\)</span> is 50 pounds so the number of sand bags can be determined by: <span class="math notranslate nohighlight">\(N_{Fi}*\frac{M_{Sand}}{M_{SandBag}}\)</span> (rounded up to a whole number).</p>
<p>As a safety factor, this value is multiplied by 1.25 to get the total number of sand bags:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-31">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-31" title="Permalink to this equation">¶</a></span>\[N_{SandBag} = 1.25(N_{Fi}*\frac{M_{Sand}}{M_{SandBag}})\]</div>
<p>For construction and cost estimates the PVC material quantities can be found.</p>
<p>The total length of the largest diameter pipe  for the filter body, <span class="math notranslate nohighlight">\(L_{TotalFiPipe}\)</span> is equal to the length of one filter times the number of filters: <span class="math notranslate nohighlight">\(L_{FilterBody}*N_{Fi}\)</span></p>
<p>The total length of pipe for the entrance and exit tanks is:</p>
<p><span class="math notranslate nohighlight">\(L_{TotalEntExitPipe} = N_{Fi}*(H_{EntranceTank} + H_{ExitTank})\)</span></p>
<p>The total lengths of the branch manifold piping is the sum of the total manifold piping of one layer times 3, for the three inlets which are all the same size (the slotted pipes are ordered separately because they cannot be hand fabricated at this point). This value is multiplied by 1.5 to account the wings that create the gravity exclusion zone around the inlets, wings are half pipes of the same size!  Thus:</p>
<div class="math notranslate nohighlight" id="equation-filtration-estars-design-32">
<span class="eqno">()<a class="headerlink" href="#equation-filtration-estars-design-32" title="Permalink to this equation">¶</a></span>\[L_{TotalBranchManifold} = 1.5*(3*\Sigma L_{FiManBranch})\]</div>
<p>The lengths of the slotted pipes would be just <span class="math notranslate nohighlight">\(3*\Sigma L_{FiManBranch}\)</span>, where (in both) <span class="math notranslate nohighlight">\(L_{FiManBranch}\)</span> is an array of lengths for an entire filter layer</p>
<blockquote>
<div><p><strong>note from the writer of this section, at the time of writing is it unclear if the filter manifolds can be constructed with one branch serving both sides of the trunk, this section assumes it can and is being done, so elsewhere in this code the array of branch lengths may just be an array of branches on one side of the trunk! Beware of this as it can cause problems as the lengths will be off by around 2x! If this is resolved in the future all sections will be updated to contain the most correct information</strong></p>
</div></blockquote>
<p>Lastly, the number of wings to be made is the number or filters times the number of branches (per side) per layer times 4, as there are 4 inlets which require wings!</p>
<p><span class="math notranslate nohighlight">\(N_{Wing}\)</span> is equal to <span class="math notranslate nohighlight">\(N_{Fi}*2N_{FiBranchLow}*4\)</span>.</p>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, AguaClara Reach.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>