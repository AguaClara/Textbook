

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Filtration Theory and Future Work &mdash; AguaClara Textbook EXPERIMENTAL documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script async="async" src="../_static/mathjax_config.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Filtration Design Solution" href="Filtration_Design_Solution.html" />
    <link rel="prev" title="Filtration Design" href="Filtration_Design.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AguaClara Textbook
          

          
          </a>

          
            
            
              <div class="version">
                EXPERIMENTAL
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Acknowledgements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Authors.html">Authors</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 1: Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Introduction.html">The Physics of Water Treatment Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Grand_Challenges.html">AguaClara Treatment</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 2: Review: Fluid Mechanics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Review/Review_Fluid_Mechanics.html">Fluid Mechanics Review</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Review/Review_Fluid_Mechanics_Derivations.html">Review: Fluid Mechanics Derivations</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 3: Flocs, Fractals, and Forces</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Flocs_Fractals_and_Forces/FFF_Intro.html">Flocs, Fractals, Forces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocs_Fractals_and_Forces/FFF_Suspensions.html">Fluidized Suspensions</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 4: Fluid Deformation and Energy Dissipation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Fluid_Deformation_and_Energy_Dissipation/FDED_Intro.html">Energy Dissipation Rate, Velocity Gradient, and Mixing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fluid_Deformation_and_Energy_Dissipation/FDED_Derivations.html">Fluid Deformation and Energy Dissipation Derivations</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 5: Chemistry of Water Treatment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Chemistry_of_Water_Treatment/Chemistry_Intro.html">Chemistry of Coagulant Nanoparticles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chemistry_of_Water_Treatment/Chemistry_Derivations.html">Carbonate Reactions, Buffering, and pH</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 6: Flow Control and Measurement</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Intro.html">Constant Head Tanks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Design.html">AguaClara Flow Control and Measurement Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Derivations.html">Flow Control and Measurement Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/FCM_Solution.html">Flow Control and Measurement Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flow_Control_and_Measurement/ET_Design.html">Entrance Tank Design</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 7: Rapid Mix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Intro.html">Rapid Mix Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Design.html">Rapid Mix Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Derivations.html">Rapid Mix Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Examples.html">Rapid Mix: Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Theory_and_Future_Work.html">Rapid Mix Theory and Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Mechanical_Solution.html">Rapid Mix Mechanical Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rapid_Mix/RM_Design_Solution.html">Rapid Mix Design Solution</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 8: Flocculation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Model.html">AguaClara Hydraulic Flocculation Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Design.html">Flocculation Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Derivations.html">Flocculation Derivations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Theory_and_Future_Work.html">Flocculation Theory and Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Examples.html">Flocculation Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Mechanical_Solution.html">Mechanical Flocculator Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Model_Solution.html">Flocculation Model Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flocculation/Floc_Design_Solution.html">Flocculator Design Solution</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 9: Sedimentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Intro.html">Sedimentation Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Design.html">Sedimentation Tank Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Derivations.html">AguaClara Sedimentation Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Theory_and_Future_Work.html">Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Examples.html">Sedimentation Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sedimentation/Sed_Design_Solution.html">Sedimentation Design Solution</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 10: Filtration</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Filtration_Intro.html">Filtration  Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Filtration_Intro.html#filtration-theory">Filtration Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="Filtration_Design.html">Filtration Design</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Filtration Theory and Future Work</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#maximum-velocity-in-constrictions">Maximum velocity in constrictions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shear-big-flocs-to-improve-filter-performance">Shear big flocs to improve filter performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#floc-size-and-velocity-gradient-calculations">Floc size and velocity gradient calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#volume-of-flocs-per-pore">Volume of flocs per pore</a></li>
<li class="toctree-l2"><a class="reference internal" href="#particle-removal-efficiency">Particle removal efficiency</a></li>
<li class="toctree-l2"><a class="reference internal" href="#proposed-experiments-and-inventions">Proposed experiments and inventions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Filtration_Design_Solution.html">Filtration Design Solution</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 11: Hydraulics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Hydraulics/Hydraulics_Intro.html">Hydraulics Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 12: Dissolved Gas</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Dissolved_Gas/DG_Intro.html">Dissolved Gas Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 13: Fluoride</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Fluoride/Fluoride_Intro.html">Fluoride Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Chapter 14: Troubleshooting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/Troubleshooting.html">Plant Operation Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/Troubleshooting.html#high-head-loss-after-backwash-in-estars">High Head Loss After Backwash in EStaRS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/Troubleshooting.html#encrustation-of-filter-pipes-at-las-vegas">Encrustation of Filter Pipes at Las Vegas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/Troubleshooting.html#slime-at-las-vegas">Slime at Las Vegas</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix 1</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Python_Tutorial.html">Python Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributor's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/rst_intro.html">Introduction to RST and Sphinx for Textbook Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/example_aguaclara_rst.html">Functionality in RST and AguaClara Convention</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Textbook_Creation_Help/parameter_convention_list.html">Parameter Convention List</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AguaClara Textbook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Filtration Theory and Future Work</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/Filtration/Filtration_Theory_and_Future_Work.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="filtration-theory-and-future-work">
<span id="title-filtration-theory-and-future-work"></span><h1>Filtration Theory and Future Work<a class="headerlink" href="#filtration-theory-and-future-work" title="Permalink to this headline">¶</a></h1>
<div class="section" id="maximum-velocity-in-constrictions">
<h2>Maximum velocity in constrictions<a class="headerlink" href="#maximum-velocity-in-constrictions" title="Permalink to this headline">¶</a></h2>
<p>The maximum velocity in a pore is set by the strength of the coagulant bonds and the size of the core particles that are being captured by the filter. The drag force on the core particle must be balanced by the chemical bond strength and that relationship is given by Equation <a class="reference internal" href="../Flocs_Fractals_and_Forces/FFF_Intro.html#equation-fbond-of-v-constriction">(99)</a>.</p>
<p>The minimum diameter of a particle deposition constriction is set by the maximum constriction velocity, <span class="math notranslate nohighlight">\(v_{constriction_{max}}\)</span>.</p>
<div class="math notranslate nohighlight" id="equation-eq-d-constriction-min">
<span class="eqno">(632)<a class="headerlink" href="#equation-eq-d-constriction-min" title="Permalink to this equation">¶</a></span>\[  D_{constriction_{min}} = \Lambda_{pore} \sqrt\frac{4 v_a}{\pi v_{constriction_{max}}}\]</div>
<p>The head loss through a flow constriction can be estimated from the head loss through a flow expansion. We will use the form of the expansion Equation <a class="reference internal" href="../Review/Review_Fluid_Mechanics.html#equation-eq-exp-v-in">(21)</a> that is based on the contraction velocity. The jet is assumed to expand sufficiently so that the residual kinetic energy is insignificant.</p>
<div class="math notranslate nohighlight" id="equation-eq-exp-v-constriction">
<span class="eqno">(633)<a class="headerlink" href="#equation-eq-exp-v-constriction" title="Permalink to this equation">¶</a></span>\[   h_{e_{constriction}} =  \frac{\bar v_{constriction_{max}}^2}{2g}\]</div>
<p>The number of deposited constrictions per unit depth in a filter is</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-0">
<span class="eqno">(634)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-0" title="Permalink to this equation">¶</a></span>\[N_{constrictions_{series}} = \frac{H_{filter}}{\Lambda_{pore}}\]</div>
<p>The total head loss in a filter if taken to the point where the active filtration zone exited the filter and all pores were constricted would be</p>
<div class="math notranslate nohighlight" id="equation-eq-he-filter">
<span class="eqno">(635)<a class="headerlink" href="#equation-eq-he-filter" title="Permalink to this equation">¶</a></span>\[  h_{e_{filter_{max}}} = \frac{H_{filter}}{\Lambda_{pore}}  \frac{\bar v_{constriction_{max}}^2}{2g}\]</div>
<p>The effect of increasing the pore size on terminal head loss is to decrease the <em>final</em> head loss when the active zone reaches the bottom of the filter because of the effect of <span class="math notranslate nohighlight">\(\Lambda_{pore}\)</span>. Note that this does not yet address the rate of head loss accumulation which is expected to be a function of sand grain diameter.</p>
<p>We can solve Equation <a class="reference internal" href="#equation-eq-he-filter">(635)</a> for maximum constriction velocity based on experimental measurements of the head loss at filter failure that is due to constrictions. Note that this head loss does NOT include the clean bed head loss.</p>
<div class="math notranslate nohighlight" id="equation-eq-he-filter2">
<span class="eqno">(636)<a class="headerlink" href="#equation-eq-he-filter2" title="Permalink to this equation">¶</a></span>\[  v_{constriction_{max}} = \sqrt{ \frac{2g\Lambda_{pore}}{H_{filter}}h_{e_{filter_{max}}}}\]</div>
<p>From <a class="reference internal" href="Filtration_Intro.html#figure-head-loss-vs-time"><span class="std std-numref">Fig. 192</span></a> we have an estimate of 80 cm of head loss through a 20 cm bed of 0.5 mm diameter sand. This gives an estimate of 163 mm/s for the constriction velocity. This can be combined with Equation <a class="reference internal" href="../Flocs_Fractals_and_Forces/FFF_Intro.html#equation-fbond-of-v-constriction">(99)</a> to estimate the coagulant bond strength to be 3.9 nN.</p>
</div>
<div class="section" id="shear-big-flocs-to-improve-filter-performance">
<span id="heading-shear-big-flocs-to-improve-filter-performance"></span><h2>Shear big flocs to improve filter performance<a class="headerlink" href="#shear-big-flocs-to-improve-filter-performance" title="Permalink to this headline">¶</a></h2>
<p>Here we explore the possibility of breaking flocs as they enter the filter bed to eliminate large flocs that may be reducing filter performance.</p>
<p>Primary particles have the lowest probability of hitting the wall in a constriction. Thus primary particles can travel the greatest distance through the active zone and still have a very small chance of being deposited near the end of the active zone. Thus it is possible that primary particles set the maximum length of the active zone and flocs tend to fill in the active zone at the upstream end. The larger the floc the more likely it will fill in an upstream constriction and thus shorten the active zone.</p>
<p>This suggests that one way to improve filter performance is to have a zone of very high shear that rips flocs apart so that they don’t fill in the upstream pores in the active zone so quickly. This is because smaller flocs will not be removed as efficiently by each constriction and thus they will penetrate deeper into the active zone. One possible method to create a high shear zone is to size the flow injection area to achieve high shear through the first sand grains. The idea is to shred incoming flocs so they have a lower probability of being removed per pore and thus more of these small flocs penetrate deeper into the active filtration zone before being captured. Smaller flocs are also more dense and thus don’t fill up the available volume in the constrictions as fast as the large flocs that they came from.</p>
<p>We need an estimate of the shear through the first pores as the water enters the sand. The Kozeny equation is valid up to a particle Reynolds number of 1 (<a class="reference internal" href="../Fluid_Deformation_and_Energy_Dissipation/FDED_Derivations.html#equation-eq-re-porous-media">(203)</a>). The Reynolds number at this proposed flow injection site will be much larger than 1 and thus the Ergun equation (<a class="reference internal" href="../Fluid_Deformation_and_Energy_Dissipation/FDED_Derivations.html#equation-eq-ergun">(201)</a>) that is valid for laminar and turbulent flow in porous media will be used.</p>
<p>We will use the Camp Stein velocity gradient to estimate injection velocity required to create very small flocs. The important parameter for floc break up is a force that can be obtained from the velocity gradient multiplied by the dynamic viscosity.</p>
<p>Solving <a class="reference internal" href="../Fluid_Deformation_and_Energy_Dissipation/FDED_Derivations.html#equation-eq-g-cs-porous-media">(208)</a> for the approach velocity, <span class="math notranslate nohighlight">\(v_a\)</span>, we obtain</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-1">
<span class="eqno">(637)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-1" title="Permalink to this equation">¶</a></span>\[v_a = \left( G_{CS}^2 \frac{2\nu D_{sand}}{f_{\phi}} \frac{\phi^4}{(1-\phi)} \right)^{\frac{1}{3}}\]</div>
<p>to estimate the injection area that should be used to break up flocs entering the sand bed.</p>
</div>
<div class="section" id="floc-size-and-velocity-gradient-calculations">
<span id="heading-floc-size-and-velocity-gradient-calculations"></span><h2>Floc size and velocity gradient calculations<a class="headerlink" href="#floc-size-and-velocity-gradient-calculations" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">aguaclara.core.physchem</span> <span class="kn">as</span> <span class="nn">pc</span>
<span class="kn">from</span> <span class="nn">aguaclara.core.units</span> <span class="kn">import</span> <span class="n">unit_registry</span> <span class="k">as</span> <span class="n">u</span>
<span class="kn">import</span> <span class="nn">aguaclara.research.floc_model</span> <span class="kn">as</span> <span class="nn">fm</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">N_layers</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">v_filter_backwash</span> <span class="o">=</span> <span class="mi">11</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span>
<span class="n">v_a</span> <span class="o">=</span> <span class="n">v_filter_backwash</span><span class="o">/</span><span class="n">N_layers</span>
<span class="n">Porosity</span> <span class="o">=</span> <span class="mf">0.4</span>
<span class="n">D_sand</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">mm</span>
<span class="c1"># the following is just a guess at pore size</span>
<span class="n">D_pore</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">D_sand</span>
<span class="n">Temperature</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">degC</span>
<span class="n">L</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">cm</span>
<span class="n">Q_waterfall</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span>
<span class="n">v_waterfall</span><span class="o">=</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">pc</span><span class="o">.</span><span class="n">gravity</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="mi">40</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">cm</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">m</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
<span class="n">v_waterfall</span>
<span class="c1">#use continuity to get diameter of waterfall</span>
<span class="n">D_waterfall</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">Q_waterfall</span><span class="o">/</span><span class="n">v_waterfall</span> <span class="o">*</span><span class="mi">4</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">cm</span><span class="p">)</span>
<span class="n">D_waterfall</span>
<span class="n">Pi_JetRound</span> <span class="o">=</span> <span class="mf">0.08</span>
<span class="n">G_Max_waterfall</span> <span class="o">=</span> <span class="p">(</span><span class="n">v_waterfall</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">Pi_JetRound</span><span class="o">*</span><span class="n">v_waterfall</span><span class="o">/</span><span class="p">(</span><span class="n">pc</span><span class="o">.</span><span class="n">viscosity_kinematic</span><span class="p">(</span><span class="n">Temperature</span><span class="p">)</span><span class="o">*</span><span class="n">D_waterfall</span><span class="p">)))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">Hz</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The maximum velocity gradient in the plunging jet in the filter inlet box is &#39;</span><span class="p">,</span><span class="n">G_Max_waterfall</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="c1"># now estimate the size of this floc</span>
<span class="n">EDR_waterfall</span> <span class="o">=</span> <span class="p">(</span><span class="n">G_Max_waterfall</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="n">pc</span><span class="o">.</span><span class="n">viscosity_kinematic</span><span class="p">(</span><span class="n">Temperature</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mW</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">kg</span><span class="p">)</span>
<span class="n">EDR_waterfall</span>
<span class="n">D_floc_waterfall</span> <span class="o">=</span> <span class="p">(</span><span class="n">fm</span><span class="o">.</span><span class="n">diam_floc_max</span><span class="p">(</span><span class="n">G_Max_waterfall</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="n">pc</span><span class="o">.</span><span class="n">viscosity_kinematic</span><span class="p">(</span><span class="n">Temperature</span><span class="p">)))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">um</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The diameter of flocs after the waterfall is estimated to be&#39;</span><span class="p">,</span><span class="n">D_floc_waterfall</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>


<span class="c1"># Calculate maximum diameter of flocs leaving the sedimentation tank</span>
<span class="n">D_floc</span><span class="o">=</span> <span class="n">fm</span><span class="o">.</span><span class="n">diam_floc_vel_term</span><span class="p">(</span><span class="mi">0</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">,</span><span class="mi">10</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">mg</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">L</span><span class="p">,</span><span class="n">fm</span><span class="o">.</span><span class="n">PACl</span><span class="p">,</span><span class="n">fm</span><span class="o">.</span><span class="n">Clay</span><span class="p">,</span><span class="n">fm</span><span class="o">.</span><span class="n">DIM_FRACTAL</span><span class="p">,</span> <span class="mf">0.12</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">,</span><span class="mi">20</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">degC</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The maximum diameter of flocs leaving the sedimentation tank is&#39;</span><span class="p">,</span><span class="n">D_floc</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">um</span><span class="p">),</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>

<span class="n">v_graph</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">v_graph</span><span class="p">,(</span><span class="n">hf_Erdon</span><span class="p">(</span><span class="n">v_graph</span><span class="p">,</span> <span class="n">D_sand</span><span class="p">,</span> <span class="n">Temperature</span><span class="p">,</span> <span class="n">Porosity</span><span class="p">,</span> <span class="n">L</span><span class="p">)</span><span class="o">/</span><span class="n">L</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">dimensionless</span><span class="p">),</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">v_graph</span><span class="p">,(</span><span class="n">pc</span><span class="o">.</span><span class="n">headloss_kozeny</span><span class="p">(</span><span class="n">L</span><span class="p">,</span><span class="n">D_sand</span><span class="p">,</span> <span class="n">v_graph</span><span class="p">,</span> <span class="n">Porosity</span><span class="p">,</span> <span class="n">pc</span><span class="o">.</span><span class="n">viscosity_kinematic</span><span class="p">(</span><span class="n">Temperature</span><span class="p">)</span> <span class="p">)</span><span class="o">/</span><span class="n">L</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">dimensionless</span><span class="p">),</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;approach velocity (mm/s)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;head loss per m&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Ergun&#39;</span><span class="p">,</span> <span class="s1">&#39;Kozeny&#39;</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;../Images/Head_loss_Ergun_and_Kozeny&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-center" id="id1">
<span id="figure-head-loss-ergun-and-kozeny"></span><a class="reference internal image-reference" href="../_images/Head_loss_Ergun_and_Kozeny.png"><img alt="Head loss Ergun and Kozeny" src="../_images/Head_loss_Ergun_and_Kozeny.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 196 </span><span class="caption-text">The Ergun and Kozeny equations are very similar even at approach velocities that are much larger than are used in rapid sand filtration. At very high velocities the turbulent term in the Ergun equation begins to be significant.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Need to use a root finding method here because f_phi is a function of velocity</span>
<span class="c1"># Will use a graphical solution for now</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">v_graph</span><span class="p">,</span><span class="n">G_CS_Ergun</span><span class="p">(</span><span class="n">v_graph</span><span class="p">,</span> <span class="n">D_sand</span><span class="p">,</span> <span class="n">Temperature</span><span class="p">,</span> <span class="n">Porosity</span><span class="p">),</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;approach velocity (mm/s)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;velocity gradient (Hz)&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;../Images/G_vs_approach_velocity&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-center" id="id2">
<span id="figure-g-vs-approach-velocity"></span><a class="reference internal image-reference" href="../_images/G_vs_approach_velocity.png"><img alt="G vs approach velocity" src="../_images/G_vs_approach_velocity.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 197 </span><span class="caption-text">The Camp Stein velocity gradient increases rapidly with approach velocity.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#We guess at a velocity gradient by extrapolating wildly to a 20 um floc.</span>
<span class="n">G_CS</span> <span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">fm</span><span class="o">.</span><span class="n">ener_dis_diam_floc</span><span class="p">(</span><span class="mi">40</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">um</span><span class="p">))</span><span class="o">/</span><span class="n">pc</span><span class="o">.</span><span class="n">viscosity_kinematic</span><span class="p">(</span><span class="n">Temperature</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">Hz</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;A wild guess at the velocity gradient required to break up flocs is &#39;</span><span class="p">,</span><span class="n">G_CS</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="c1">#from the graph above we&#39;d need an approach velocity of about 80 mm/s to achieve a G of 10,000 Hz.</span>
<span class="n">v_inject</span> <span class="o">=</span> <span class="mi">80</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span>
<span class="p">(</span><span class="n">v_inject</span><span class="o">/</span><span class="n">v_a</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">dimensionless</span><span class="p">)</span>
<span class="n">injection_port_spacing</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">cm</span>
<span class="n">injection_port_width</span> <span class="o">=</span>     <span class="p">(</span><span class="n">injection_port_spacing</span><span class="o">/</span><span class="p">(</span><span class="n">v_inject</span><span class="o">/</span><span class="n">v_a</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The injection port width would be &#39;</span><span class="p">,</span><span class="n">injection_port_width</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The injection velocity would be &#39;</span><span class="p">,</span><span class="n">v_inject</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">),</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The analysis above suggests that the approach velocity required to break flocs down to a dimension of <span class="math notranslate nohighlight">\(20 \mu m\)</span> is approximately 80 mm/s. This is based on a VERY bad guesstimate of the relationship between floc size and shear.</p>
<p>We need to know how much energy would be expended to force the water through this high velocity injection zone. Once the water enters the sand it will spread radially in all directions. As the water spreads it will slow down and the head loss per distance traveled will decrease. We need to integrate this head loss over the first few centimeters to get an estimate of the injection head loss.</p>
<p>The velocity at distance r from the center of the injection line can be calculated from the velocity at <span class="math notranslate nohighlight">\(r_0\)</span> by continuity.</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-2">
<span class="eqno">(638)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-2" title="Permalink to this equation">¶</a></span>\[v_{a_r} r= v_{a_{r_0}} r_0\]</div>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-3">
<span class="eqno">(639)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-3" title="Permalink to this equation">¶</a></span>\[v_{a_r}= v_{a_{r_0}} \frac{r_0}{r}\]</div>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-4">
<span class="eqno">(640)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-4" title="Permalink to this equation">¶</a></span>\[dh_f= \frac{dr}{2g D_{sand}} \left( 300 \frac{\nu (1-\phi)^2}{D_{sand} \phi^3}v_a  + 3.5 \frac{ (1-\phi) }{\phi^3}v_a^2 \right)\]</div>
<p>Now substitute for the approach velocity</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-5">
<span class="eqno">(641)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-5" title="Permalink to this equation">¶</a></span>\[\frac{dh_f}{dr}= \frac{1}{2g D_{sand}} \left[ 300 \frac{\nu (1-\phi)^2}{D_{sand} \phi^3}\left(v_{a_{r_0}} \frac{r_0}{r}\right)  + 3.5 \frac{ (1-\phi) }{\phi^3} \left(v_{a_{r_0}} \frac{r_0}{r}\right)^2 \right]\]</div>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-6">
<span class="eqno">(642)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-6" title="Permalink to this equation">¶</a></span>\[dh_f= \frac{v_{a_{r_0}}r_0}{2g D_{sand}} \left[ 300 \frac{\nu (1-\phi)^2}{D_{sand} \phi^3}\left( \frac{1}{r}\right)  + 3.5 \frac{ (1-\phi)v_{a_{r_0}}r_0 }{\phi^3} \left( \frac{1}{r}\right)^2 \right] dr\]</div>
<p>We will create terms to make the integration easier</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-7">
<span class="eqno">(643)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-7" title="Permalink to this equation">¶</a></span>\[a_0 = \frac{v_{a_{r_0}}r_0}{2g D_{sand}}\]</div>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-8">
<span class="eqno">(644)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-8" title="Permalink to this equation">¶</a></span>\[a_1 = 300 \frac{\nu (1-\phi)^2}{D_{sand} \phi^3}\]</div>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-9">
<span class="eqno">(645)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-9" title="Permalink to this equation">¶</a></span>\[a_2 = 3.5 \frac{ (1-\phi)v_{a_{r_0}}r_0 }{\phi^3}\]</div>
<p>Now we set up the numerical integration and integrate from the injection site to the radius where the velocity is equal to the filtration velocity.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#This is for an inlet that serves 2 layers (up and down)</span>
<span class="n">v_filter</span> <span class="o">=</span> <span class="p">(</span><span class="mi">11</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">)</span><span class="o">/</span><span class="n">N_layers</span><span class="o">*</span><span class="mi">2</span>
<span class="n">S_branch</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">cm</span>
<span class="n">v0</span> <span class="o">=</span> <span class="mi">80</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span>
<span class="n">r0</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">v_filter</span><span class="o">/</span><span class="n">v0</span> <span class="o">*</span> <span class="n">S_branch</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="p">)</span>
<span class="n">r0</span>

<span class="c1">#create coefficients for the constant terms in the equation</span>
<span class="n">a0</span> <span class="o">=</span> <span class="n">v0</span> <span class="o">*</span> <span class="n">r0</span> <span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">pc</span><span class="o">.</span><span class="n">gravity</span><span class="o">*</span><span class="n">D_sand</span><span class="p">)</span>
<span class="n">a1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">300</span><span class="o">*</span><span class="n">pc</span><span class="o">.</span><span class="n">viscosity_kinematic</span><span class="p">(</span><span class="n">Temperature</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">Porosity</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">D_sand</span><span class="o">*</span><span class="n">Porosity</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
<span class="n">a2</span> <span class="o">=</span> <span class="mf">3.5</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">Porosity</span><span class="p">)</span><span class="o">*</span> <span class="n">v0</span> <span class="o">*</span> <span class="n">r0</span><span class="o">/</span><span class="n">Porosity</span><span class="o">**</span><span class="mi">3</span>
<span class="n">r1</span> <span class="o">=</span> <span class="n">S_branch</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="n">r1</span>
<span class="c1">#create an array of r values with each value centered in the ring that it represents. #We will use simple</span>
<span class="n">n_points</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">dr</span> <span class="o">=</span> <span class="p">((</span><span class="n">r1</span><span class="o">-</span><span class="n">r0</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">n_points</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="p">)</span>
<span class="n">r_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">((</span><span class="n">r0</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="p">),(</span><span class="n">r1</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">mm</span><span class="p">),</span><span class="n">n_points</span><span class="p">)</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">mm</span>
<span class="n">y_array</span> <span class="o">=</span> <span class="p">(</span><span class="n">a0</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="n">r_array</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">a2</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">r_array</span><span class="p">,</span><span class="n">r_array</span><span class="p">))))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">dimensionless</span><span class="p">)</span>
<span class="c1">#Use the trapezoidal rule to integrate</span>
<span class="c1">#need to reattach units to np.trapz.</span>
<span class="n">hf_inlet</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">trapz</span><span class="p">(</span><span class="n">y_array</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="n">r_array</span><span class="p">,</span> <span class="n">dx</span> <span class="o">=</span> <span class="n">dr</span><span class="p">)</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">mm</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;The head loss through the sand between the injection point and where it reaches the filtration velocity is &#39;</span><span class="p">,</span> <span class="n">hf_inlet</span><span class="p">)</span>
</pre></div>
</div>
<p>The analysis above suggests that a high velocity and high velocity gradient injection into the sand bed with the goal of breaking flocs into pieces that are 20 <span class="math notranslate nohighlight">\(\mu m\)</span> in diameter would require about 12 cm of head loss. This is based on the assumption that the water would be able to flow radially from the injection point and thus rapidly slow down. Thus the head loss rapidly decreases with distance from the injection point.</p>
<p>This is an experiment worth trying. It will help us understand if large flocs result in poorer filter performance.</p>
</div>
<div class="section" id="volume-of-flocs-per-pore">
<h2>Volume of flocs per pore<a class="headerlink" href="#volume-of-flocs-per-pore" title="Permalink to this headline">¶</a></h2>
<p>The volume of solids deposited in one pore can be obtained based on the average diameter of clean pore constrictions, the diameter of the constricted pore after solids deposition, and the thickness of the deposit. We already have an estimate for the diameter of the constricted pore after solids deposition. The thickness of the deposit must be proportional to some other length scale. We initially hypothesized that the thickness of the deposit scaled with the diameter of the flocs that make it up. That led to the conclusion that increased coagulant dose would increase the total mass of solids that could be retained by the filter before breakthrough. That doesn’t match experimental data and thus we now propose that the average thickness of the deposit scales with the sand grain size, or pore size, or pore separation distance. We will use the pore separation distance as our scaling parameter.</p>
<p>There are several options for estimating the areal extent of the constriction. We already have an estimate of the inner diameter of the constriction and thus all we need is an estimate of the outer extent of the deposited constriction.  One option would be to take the area of a circle defined by 3 spheres coming close together. That is a clear underestimate because the constriction must extend into the gaps between the spheres. A second option would be to use the porosity to estimate the average plane view area of the pores. If we assume that the pore must connect vertically and thus has a height <span class="math notranslate nohighlight">\(\Lambda_{pore}\)</span>, then the plane view area is given by</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-10">
<span class="eqno">(646)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-10" title="Permalink to this equation">¶</a></span>\[A_{pore} = \phi\Lambda_{pore}^2\]</div>
<p>The area of the deposit is obtained by subtracting the constriction opening from the previous equation.</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-11">
<span class="eqno">(647)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-11" title="Permalink to this equation">¶</a></span>\[A_{deposit} = \Lambda_{pore}^2\left(\phi-\frac{v_a}{ v_{constriction}} \right)\]</div>
<p>The volume of the deposit is thus</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-12">
<span class="eqno">(648)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-12" title="Permalink to this equation">¶</a></span>\[\rlap{-} V_{deposit} = \Pi_{pore}^{deposit}\Lambda_{pore}^3\left(\phi-\frac{v_a}{ v_{constriction}} \right)\]</div>
<p>where <span class="math notranslate nohighlight">\(\Pi_{pore}^{deposit}\)</span> a number much less than 1 that represents the fixed ratio between the thickness of the deposit and the pore separation distance.</p>
<p>The head loss per volume of particles deposited can be obtained by dividing the head loss per pore by the volume of particles per pore.</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-13">
<span class="eqno">(649)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-13" title="Permalink to this equation">¶</a></span>\[h_{l_{per_{deposit}}} = \frac{\bar v_{constriction}^2}{2g\Pi_{pore}^{deposit}\Lambda_{pore}^3\left(\phi-\frac{v_a}{ v_{constriction}} \right)}\]</div>
<p>If the primary goal for filter design were to decrease head loss per volume of solids deposited, then selecting larger sand (increasing <span class="math notranslate nohighlight">\(\Lambda_{pore}\)</span>) would be the clear strategy. Increasing the sand diameter by a factor of two should decrease the head loss by a factor of 8. Increasing the approach velocity <span class="math notranslate nohighlight">\(v_a\)</span>, results in a small increase in the head loss per volume of deposited material.</p>
<p>We need a method to connect turbidity removed by a filter into volume of deposited flocs. We will make this connection by first assuming that the flocs have a characteristic size based on a high shear event on their way into the filter. We begin with the relationship between the number of clay particles in a floc and the floc diameter.</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-14">
<span class="eqno">(650)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-14" title="Permalink to this equation">¶</a></span>\[D_{floc} = D_{clay} n_{clay}^\frac{1}{\Pi_{fractal}}\]</div>
<p>Where <span class="math notranslate nohighlight">\(\Pi_{fractal}\)</span> is the volume based fractal dimension of a floc. We estimate <span class="math notranslate nohighlight">\(\Pi_{fractal}\)</span> to have a value of 2.1. We can rearrange this equation and solve for the number of clay particles in a floc.</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-15">
<span class="eqno">(651)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-15" title="Permalink to this equation">¶</a></span>\[n_{clay} = \left(\frac{D_{floc}}{D_{clay}}\right)^{\Pi_{fractal}}\]</div>
<p>Now we can create a relationship for the concentration of clay in a floc dividing the mass of clay by the volume of the floc.</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-16">
<span class="eqno">(652)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-16" title="Permalink to this equation">¶</a></span>\[C_{clay_{floc}} = \frac{n_{clay}\rlap{-} V_{clay}\rho_{clay}}{\rlap{-} V_{floc}} = \frac{n_{clay}D_{clay}^3\rho_{clay}}{D_{floc}^3}= \frac{D_{clay}^3\rho_{clay}}{D_{floc}^3}\left(\frac{D_{floc}}{D_{clay}}\right)^{\Pi_{fractal}}\]</div>
<p>With one more simplification we obtain the desired equation for the clay concentration in a floc of given diameter.</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-17">
<span class="eqno">(653)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-17" title="Permalink to this equation">¶</a></span>\[C_{clay_{floc}} = \rho_{clay} \left(\frac{D_{clay}}{D_{floc}}\right)^{3-\Pi_{fractal}}\]</div>
<p>The mass of clay per pore is obtained by multiplying the deposit volume by the concentration of the flocs.</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-18">
<span class="eqno">(654)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-18" title="Permalink to this equation">¶</a></span>\[M_{clay_{pore}} =\rho_{clay}  \Pi_{pore}^{deposit}\Lambda_{pore}^3\left(\phi-\frac{v_a}{ v_{constriction}} \right)\left(\frac{D_{clay}}{D_{floc}}\right)^{3-\Pi_{fractal}}\]</div>
<p>The mass of clay per plan view area of the filter is obtained by multiplying by the number of pores per depth of the filter and dividing by the plan view area of a pore, <span class="math notranslate nohighlight">\(\Lambda_{pore}^2\)</span>.</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-19">
<span class="eqno">(655)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-19" title="Permalink to this equation">¶</a></span>\[M_{clay_{filter}} =H_{filter} \rho_{clay}  \Pi_{pore}^{deposit}\left(\phi-\frac{v_a}{ v_{constriction}} \right)\left(\frac{D_{clay}}{D_{floc}}\right)^{3-\Pi_{fractal}}\]</div>
<p>According to this model, the mass of clay that can be held by a filter increases linearly with filter depth. The retained mass is independent of the sand size. This is an easy hypothesis to test. Note, however, that this model does not account for the depth of the active zone. Presumably the active zone depth may be greater for larger diameter media and thus breakthrough may occur sooner for larger diameter media.</p>
<p>If coagulant dose increases it will have two effects. The primary particle attachment strength will increase, the constricted velocity will increase, and the mass retained will increase. The size of the flocs will also increase and that will result in a slight decrease in the retained mass.</p>
<p>Thus it isn’t immediately clear how changing the coagulant dose will change the maximum mass of retained particles. The evidence from the AguaClara filter theory team is that the mass of clay retained decreases as the coagulant dose increases.</p>
<p>The head loss per mass of particles deposited can be obtained by dividing the head loss per pore by the mass per pore.</p>
<div class="math notranslate nohighlight" id="equation-filtration-filtration-theory-and-future-work-20">
<span class="eqno">(656)<a class="headerlink" href="#equation-filtration-filtration-theory-and-future-work-20" title="Permalink to this equation">¶</a></span>\[h_{e_{permassclay}} = \frac{\bar v_{constriction_{max}}^2}{2g\rho_{clay}  \Pi_{pore}^{deposit}\Lambda_{pore}^3\left(\phi-\frac{v_a}{ v_{constriction}} \right)}\left(\frac{D_{floc}}{D_{clay}}\right)^{3-\Pi_{fractal}}\]</div>
<p>The head loss per mass of solids removed is significantly lower for larger sand sizes. When the coagulant dose increases the head loss increases rapidly because the constricted velocity increases and the floc diameter increases. Unfortunately we do not yet have a model describing floc size as a function of both velocity gradient and coagulant nanoparticle coverage.</p>
</div>
<div class="section" id="particle-removal-efficiency">
<h2>Particle removal efficiency<a class="headerlink" href="#particle-removal-efficiency" title="Permalink to this headline">¶</a></h2>
<p>Particle removal is complicated. We hypothesize that flocs form the deposits that change the flow from being wall shear dominated with a parabolic velocity profile to being uniform velocity flow through the constrictions. This uniform velocity profile transports a very small fraction of clay particles close enough to the deposit to be captured.</p>
<p>During filter ripening the particles that pass through the filter would be expected to be the primary particles because removal efficiency increases very rapidly with size. During the main part of the filter run the escaping particles are primary particles that weren’t captured by the actively growing deposits. Breakthrough at the end of the filter run is caused by both primary particles and flocs.</p>
<p>The flocs form a series of actively growing deposits. The number of actively growing deposits in series is possibly a function of the average volume of the flocs (smaller flocs result in more active deposits) and the volume fraction of the flocs normalized by the volume fraction of the primary particles. If this dimensionless volume fraction increases there may be more active deposits and hence improved removal of primary particles.</p>
</div>
<div class="section" id="proposed-experiments-and-inventions">
<h2>Proposed experiments and inventions<a class="headerlink" href="#proposed-experiments-and-inventions" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><p>Compare different sizes of sand media. Expect to get poorer removal efficiency with larger sand sizes, similar mass of particles retained at breakthrough, and much lower head loss.</p></li>
<li><p>dual media. expect to find less head loss and poorer performance than single small media. And expect the smaller media to not contribute anything.</p></li>
<li><p>How small could the sand media be? We could get better filter performance if we used smaller sand. Shallow sand beds are apparently fine and if we used smaller diameter sand the filter layer depth could be reduced even more. Why not use a 0.2 mm sand and 5 cm sand layers? If we offset the inlet and outlet branches (with branches spaced on 10 cm centers and inlet and outlet branches offset by 5 cm) there would still be a significant path length.</p></li>
<li><p>Floc amendment. We could add floc hopper particles to the filter to increase the ratio of flocs to primary particles. Presumably this would reduce effluent turbidity IF there aren’t many primary particles in the floc hopper. We could compare the prospects of using smaller sand grains vs adding floc amendment as strategies to get higher performing filters.</p></li>
<li><p>Now that we know that sand doesn’t remove clay without the help of flocs, could we invent a filter that could capture clay and other primary particles without requiring ripening? We need a filter media that has sharp edges or sudden constrictions that create high velocity near the edge. Washers with holes the size of constrictions aren’t available.</p></li>
</ol>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="Filtration_Design_Solution.html" class="btn btn-neutral float-right" title="Filtration Design Solution" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="Filtration_Design.html" class="btn btn-neutral float-left" title="Filtration Design" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, AguaClara Cornell.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>